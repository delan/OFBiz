<?xml version="1.0" encoding="UTF-8"?>
<!--
    $Id$
    
    Copyright 2001-2006 The Apache Software Foundation
    
    Licensed under the Apache License, Version 2.0 (the "License"); you may not
    use this file except in compliance with the License. You may obtain a copy of
    the License at
    
    http://www.apache.org/licenses/LICENSE-2.0
    
    Unless required by applicable law or agreed to in writing, software
    distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
    WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
    License for the specific language governing permissions and limitations
    under the License.
-->
<forms xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
        xsi:noNamespaceSchemaLocation="http://www.ofbiz.org/dtds/widget-form.xsd">

    <form name="FindParties" type="single" 
        target="findParties" title="Find and list parties"
        default-title-style="tableheadtext" default-widget-style="tabletext" default-tooltip-style="tabletext">
        <actions>
            <set field="deleted" from-field="parameters.deleted"/>
        </actions>
        <!--field name="statusId"><hidden value="PARTYREL-ACTIVE"/></field-->
        <field name="hideSearch"><hidden value="Y"/></field>
        <field name="partyId" title="${uiLabelMap.PartyPartyId}" ><text-find default-option="contains" ignore-case="true"/></field>
        <field name="groupName"><text-find default-option="contains" ignore-case="true"/></field>
        <field name="lastName" ><text-find default-option="contains" ignore-case="true"/></field>
        <field name="partyRelationshipTypeId" title="${uiLabelMap.opentravelsystemPartyType}">
            <drop-down allow-empty="true">
                <entity-options description="${partyRelationshipName}" entity-name="PartyRelationshipType">
                    <entity-order-by field-name="partyRelationshipName"/>
                </entity-options>
            </drop-down>
        </field>
        <field name="statusId">
            <drop-down allow-empty="true">
                <entity-options description="${description}" entity-name="StatusItem">
                    <entity-constraint name="statusTypeId" value="PARTY-RELATION"/>
                    <entity-order-by field-name="description"/>
                </entity-options>
            </drop-down>
        </field>
        <field name="submitButton" title="${uiLabelMap.CommonLookup}" widget-style="smallSubmit">
            <submit button-type="button"/>
        </field>
    </form>
    
    <form name="ListParties" type="list" separate-columns="true" 
        title="Party List"  default-title-style="tableheadtext"
        default-widget-style="tabletext" default-tooltip-style="tabletext"
        paginate-target="findParties" list-name="listIt" default-entity-name="PartyNameView">
        <actions>
            <service service-name="performFind" result-map-name="result" result-map-list-name="listIt">
                <field-map field-name="inputFields" env-name="parameters"/>
                <field-map field-name="entityName" value="PartyRelationshipAndPartyDetail"/>
                <field-map field-name="orderBy" value="partyId"/>
            </service>
        </actions>
        <!--auto-fields-entity entity-name="PartyRelationshipAndPartyDetail" default-field-type="display"/-->
        <field name="partyId" title="${uiLabelMap.PartyPartyId}" widget-style="buttontext" >
            <hyperlink description="${partyId}" target="editParty?partyId=${partyId}"/>
        </field>
        <field name="partyTypeId"><display-entity entity-name="PartyType" description="${description}"/></field>
        <field name="partyRelationshipTypeId" title="${uiLabelMap.opentravelsystemPartyType}"><display-entity entity-name="PartyRelationshipType" description="${partyRelationshipName}"/></field>
        <field name="groupName" title="${uiLabelMap.PartyName}"><display description="${groupName} ${lastName} ${firstName} ${middleName}"/></field>
        <field name="statusId"><display-entity entity-name="StatusItem" description="${description}"/></field>
        <field name="financialHistory" title=" " widget-style="buttontext" >
            <hyperlink description="Fin.Hist" target="partyFinancialHistory?partyId=${partyId}" target-window="new"/>
        </field>
        <field name="Disable" title=" " widget-style="buttontext">
            <hyperlink description="${uiLabelMap.CommonDelete}" target-type="plain" target="javascript:confirmActionLink('You want to delete this party?','deleteParty?partyId=${partyId}&amp;statusId=PARTYREL-DELETED')"/>
        </field>
    </form>
    
    <form name="editParty" type="single" 
        target="updateParty" title="Edit Party" default-map-name="info"
        default-title-style="tableheadtext" default-widget-style="inputBox" default-tooltip-style="tabletext">
        <actions>
            <service service-name="otsGetParty" result-map-name="info">
                <field-map field-name="partyId" value="${parameters.partyId}"/>
            </service>
        </actions>
        <alt-target use-when="party==null||partyId==null" target="addParty"/>
        <auto-fields-service service-name="otsAddParty" map-name="info" default-field-type="edit"/>
        <field name="partyId"><hidden value="${parameters.partyId}"/></field>
        <field name="partyRelationshipTypeId" title="Party Type">
            <drop-down allow-empty="false">
                <entity-options description="${partyRelationshipName}" entity-name="PartyRelationshipType">
                    <entity-order-by field-name="partyRelationshipName"/>
                </entity-options>
            </drop-down>
        </field>
        <field name="countryGeoId" title="Country">
            <drop-down allow-empty="true">
                <entity-options description="${geoName}" entity-name="Geo" key-field-name="geoId">
                    <entity-constraint name="geoTypeId" operator="equals" value="COUNTRY"/>
                    <entity-order-by field-name="geoName"/>
                </entity-options>
            </drop-down>
        </field>
        <field name="bankName"><hidden/></field>
        <field name="routingNumber"><hidden/></field>
        <field name="webAddress"><hidden/></field>
        <field name="accountNumber" title="Bank Account Number"><text/></field>
        <field position="1" use-when="party==null||partyId==null" name="submitButton" title="Create" widget-style="smallSubmit">
            <submit button-type="button"/>
        </field>
        <field position="1" use-when="party!=null&amp;&amp;partyId!=null" name="submitButton" title="Update" widget-style="smallSubmit">
            <submit button-type="button"/>
        </field>
    </form>

    <form name="editOrganizationCompany" type="single" 
        target="updateOrganizationCompany" title="Edit Organization Party" default-map-name="partyInfo"
        default-title-style="tableheadtext" default-widget-style="inputBox" default-tooltip-style="tabletext">
        <actions>
            <service service-name="otsGetOrganizationParty" result-map-name="partyInfo"/>
        </actions>
        <auto-fields-service service-name="otsUpdateOrganizationParty"/>
        <field name="countryGeoId" title="Country">
            <drop-down allow-empty="true">
                <entity-options description="${geoName}" entity-name="Geo" key-field-name="geoId">
                    <entity-constraint name="geoTypeId" operator="equals" value="COUNTRY"/>
                    <entity-order-by field-name="geoName"/>
                </entity-options>
            </drop-down>
        </field>
        <field name="accountNumber" title="Bank Account Number"><text/></field>
        <field name="baseCurrencyUomId" widget-style="tabletext"><display/></field>
        <field position="1" use-when="party==null||partyId==null" name="addButton" title="Create" widget-style="smallSubmit">
            <submit button-type="button"/>
        </field>
        <field position="1" use-when="party!=null&amp;&amp;partyId!=null" name="updateButton" title="Update" widget-style="smallSubmit">
            <submit button-type="button"/>
        </field>
    </form>
    
    <form name="partyFinancialHistoryInvoices" type="list" list-name="historyListInvoices" 
        default-title-style="tableheadtext" default-widget-style="tabletext" 
        default-tooltip-style="tabletext" target="updateCategoryProductMember">
        <field name="invoiceId"><hyperlink target="invoiceOverview?invoiceId=${invoiceId}" description="${invoiceId}"/></field>
        <field name="invoiceTypeId" title="T"><display/></field>
        <field name="invoiceDate"><display/></field>
        <field name="invoiceAmount" widget-area-style="tabletextright"><display/></field>
        <field name="totInvoiceApplied" widget-area-style="tabletextright"><display/></field>
        <field name="applied" widget-area-style="tabletextright"><display/></field>
        <field name="paymentId"><hyperlink target="paymentOverview?paymentId=${paymentId}" description="${paymentId}"/></field>
        <field name="effectiveDate"><display/></field>
        <field name="amount" widget-area-style="tabletextright"><display/></field>
    </form>
    
    <form name="partyFinancialHistoryPayments" type="list" list-name="historyListPayments" 
        default-title-style="tableheadtext" default-widget-style="tabletext" 
        default-tooltip-style="tabletext" target="updateCategoryProductMember">
        <field name="paymentId"><hyperlink target="paymentOverview?paymentId=${paymentId}" description="${paymentId}"/></field>
        <field name="effectiveDate"><display/></field>
        <field name="amount" widget-area-style="tabletextright"><display/></field>
        <field name="applied" widget-area-style="tabletextright"><display/></field>
        <field name="toPaymentId"><hyperlink target="paymentOverview?paymentId=${paymentId}" description="${toPaymentId}"/></field>
        <field name="toEffectiveDate"><display/></field>
        <field name="toAmount" widget-area-style="tabletextright"><display/></field>
    </form>
    
    <form name="partyFinancialHistoryInvoicesN" type="list" list-name="historyListInvoicesN" 
        default-title-style="tableheadtext" default-widget-style="tabletext" 
        default-tooltip-style="tabletext" target="updateCategoryProductMember">
        <field name="invoiceId"><hyperlink target="invoiceOverview?invoiceId=${invoiceId}" description="${invoiceId}"/></field>
        <field name="invoiceTypeId" title="T"><display/></field>
        <field name="invoiceDate"><display/></field>
        <field name="invoiceAmount" widget-area-style="tabletextright"><display/></field>
        <field name="invoiceNotApplied" widget-area-style="tabletextright"><display/></field>
    </form>

    <form name="partyFinancialHistoryPaymentsO" type="list" list-name="historyListPaymentsO" 
        default-title-style="tableheadtext" default-widget-style="tabletext" 
        default-tooltip-style="tabletext" target="updateCategoryProductMember">
        <field name="paymentId"><hyperlink target="paymentOverview?paymentId=${paymentId}" description="${paymentId}"/></field>
        <field name="effectiveDate"><display/></field>
        <field name="amount" widget-area-style="tabletextright"><display/></field>
        <field name="applied" widget-area-style="tabletextright"><display/></field>
        <field name="invoiceId"><hyperlink target="invoiceOverview?invoiceId=${invoiceId}" description="${invoiceId}"/></field>
        <field name="invoiceItemSeqId" title="Seq"><display/></field>
        <field name="partyId" widget-area-style="tabletextright"><display/></field>
    </form>

    <form name="partyFinancialHistoryPaymentsN" type="list" list-name="historyListPaymentsN" 
        default-title-style="tableheadtext" default-widget-style="tabletext" 
        default-tooltip-style="tabletext" target="updateCategoryProductMember">
        <field name="paymentId"><hyperlink target="paymentOverview?paymentId=${paymentId}" description="${paymentId}"/></field>
        <field name="effectiveDate"><display/></field>
        <field name="amount" widget-area-style="tabletextright"><display/></field>
        <field name="notApplied" widget-area-style="tabletextright"><display/></field>
    </form>
    
    <form name="partyFinancialSummary" type="single" title="Financial summary" default-map-name="finanSummary"
        default-title-style="tableheadtext" default-widget-style="tabletext" default-tooltip-style="tabletext">
        <field position="1" name="totalSalesInvoice"><display/></field>
        <field position="2" name="totalPurchaseInvoice"><display/></field>
        <field position="1" name="totalPaymentsIn"><display/></field>
        <field position="2" name="totalPaymentsOut"><display/></field>
        <field position="1" name="totalInvoiceNotApplied"><display/></field>
        <field position="2" name="totalPaymentNotApplied"><display/></field>
        <field position="1" name="totalToBePaid" title="To be paid to: ${parameters.partyId}"><display/></field>
        <field position="2" name="totalToBeReceived" title="To be received from: ${parameters.partyId}"><display/></field>
    </form>
    
    <form name="visitList" type="list" list-name="visitList" paginate="true" paginate-index-field="VIEW_INDEX" paginate-next-label="Next" paginate-previous-label="Prev" paginate-size-field="VIEW_SIZE" 
        default-title-style="tableheadtext" default-widget-style="tabletext" default-tooltip-style="tabletext">
        <field name="visitId" widget-style="buttontext" header-link="showvisits?sort=visitId&amp;showAll=${parameters.showAll}&amp;selected=${parameters.selected}" header-link-style="tableheadbutton"><hyperlink target="visitdetail?visitId=${visitId}&amp;selected=${parameters.selected}" description="${visitId}"/></field>
        <field name="visitorId" title="visitorId" header-link="showvisits?sort=visitorId&amp;showAll=${parameters.showAll}&amp;selected=${parameters.selected}" header-link-style="tableheadbutton"><display/></field>
        <field name="partyId" widget-style="buttontext" header-link="showvisits?sort=partyId&amp;showAll=${parameters.showAll}&amp;selected=${parameters.selected}" header-link-style="tableheadbutton"><hyperlink target="viewprofile?partyId=${partyId}" description="${partyId}"/></field>
        <field name="userLoginId" title="userLoginId" header-link="showvisits?sort=userLoginId&amp;showAll=${parameters.showAll}&amp;selected=${parameters.selected}" header-link-style="tableheadbutton"><display/></field>
        <field name="-userCreated" title="userCreated" header-link="showvisits?sort=userCreated&amp;showAll=${parameters.showAll}&amp;selected=${parameters.selected}" header-link-style="tableheadbutton"><display/></field>
        <field name="webappName" title="webappName" header-link="showvisits?sort=webappName&amp;showAll=${parameters.showAll}&amp;selected=${parameters.selected}" header-link-style="tableheadbutton"><display/></field>
        <field name="clientIpAddress" title="clientIpAddress" header-link="showvisits?sort=clientIpAddres&amp;showAll=${parameters.showAll}&amp;selected=${parameters.selected}" header-link-style="tableheadbutton"><display/></field>
        <field name="fromDate" title="fromDate" header-link="showvisits?sort=fromDate&amp;showAll=${parameters.showAll}&amp;selected=${parameters.selected}" header-link-style="tableheadbutton" ><display/></field>
        <field name="thruDate"  title="thruDate" header-link="showvisits?sort=thruDate&amp;showAll=${parameters.showAll}&amp;selected=${parameters.selected}" header-link-style="tableheadbutton"><display/></field>
    </form>  
 
    <form name="visitOverviews" type="list" list-name="visitOverviewList" title="Visit Overview" 
        default-title-style="tableheadtext" default-widget-style="tabletext" default-tooltip-style="tabletext">
        
        <actions>
            <service service-name="otsVisitOverviewList" result-map-list-name="visitOverviewList"/>
        </actions>
        <field name="dayNr" title="Day"><display/></field>
        <field name="TotalCount" title="Total Visits"><display/></field>
        <field name="UniqueCount" title="Unique Visits"><display/></field>
   </form>  
       
    <form name="Referrers" type="list" list-name="referrerList" title="List Referrers"  
        default-title-style="tableheadtext" default-widget-style="tabletext" default-tooltip-style="tabletext">       
        <actions>
           <service service-name="otsReferrers" result-map-list-name="referrerList"/>
        </actions>
        <field name="count" title="Referrals"><display/></field>
        <field name="initialReferrer" title="Referrer"><display/></field>
    </form>  
    
    <form name="searchQueries" type="list" list-name="searchQueryList" title="List Search Queries"  
        default-title-style="tableheadtext" default-widget-style="tabletext" default-tooltip-style="tabletext">       
        <actions>
            <service service-name="otsQueries" result-map-list-name="searchQueryList"/>
        </actions>
        <field name="count" title="Searched"><display/></field>
        <field name="query" title="Search Queries"><display/></field>
    </form> 
</forms>