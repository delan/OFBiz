<?xml version="1.0" encoding="UTF-8"?>
<forms xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
        xsi:noNamespaceSchemaLocation="http://www.ofbiz.org/dtds/widget-form.xsd">

    <form name="FindParties" type="single" 
        target="findParties" title="Find and list parties"
        default-title-style="tableheadtext" default-widget-style="tabletext" default-tooltip-style="tabletext">
        <field name="hideSearch"><hidden value="Y"/></field>
        <field name="partyIdFrom"><hidden value="${organizationPartyId}"/></field>
        <field name="partyId" ><text-find/></field>
        <field name="groupName"><text-find/></field>
        <field name="lastName" ><text-find/></field>
        <field position="1" name="partyRelationshipTypeId">
            <drop-down allow-empty="true">
                <entity-options description="${partyRelationshipTypeId}" entity-name="PartyRelationshipType">
                    <entity-order-by field-name="partyRelationshipTypeId"/>
                </entity-options>
            </drop-down>
        </field>
        <field name="submitButton" title="${uiLabelMap.CommonLookup}" widget-style="smallSubmit">
            <submit button-type="button"/>
        </field>
    </form>
    
    <form name="ListParties" type="list" separate-columns="true" 
        title="Party List"  default-title-style="tableheadtext"
        default-widget-style="tabletext" default-tooltip-style="tabletext"
        paginate-target="findParties" list-iterator-name="listIt" default-entity-name="PartyRelationshipAndPartyDetail">
        <actions>
            <service service-name="performFind" result-map-name="result" result-map-list-iterator-name="listIt">
                <field-map field-name="inputFields" env-name="parameters"/>
                <field-map field-name="entityName" value="PartyRelationshipAndPartyDetail"/>
                <field-map field-name="orderBy" value="partyId"/>
            </service>
        </actions>
        <field name="partyId" widget-style="buttontext" >
            <hyperlink description="${partyId}" target="viewprofile?popup=yes&amp;partyId=${partyId}" target-window="new"/>
        </field>
        <field name="partyRelationshipTypeId" title="Relation"><display/></field>
        <field name="groupName" title="Name"><display description="${groupName} ${lastName} ${firstName} ${middleName}"/></field>
        <field name="financialHistory" title=" " widget-style="buttontext" >
            <hyperlink description="Fin.Hist" target="partyFinancialHistory?partyId=${partyId}" target-window="new"/>
        </field>
    </form>
    
    <form name="partyFinancialHistory" type="list" list-name="historyList" 
        default-title-style="tableheadtext" default-widget-style="tabletext" 
        default-tooltip-style="tabletext" target="updateCategoryProductMember">
        <field name="invoiceId"><hyperlink target="invoiceOverview?invoiceId=${invoiceId}" description="${invoiceId}"/>></field>
        <field name="invoiceTypeId" title="T"><display/></field>
        <field name="invoiceDate"><display/></field>
        <field name="invoiceAmount"><display/></field>
        <field name="totApplied"><display/></field>
        <field name="applied"><display/></field>
        <field name="paymentId"><hyperlink target="paymentOverview?paymentId=${paymentId}" description="${paymentId}"/></field>
        <field name="effectiveDate"><display/></field>
        <field name="amount"><display/></field>
        <field name="applied"><display/></field>
    </form>

    <form name="partyFinancialSummary" type="single" title="Financial summary" default-map-name="finanSummary"
        default-title-style="tableheadtext" default-widget-style="tabletext" default-tooltip-style="tabletext">
        <field name="totalInvoice" title=""><display/></field>
        <field name="totalPayment" title=""><display/></field>
        <field name="totalToBePaid" title=""><display/></field>
    </form>
    <form name="ListCustomers" type="list" list-name="customers" 
        default-title-style="tableheadtext" default-widget-style="inputBox" 
        default-tooltip-style="tabletext" target="updateCategoryProductMember">
        
        <field name="p" title="Party Id" widget-style="buttontext"><hyperlink target="viewprofile?partyId=${partyId}" description="${partyId}"/></field>        
        <field name="partyId" title="Name"><display-entity entity-name="Person" description="${lastName},${firstName} ${middleName}" key-field-name="partyId"/></field>
        <field name="totalOrders" title="Nbr of orders" widget-style="buttontext"><hyperlink target="findordersCust?lookupFlag=Y&amp;hideFields=Y&amp;partyId=${partyId}" description="${totalOrders}"/></field>
        <field name="totalGrandAmount" title="Amount"><display/></field>
    </form>
    
</forms>