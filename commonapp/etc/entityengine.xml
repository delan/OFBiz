<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE entity-config PUBLIC "-//OFBiz//DTD Entity Engine Config//EN" "http://www.ofbiz.org/dtds/entity-config.dtd">
<!--
 - This file configures the Entity Engine JDBC (or other DataSource) and JTA
access. For a detailed description see the core/docs/entityconfig.html file.
-->
<entity-config>
    <resource-loader name="mainfile" class="org.ofbiz.core.config.FileLoader"
            prepend-env="ofbiz.home" prefix="/commonapp/entitydef/"/>
    <resource-loader name="maincp" class="org.ofbiz.core.config.ClasspathLoader"/>
    <resource-loader name="mainurl" class="org.ofbiz.core.config.UrlLoader"/>

    <jndi-server name="localjndi"
            context-provider-url="rmi://127.0.0.1:1099"
            initial-context-factory="com.sun.jndi.rmi.registry.RegistryContextFactory"
            url-pkg-prefixes="java.naming.rmi.security.manager"
            security-principal=""
            security-credentials=""/>
    <!-- this jndi-server has no parameters so the factory will use the default
        InitialContext constructor which gets these values from the jndi.properties file -->
    <jndi-server name="default"/>

    <!-- the transaction factory class to use, one is needed for each way of getting JTA interfaces -->
    <transaction-factory class="org.ofbiz.core.entity.transaction.TyrexFactory"/>

    <!-- NOTE: to use the JndiFactory you must specify the necessary JNDI properties -->
    <!--
    <transaction-factory class="org.ofbiz.core.entity.transaction.JNDIFactory">
        <user-transaction-jndi jndi-server-name="localjndi" jndi-name="java:comp/UserTransaction"/>
        <transaction-manager-jndi jndi-server-name="localjndi" jndi-name="java:comp/TransactionManager"/>
    </transaction-factory>
    -->

    <delegator name="default" entity-model-reader="main" entity-group-reader="main">
        <group-map group-name="org.ofbiz.commonapp" datasource-name="localpostgres"/>
    </delegator>
    <delegator name="sap" entity-model-reader="main" entity-group-reader="main">
        <group-map group-name="org.ofbiz.commonapp" datasource-name="localsapdb"/>
    </delegator>

    <entity-model-reader name="main">
        <resource loader="mainfile" location="entitymodel.xml"/>
        <resource loader="mainfile" location="entitymodel_accounting.xml"/>
        <resource loader="mainfile" location="entitymodel_humanres.xml"/>
        <resource loader="mainfile" location="entitymodel_shipment.xml"/>
        <resource loader="mainfile" location="entitymodel_workeffort.xml"/>
        <resource loader="mainfile" location="entitymodel_workflow.xml"/>
        <resource loader="mainfile" location="entitymodel_order.xml"/>
        <resource loader="mainfile" location="entitymodel_party.xml"/>
        <resource loader="mainfile" location="entitymodel_product.xml"/>
    </entity-model-reader>

    <entity-group-reader name="main" loader="mainfile" location="entitygroup.xml"/>

    <field-type name="hsql" loader="mainfile" location="fieldtypehsql.xml"/>
    <field-type name="cloudscape" loader="mainfile" location="fieldtypecloudscape.xml"/>
    <field-type name="mysql" loader="mainfile" location="fieldtypemysql.xml"/>
    <field-type name="postgres" loader="mainfile" location="fieldtypepostgres.xml"/>
    <field-type name="postgres72" loader="mainfile" location="fieldtypepostgres72.xml"/>
    <field-type name="oracle" loader="mainfile" location="fieldtypeoracle.xml"/>
    <field-type name="sapdb" loader="mainfile" location="fieldtypesapdb.xml"/>

    <!--
    For DAO/JDBC Helper: Tries:
      1. JNDI Datasource IF jdbc.jndi.name, context.provider, etc are specified
      2. Tyrex if available (uses jdbc.driver, jdbc.uri, jdbc.username, jdbc.password, isolation.level)
      3. Direct to manually laoded JDBC driver (uses jdbc.driver, jdbc.uri, jdbc.username, jdbc.password)

    Transaction Isolation Levels - For Tyrex (<helperName>.isolation.level) can be as follows:
     * None
     * ReadCommitted
     * ReadUncommitted
     * RepeatableRead
     * Serializable (default)
    -->
    <datasource name="localhsql"
            helper-class="org.ofbiz.core.entity.GenericHelperDAO"
            field-type-name="hsql"
            check-on-start="true"
            add-missing-on-start="true"
            use-foreign-keys="false">
        <sql-load-path path="commonapp/db" prepend-env="ofbiz.home"/>
        <sql-load-path path="ecommerce/etc" prepend-env="ofbiz.home"/>
        <inline-jdbc
                jdbc-driver="org.hsqldb.jdbcDriver"
                jdbc-uri="jdbc:hsqldb:../../data/ofbiz"
                jdbc-username="sa"
                jdbc-password=""
                isolation-level="Serializable"/>
        <!-- <jndi-jdbc jndi-server-name="localjndi" jndi-name="java:/HsqlDataSource" isolation-level="Serializable"/> -->
    </datasource>

    <datasource name="localcloudscape"
            helper-class="org.ofbiz.core.entity.GenericHelperDAO"
            field-type-name="cloudscape"
            check-on-start="true"
            add-missing-on-start="true">
        <sql-load-path path="commonapp/db" prepend-env="ofbiz.home"/>
        <sql-load-path path="ecommerce/etc" prepend-env="ofbiz.home"/>
        <inline-jdbc
                jdbc-driver="COM.cloudscape.core.JDBCDriver"
                jdbc-uri="jdbc:cloudscape:../../data/ofbiz; create=true"
                jdbc-username="ofbiz"
                jdbc-password="ofbiz"
                isolation-level="Serializable"/>
        <!-- <jndi-jdbc jndi-server-name="localjndi" jndi-name="java:/CloudscapeDataSource" isolation-level="Serializable"/> -->
    </datasource>

    <datasource name="localmysql"
            helper-class="org.ofbiz.core.entity.GenericHelperDAO"
            field-type-name="mysql"
            check-on-start="true"
            add-missing-on-start="true"
            use-foreign-keys="false">
        <sql-load-path path="commonapp/db" prepend-env="ofbiz.home"/>
        <sql-load-path path="ecommerce/etc" prepend-env="ofbiz.home"/>
        <inline-jdbc
                jdbc-driver="org.gjt.mm.mysql.Driver"
                jdbc-uri="jdbc:mysql://127.0.0.1/ofbiz"
                jdbc-username="ofbiz"
                jdbc-password="ofbiz"
                isolation-level="Serializable"/>
        <!-- <jndi-jdbc jndi-server-name="localjndi" jndi-name="java:/MySqlDataSource" isolation-level="Serializable"/> -->
    </datasource>

    <datasource name="localpostgres"
            helper-class="org.ofbiz.core.entity.GenericHelperDAO"
            field-type-name="postgres72"
            check-on-start="true"
            add-missing-on-start="true">
        <sql-load-path path="commonapp/db" prepend-env="ofbiz.home"/>
        <sql-load-path path="ecommerce/etc" prepend-env="ofbiz.home"/>
        <inline-jdbc
                jdbc-driver="org.postgresql.Driver"
                jdbc-uri="jdbc:postgresql://127.0.0.1/ofbiz"
                jdbc-username="ofbiz"
                jdbc-password="ofbiz"
                isolation-level="ReadCommitted"/>
        <!-- <jndi-jdbc jndi-server-name="localjndi" jndi-name="java:/PostgresDataSource" isolation-level="ReadCommitted"/> -->
        <!-- <tyrex-dataSource dataSource-name="localpostgres" isolation-level="ReadCommitted"/> -->
    </datasource>

    <datasource name="localoracle"
            helper-class="org.ofbiz.core.entity.GenericHelperDAO"
            field-type-name="oracle"
            check-on-start="true"
            add-missing-on-start="true">
        <sql-load-path path="commonapp/db" prepend-env="ofbiz.home"/>
        <sql-load-path path="ecommerce/etc" prepend-env="ofbiz.home"/>
        <inline-jdbc
                jdbc-driver="oracle.jdbc.driver.OracleDriver"
                jdbc-uri="jdbc:oracle:thin:@127.0.0.1:1521:ofbiz"
                jdbc-username="ofbiz"
                jdbc-password="ofbiz"
                isolation-level="ReadCommitted"/>
        <!-- <jndi-jdbc jndi-server-name="localjndi" jndi-name="java:/OracleDataSource" isolation-level="Serializable"/> -->
        <!-- <tyrex-dataSource dataSource-name="localoracle" isolation-level="ReadCommitted"/> -->
    </datasource>

    <datasource name="localsapdb"
            helper-class="org.ofbiz.core.entity.GenericHelperDAO"
            field-type-name="sapdb"
            check-on-start="true"
            add-missing-on-start="true">
        <sql-load-path path="commonapp/db" prepend-env="ofbiz.home"/>
        <sql-load-path path="ecommerce/etc" prepend-env="ofbiz.home"/>
        <inline-jdbc
                jdbc-driver="com.sap.dbtech.jdbc.DriverSapDB"
                jdbc-uri="jdbc:sapdb://localhost/ofbiz"
                jdbc-username="ofbiz"
                jdbc-password="ofbiz"
                isolation-level="Serializable"/>
        <!-- <jndi-jdbc jndi-server-name="localjndi" jndi-name="java:/SapDBDataSource" isolation-level="Serializable"/> -->
    </datasource>

    <datasource name="localp6spy"
            helper-class="org.ofbiz.core.entity.GenericHelperDAO"
            field-type-name="oracle"
            check-on-start="true"
            add-missing-on-start="true">
        <sql-load-path path="commonapp/db" prepend-env="ofbiz.home"/>
        <sql-load-path path="ecommerce/etc" prepend-env="ofbiz.home"/>
        <inline-jdbc
                jdbc-driver="com.p6spy.engine.spy.P6SpyDriver"
                jdbc-uri="jdbc:oracle:oci8:@EDS2"
                jdbc-username="ofbiz"
                jdbc-password="ofbiz"
                isolation-level="Serializable"/>
        <!-- <jndi-jdbc jndi-server-name="localjndi" jndi-name="java:/OracleDataSource" isolation-level="Serializable"/> -->
    </datasource>
</entity-config>
