<?xml version="1.0"?>
<!DOCTYPE ejb-jar PUBLIC "-//Sun Microsystems, Inc.//DTD Enterprise JavaBeans 1.1//EN" "http://java.sun.com/j2ee/dtds/ejb-jar_1_1.dtd">

<!-- 
 *  Copyright (c) 2001 The Open For Business Project - www.ofbiz.org
 *
 *  Permission is hereby granted, free of charge, to any person obtaining a 
 *  copy of this software and associated documentation files (the "Software"), 
 *  to deal in the Software without restriction, including without limitation 
 *  the rights to use, copy, modify, merge, publish, distribute, sublicense, 
 *  and/or sell copies of the Software, and to permit persons to whom the 
 *  Software is furnished to do so, subject to the following conditions:
 *
 *  The above copyright notice and this permission notice shall be included 
 *  in all copies or substantial portions of the Software.
 *
 *  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS 
 *  OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF 
 *  MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. 
 *  IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY 
 *  CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT 
 *  OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR 
 *  THE USE OR OTHER DEALINGS IN THE SOFTWARE. 
-->

<ejb-jar>
  <description>The Common Application Components of the Open For Business Project</description>
  <enterprise-beans>
    <entity>
      <ejb-name>UserLogin</ejb-name>
      <home>org.ofbiz.commonapp.security.login.UserLoginHome</home>
      <remote>org.ofbiz.commonapp.security.login.UserLogin</remote>
      <ejb-class>org.ofbiz.commonapp.security.login.UserLoginBean</ejb-class>
      <persistence-type>Container</persistence-type>
      <prim-key-class>java.lang.String</prim-key-class>
      <reentrant>False</reentrant>

      <cmp-field>
        <field-name>userLoginId</field-name>
      </cmp-field>
      <cmp-field>
        <field-name>partyId</field-name>
      </cmp-field>
      <cmp-field>
        <field-name>contactMechanismId</field-name>
      </cmp-field>
      <cmp-field>
        <field-name>currentUserId</field-name>
      </cmp-field>
      <cmp-field>
        <field-name>currentPassword</field-name>
      </cmp-field>

      <primkey-field>userLoginId</primkey-field>
      <resource-ref>
        <res-ref-name>jdbc/MainDataSource</res-ref-name>
        <res-type>javax.sql.DataSource</res-type>
        <res-auth>Container</res-auth>
      </resource-ref>
    </entity>
    <entity>
      <ejb-name>LoginAccountHistory</ejb-name>
      <home>org.ofbiz.commonapp.security.login.LoginAccountHistoryHome</home>
      <remote>org.ofbiz.commonapp.security.login.LoginAccountHistory</remote>
      <ejb-class>org.ofbiz.commonapp.security.login.LoginAccountHistoryBean</ejb-class>
      <persistence-type>Container</persistence-type>
      <prim-key-class>org.ofbiz.commonapp.security.login.LoginAccountHistoryPK</prim-key-class>
      <reentrant>False</reentrant>

      <cmp-field>
        <field-name>userLoginId</field-name>
      </cmp-field>
      <cmp-field>
        <field-name>userLoginSeqId</field-name>
      </cmp-field>
      <cmp-field>
        <field-name>fromDate</field-name>
      </cmp-field>
      <cmp-field>
        <field-name>thruDate</field-name>
      </cmp-field>
      <cmp-field>
        <field-name>partyId</field-name>
      </cmp-field>
      <cmp-field>
        <field-name>userId</field-name>
      </cmp-field>
      <cmp-field>
        <field-name>password</field-name>
      </cmp-field>

      <resource-ref>
        <res-ref-name>jdbc/MainDataSource</res-ref-name>
        <res-type>javax.sql.DataSource</res-type>
        <res-auth>Container</res-auth>
      </resource-ref>
    </entity>
    <entity>
      <ejb-name>SecurityGroup</ejb-name>
      <home>org.ofbiz.commonapp.security.securitygroup.SecurityGroupHome</home>
      <remote>org.ofbiz.commonapp.security.securitygroup.SecurityGroup</remote>
      <ejb-class>org.ofbiz.commonapp.security.securitygroup.SecurityGroupBean</ejb-class>
      <persistence-type>Container</persistence-type>
      <prim-key-class>java.lang.String</prim-key-class>
      <reentrant>False</reentrant>

      <cmp-field>
        <field-name>groupId</field-name>
      </cmp-field>
      <cmp-field>
        <field-name>description</field-name>
      </cmp-field>

      <primkey-field>groupId</primkey-field>
      <resource-ref>
        <res-ref-name>jdbc/MainDataSource</res-ref-name>
        <res-type>javax.sql.DataSource</res-type>
        <res-auth>Container</res-auth>
      </resource-ref>
    </entity>
    <entity>
      <ejb-name>SecurityPermission</ejb-name>
      <home>org.ofbiz.commonapp.security.securitygroup.SecurityPermissionHome</home>
      <remote>org.ofbiz.commonapp.security.securitygroup.SecurityPermission</remote>
      <ejb-class>org.ofbiz.commonapp.security.securitygroup.SecurityPermissionBean</ejb-class>
      <persistence-type>Container</persistence-type>
      <prim-key-class>java.lang.String</prim-key-class>
      <reentrant>False</reentrant>

      <cmp-field>
        <field-name>permissionId</field-name>
      </cmp-field>
      <cmp-field>
        <field-name>description</field-name>
      </cmp-field>

      <primkey-field>permissionId</primkey-field>
      <resource-ref>
        <res-ref-name>jdbc/MainDataSource</res-ref-name>
        <res-type>javax.sql.DataSource</res-type>
        <res-auth>Container</res-auth>
      </resource-ref>
    </entity>
    <entity>
      <ejb-name>SecurityGroupPermission</ejb-name>
      <home>org.ofbiz.commonapp.security.securitygroup.SecurityGroupPermissionHome</home>
      <remote>org.ofbiz.commonapp.security.securitygroup.SecurityGroupPermission</remote>
      <ejb-class>org.ofbiz.commonapp.security.securitygroup.SecurityGroupPermissionBean</ejb-class>
      <persistence-type>Container</persistence-type>
      <prim-key-class>org.ofbiz.commonapp.security.securitygroup.SecurityGroupPermissionPK</prim-key-class>
      <reentrant>False</reentrant>

      <cmp-field>
        <field-name>groupId</field-name>
      </cmp-field>
      <cmp-field>
        <field-name>permissionId</field-name>
      </cmp-field>

      <resource-ref>
        <res-ref-name>jdbc/MainDataSource</res-ref-name>
        <res-type>javax.sql.DataSource</res-type>
        <res-auth>Container</res-auth>
      </resource-ref>
    </entity>
    <entity>
      <ejb-name>UserLoginSecurityGroup</ejb-name>
      <home>org.ofbiz.commonapp.security.securitygroup.UserLoginSecurityGroupHome</home>
      <remote>org.ofbiz.commonapp.security.securitygroup.UserLoginSecurityGroup</remote>
      <ejb-class>org.ofbiz.commonapp.security.securitygroup.UserLoginSecurityGroupBean</ejb-class>
      <persistence-type>Container</persistence-type>
      <prim-key-class>org.ofbiz.commonapp.security.securitygroup.UserLoginSecurityGroupPK</prim-key-class>
      <reentrant>False</reentrant>

      <cmp-field>
        <field-name>userLoginId</field-name>
      </cmp-field>
      <cmp-field>
        <field-name>groupId</field-name>
      </cmp-field>

      <resource-ref>
        <res-ref-name>jdbc/MainDataSource</res-ref-name>
        <res-type>javax.sql.DataSource</res-type>
        <res-auth>Container</res-auth>
      </resource-ref>
    </entity>  
  </enterprise-beans>
  <assembly-descriptor>
    <container-transaction>
      <method>
        <ejb-name>UserLogin</ejb-name>
        <method-name>*</method-name>
      </method>
      <trans-attribute>Required</trans-attribute>
    </container-transaction>
    <container-transaction>
      <method>
        <ejb-name>LoginAccountHistory</ejb-name>
        <method-name>*</method-name>
      </method>
      <trans-attribute>Required</trans-attribute>
    </container-transaction>
    <container-transaction>
      <method>
        <ejb-name>SecurityGroup</ejb-name>
        <method-name>*</method-name>
      </method>
      <trans-attribute>Required</trans-attribute>
    </container-transaction>
    <container-transaction>
      <method>
        <ejb-name>SecurityPermission</ejb-name>
        <method-name>*</method-name>
      </method>
      <trans-attribute>Required</trans-attribute>
    </container-transaction>
    <container-transaction>
      <method>
        <ejb-name>SecurityGroupPermission</ejb-name>
        <method-name>*</method-name>
      </method>
      <trans-attribute>Required</trans-attribute>
    </container-transaction>
    <container-transaction>
      <method>
        <ejb-name>UserLoginSecurityGroup</ejb-name>
        <method-name>*</method-name>
      </method>
      <trans-attribute>Required</trans-attribute>
    </container-transaction>
  </assembly-descriptor>
</ejb-jar>
