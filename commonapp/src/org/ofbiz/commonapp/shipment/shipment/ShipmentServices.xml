<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE simple-methods PUBLIC "-//OFBiz//DTD Simple Methods//EN" "http://www.ofbiz.org/dtds/simple-methods.dtd">

<!--
 *  Copyright (c) 2003 The Open For Business Project - www.ofbiz.org
 *
 *  Permission is hereby granted, free of charge, to any person obtaining a
 *  copy of this software and associated documentation files (the "Software"),
 *  to deal in the Software without restriction, including without limitation
 *  the rights to use, copy, modify, merge, publish, distribute, sublicense,
 *  and/or sell copies of the Software, and to permit persons to whom the
 *  Software is furnished to do so, subject to the following conditions:
 *
 *  The above copyright notice and this permission notice shall be included
 *  in all copies or substantial portions of the Software.
 *
 *  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS
 *  OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 *  MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.
 *  IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY
 *  CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT
 *  OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR
 *  THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 *
 * @author     David E. Jones (jonesde@ofbiz.org)
 * @author     Andy Zeneski (jaz@ofbiz.org)
 * @version    $Revision$
 * @since      2.2
-->
<simple-methods>
    <!-- Shipment services -->
    <simple-method method-name="createShipment" short-description="Create Shipment">
        <check-permission permission="FACILITY" action="_CREATE">
            <fail-message message="Security Error: to run createShipment you must have the FACILITY_CREATE or FACILITY_ADMIN permission"/>
        </check-permission>
        <check-errors/>

        <make-value value-name="newEntity" entity-name="Shipment"/>
        <set-nonpk-fields map-name="parameters" value-name="newEntity"/>
        
        <sequenced-id-to-env sequence-name="Shipment" env-name="sequencedId"/>
        <to-string field-name="sequencedId"/>
        <env-to-field env-name="sequencedId" field-name="shipmentId" map-name="newEntity"/>
        <field-to-result field-name="sequencedId" result-name="shipmentId"/>
        
        <create-value value-name="newEntity"/>
        
        <if-not-empty field-name="statusId" map-name="newEntity">
            <make-value entity-name="ShipmentStatus" value-name="newStatusValue"/>
            <field-to-field field-name="statusId" map-name="newEntity" to-map-name="newStatusValue"/>
            <field-to-field field-name="shipmentId" map-name="newEntity" to-map-name="newStatusValue"/>
            <now-timestamp-to-env env-name="newStatusValue.statusDate"/>
            <create-value value-name="newStatusValue"/>
        </if-not-empty>
    </simple-method>
    <simple-method method-name="updateShipment" short-description="Update Shipment">
        <check-permission permission="FACILITY" action="_UPDATE">
            <fail-message message="Security Error: to run updateShipment you must have the FACILITY_UPDATE or FACILITY_ADMIN permission"/>
        </check-permission>
        <check-errors/>

        <make-value value-name="lookupPKMap" entity-name="Shipment"/>
        <set-pk-fields map-name="parameters" value-name="lookupPKMap"/>
        <find-by-primary-key entity-name="Shipment" map-name="lookupPKMap" value-name="lookedUpValue"/>
        
        <if-not-empty field-name="parameters.statusId">
			<if-compare-field field-name="parameters.statusId" operator="not-equals" to-field-name="lookedUpValue.statusId">
				<make-value entity-name="ShipmentStatus" value-name="newStatusValue"/>
				<field-to-field field-name="statusId" map-name="parameters" to-map-name="newStatusValue"/>
				<field-to-field field-name="shipmentId" map-name="parameters" to-map-name="newStatusValue"/>
				<now-timestamp-to-env env-name="newStatusValue.statusDate"/>
				<create-value value-name="newStatusValue"/>
			</if-compare-field>
        </if-not-empty>
        
        <set-nonpk-fields map-name="parameters" value-name="lookedUpValue"/>
        <store-value value-name="lookedUpValue"/>
    </simple-method>
    <simple-method method-name="deleteShipment" short-description="Delete Shipment">
        <check-permission permission="FACILITY" action="_DELETE">
            <fail-message message="Security Error: to run deleteShipment you must have the FACILITY_DELETE or FACILITY_ADMIN permission"/>
        </check-permission>
        <check-errors/>

        <make-value value-name="lookupPKMap" entity-name="Shipment"/>
        <set-pk-fields map-name="parameters" value-name="lookupPKMap"/>
        <find-by-primary-key entity-name="Shipment" map-name="lookupPKMap" value-name="lookedUpValue"/>
        <remove-value value-name="lookedUpValue"/>
    </simple-method>
    <simple-method method-name="issueOrderItemInventoryResToShipment" short-description="Issue OrderItemInventoryRes to Shipment">
        <check-permission permission="FACILITY" action="_CREATE">
            <fail-message message="Security Error: to run addOrderItemInventoryResToShipment you must have the FACILITY_CREATE or FACILITY_ADMIN permission"/>
        </check-permission>
        <check-errors/>

        <!-- get shipment -->
        <make-value entity-name="Shipment" value-name="shipmentLookupPk"/>
        <set-pk-fields value-name="shipmentLookupPk" map-name="parameters"/>
        <find-by-primary-key entity-name="Shipment" map-name="shipmentLookupPk" value-name="shipment"/>
        <!-- get orderItemInventoryRes -->
        <make-value entity-name="OrderItemInventoryRes" value-name="orderItemInventoryResLookupPk"/>
        <set-pk-fields value-name="orderItemInventoryResLookupPk" map-name="parameters"/>
        <find-by-primary-key entity-name="OrderItemInventoryRes" map-name="orderItemInventoryResLookupPk" value-name="orderItemInventoryRes"/>
        <!-- get orderItem -->
        <make-value entity-name="OrderItem" value-name="orderItemLookupPk"/>
        <set-pk-fields value-name="orderItemLookupPk" map-name="parameters"/>
        <find-by-primary-key entity-name="OrderItem" map-name="orderItemLookupPk" value-name="orderItem"/>
        
        <!-- make sure OrderItemInventoryRes is not in the OIIR_CANCELLED status -->
        <if-compare value="OIIR_CANCELLED" operator="equals" field-name="statusId" map-name="orderItemInventoryRes">
            <string-to-list string="Not issuing Order Item Inventory Reservation to shipment [${parameters.shipmentId}] because the status is [${orderItemInventoryRes.statusId}] for order [${orderItemInventoryRes.orderId}] order item [${orderItemInventoryRes.orderItemSeqId}] inventoryItem [${orderItemInventoryRes.inventoryItemId}]" list-name="error_list"/>
        </if-compare>
        <!-- make sure specified quantity is not greater than reserved quantity left to be issued, ie orderItemInventoryRes.quantity - (total of existing itemIssuance.quantity) -->
        <get-related list-name="currentItemIssuances" relation-name="ItemIssuance" value-name="orderItemInventoryRes"/>
        <calculate field-name="totalQuantityIssued"><number value="0"/></calculate>
        <iterate entry-name="currentItemIssuance" list-name="currentItemIssuances">
            <calculate field-name="totalQuantityIssued">
                <calcop operator="add" field-name="totalQuantityIssued">
                    <calcop operator="get" field-name="quantity" map-name="currentItemIssuance"/>
                </calcop>
            </calculate>
        </iterate>
        <calculate field-name="quantityLeftToIssue">
            <calcop operator="subtract">
                <calcop operator="get" field-name="quantity" map-name="orderItemInventoryRes"/>
                <calcop operator="get" field-name="totalQuantityIssued"/>
            </calcop>
        </calculate>
        <if-compare-field field-name="parameters.quantity" operator="greater" to-field-name="quantityLeftToIssue" type="Double">
            <string-to-list string="Not issuing Order Item Inventory Reservation to shipment [${parameters.shipmentId}] because the quantity to issue [${parameters.quantity}] is greater than the quantity left to issue [${quantityLeftToIssue}] for order [${orderItemInventoryRes.orderId}] order item [${orderItemInventoryRes.orderItemSeqId}] inventoryItem [${orderItemInventoryRes.inventoryItemId}]" list-name="error_list"/>
        </if-compare-field>
        <check-errors error-list-name="error_list"/>
        
        <!-- try to find an existing shipmentItem and attach to it, if none found create a new shipmentItem -->
        <field-to-field field-name="productId" map-name="orderItem" to-map-name="shipmentItemLookup"/>
        <field-to-field field-name="shipmentId" map-name="parameters" to-map-name="shipmentItemLookup"/>
        <string-to-list string="shipmentItemSeqId" list-name="shipmentItemOrder"/>
        <find-by-and entity-name="ShipmentItem" list-name="shipmentItems" map-name="shipmentItemLookup" order-by-list-name="shipmentItemOrder"/>
        <first-from-list entry-name="shipmentItem" list-name="shipmentItems"/>
        
        <if-empty field-name="shipmentItem">
            <field-to-field field-name="productId" map-name="orderItem" to-map-name="shipmentItemCreate"/>
            <field-to-field field-name="shipmentId" map-name="parameters" to-map-name="shipmentItemCreate"/>
            <field-to-field field-name="quantity" map-name="parameters" to-map-name="shipmentItemCreate"/>
            <call-service service-name="createShipmentItem" in-map-name="shipmentItemCreate">
                <result-to-field result-name="shipmentItemSeqId" map-name="shipmentItemLookupPk"/>
            </call-service>
            <field-to-field field-name="shipmentId" map-name="parameters" to-map-name="shipmentItemLookupPk"/>
            <find-by-primary-key entity-name="ShipmentItem" map-name="shipmentItemLookupPk" value-name="shipmentItem"/>
        <else>
            <calculate field-name="quantity" map-name="shipmentItem">
                <calcop operator="add" field-name="quantity" map-name="shipmentItem">
                    <calcop operator="get" field-name="quantity" map-name="parameters"/>
                </calcop>
            </calculate>
            <store-value value-name="shipmentItem"/>
        </else>
        </if-empty>
        <field-to-result field-name="shipmentItemSeqId" map-name="shipmentItem" result-name="shipmentItemSeqId"/>
        
        <!-- create the ItemIssuance -->
        <field-to-field field-name="quantity" map-name="parameters" to-map-name="itemIssuanceCreate"/>
        <field-to-field field-name="shipmentId" map-name="shipmentItem" to-map-name="itemIssuanceCreate"/>
        <field-to-field field-name="shipmentItemSeqId" map-name="shipmentItem" to-map-name="itemIssuanceCreate"/>
        <field-to-field field-name="orderId" map-name="orderItemInventoryRes" to-map-name="itemIssuanceCreate"/>
        <field-to-field field-name="orderItemSeqId" map-name="orderItemInventoryRes" to-map-name="itemIssuanceCreate"/>
        <field-to-field field-name="inventoryItemId" map-name="orderItemInventoryRes" to-map-name="itemIssuanceCreate"/>
        <call-service service-name="createItemIssuance" in-map-name="itemIssuanceCreate">
            <result-to-result result-name="itemIssuanceId"/>
        </call-service>
        
        <!-- TODO: Add ItemIssuanceRole for party that issues this... -->
        
        <!-- TODO: If we have not issued the full reservation, mark it as picked -->
        
        <!-- TODO: Decrement InventoryItem quantityOnHand -->
        
    </simple-method>
    
    <!-- ShipmentItem services -->
    <simple-method method-name="createShipmentItem" short-description="Create ShipmentItem">
        <check-permission permission="FACILITY" action="_CREATE">
            <fail-message message="Security Error: to run createShipmentItem you must have the FACILITY_CREATE or FACILITY_ADMIN permission"/>
        </check-permission>
        <check-errors/>

        <make-value value-name="newEntity" entity-name="ShipmentItem"/>
        <set-pk-fields map-name="parameters" value-name="newEntity"/>
        <set-nonpk-fields map-name="parameters" value-name="newEntity"/>

        <!-- if no shipmentItemSeqId, generate one based on existing items, ie one greater than the current higher number -->
        <make-next-seq-id value-name="newEntity" seq-field-name="shipmentItemSeqId"/>
        <field-to-result field-name="shipmentItemSeqId" map-name="newEntity" result-name="shipmentItemSeqId"/>
        
        <create-value value-name="newEntity"/>
    </simple-method>
    <simple-method method-name="updateShipmentItem" short-description="Update ShipmentItem">
        <check-permission permission="FACILITY" action="_UPDATE">
            <fail-message message="Security Error: to run updateShipmentItem you must have the FACILITY_UPDATE or FACILITY_ADMIN permission"/>
        </check-permission>
        <check-errors/>

        <make-value value-name="lookupPKMap" entity-name="ShipmentItem"/>
        <set-pk-fields map-name="parameters" value-name="lookupPKMap"/>
        <find-by-primary-key entity-name="ShipmentItem" map-name="lookupPKMap" value-name="lookedUpValue"/>
        <set-nonpk-fields map-name="parameters" value-name="lookedUpValue"/>
        <store-value value-name="lookedUpValue"/>
    </simple-method>
    <simple-method method-name="deleteShipmentItem" short-description="Delete ShipmentItem">
        <check-permission permission="FACILITY" action="_DELETE">
            <fail-message message="Security Error: to run deleteShipmentItem you must have the FACILITY_DELETE or FACILITY_ADMIN permission"/>
        </check-permission>
        <check-errors/>

        <make-value value-name="lookupPKMap" entity-name="ShipmentItem"/>
        <set-pk-fields map-name="parameters" value-name="lookupPKMap"/>
        <find-by-primary-key entity-name="ShipmentItem" map-name="lookupPKMap" value-name="lookedUpValue"/>
        <remove-value value-name="lookedUpValue"/>
    </simple-method>

    <!-- ShipmentPackage services -->
    <simple-method method-name="createShipmentPackage" short-description="Create ShipmentPackage">
        <check-permission permission="FACILITY" action="_CREATE">
            <fail-message message="Security Error: to run createShipmentPackage you must have the FACILITY_CREATE or FACILITY_ADMIN permission"/>
        </check-permission>
        <check-errors/>

        <make-value value-name="newEntity" entity-name="ShipmentPackage"/>
        <set-pk-fields map-name="parameters" value-name="newEntity"/>
        <set-nonpk-fields map-name="parameters" value-name="newEntity"/>

		<if-compare value="New" operator="equals" field-name="shipmentPackageSeqId" map-name="newEntity">
			<clear-field field-name="shipmentPackageSeqId" map-name="newEntity"/>
		</if-compare>

        <!-- if no shipmentPackageSeqId, generate one based on existing items, ie one greater than the current higher number -->
        <make-next-seq-id value-name="newEntity" seq-field-name="shipmentPackageSeqId"/>
        <field-to-result field-name="shipmentPackageSeqId" map-name="newEntity" result-name="shipmentPackageSeqId"/>
        
        <now-timestamp-to-env env-name="newEntity.dateCreated"/>
        
        <create-value value-name="newEntity"/>
    </simple-method>
    <simple-method method-name="updateShipmentPackage" short-description="Update ShipmentPackage">
        <check-permission permission="FACILITY" action="_UPDATE">
            <fail-message message="Security Error: to run updateShipmentPackage you must have the FACILITY_UPDATE or FACILITY_ADMIN permission"/>
        </check-permission>
        <check-errors/>

        <make-value value-name="lookupPKMap" entity-name="ShipmentPackage"/>
        <set-pk-fields map-name="parameters" value-name="lookupPKMap"/>
        <find-by-primary-key entity-name="ShipmentPackage" map-name="lookupPKMap" value-name="lookedUpValue"/>
        <set-nonpk-fields map-name="parameters" value-name="lookedUpValue"/>
        <store-value value-name="lookedUpValue"/>
    </simple-method>
    <simple-method method-name="deleteShipmentPackage" short-description="Delete ShipmentPackage">
        <check-permission permission="FACILITY" action="_DELETE">
            <fail-message message="Security Error: to run deleteShipmentPackage you must have the FACILITY_DELETE or FACILITY_ADMIN permission"/>
        </check-permission>
        <check-errors/>

        <make-value value-name="lookupPKMap" entity-name="ShipmentPackage"/>
        <set-pk-fields map-name="parameters" value-name="lookupPKMap"/>
        <find-by-primary-key entity-name="ShipmentPackage" map-name="lookupPKMap" value-name="lookedUpValue"/>
        <remove-value value-name="lookedUpValue"/>
    </simple-method>

    <!-- ShipmentPackageContent services -->
    <simple-method method-name="createShipmentPackageContent" short-description="Create ShipmentPackageContent">
        <check-permission permission="FACILITY" action="_CREATE">
            <fail-message message="Security Error: to run createShipmentPackageContent you must have the FACILITY_CREATE or FACILITY_ADMIN permission"/>
        </check-permission>
        <check-errors/>

        <make-value value-name="newEntity" entity-name="ShipmentPackageContent"/>
        <set-pk-fields map-name="parameters" value-name="newEntity"/>
        <set-nonpk-fields map-name="parameters" value-name="newEntity"/>
        
        <create-value value-name="newEntity"/>
    </simple-method>
    <simple-method method-name="updateShipmentPackageContent" short-description="Update ShipmentPackageContent">
        <check-permission permission="FACILITY" action="_UPDATE">
            <fail-message message="Security Error: to run updateShipmentPackageContent you must have the FACILITY_UPDATE or FACILITY_ADMIN permission"/>
        </check-permission>
        <check-errors/>

        <make-value value-name="lookupPKMap" entity-name="ShipmentPackageContent"/>
        <set-pk-fields map-name="parameters" value-name="lookupPKMap"/>
        <find-by-primary-key entity-name="ShipmentPackageContent" map-name="lookupPKMap" value-name="lookedUpValue"/>
        <set-nonpk-fields map-name="parameters" value-name="lookedUpValue"/>
        <store-value value-name="lookedUpValue"/>
    </simple-method>
    <simple-method method-name="deleteShipmentPackageContent" short-description="Delete ShipmentPackageContent">
        <check-permission permission="FACILITY" action="_DELETE">
            <fail-message message="Security Error: to run deleteShipmentPackageContent you must have the FACILITY_DELETE or FACILITY_ADMIN permission"/>
        </check-permission>
        <check-errors/>

        <make-value value-name="lookupPKMap" entity-name="ShipmentPackageContent"/>
        <set-pk-fields map-name="parameters" value-name="lookupPKMap"/>
        <find-by-primary-key entity-name="ShipmentPackageContent" map-name="lookupPKMap" value-name="lookedUpValue"/>
        <remove-value value-name="lookedUpValue"/>
    </simple-method>

    <!-- ShipmentPackageRouteSeg services -->
    <simple-method method-name="createShipmentPackageRouteSeg" short-description="Create ShipmentPackageRouteSeg">
        <check-permission permission="FACILITY" action="_CREATE">
            <fail-message message="Security Error: to run createShipmentPackageRouteSeg you must have the FACILITY_CREATE or FACILITY_ADMIN permission"/>
        </check-permission>
        <check-errors/>

        <make-value value-name="newEntity" entity-name="ShipmentPackageRouteSeg"/>
        <set-pk-fields map-name="parameters" value-name="newEntity"/>
        <set-nonpk-fields map-name="parameters" value-name="newEntity"/>
        
        <create-value value-name="newEntity"/>
    </simple-method>
    <simple-method method-name="updateShipmentPackageRouteSeg" short-description="Update ShipmentPackageRouteSeg">
        <check-permission permission="FACILITY" action="_UPDATE">
            <fail-message message="Security Error: to run updateShipmentPackageRouteSeg you must have the FACILITY_UPDATE or FACILITY_ADMIN permission"/>
        </check-permission>
        <check-errors/>

        <make-value value-name="lookupPKMap" entity-name="ShipmentPackageRouteSeg"/>
        <set-pk-fields map-name="parameters" value-name="lookupPKMap"/>
        <find-by-primary-key entity-name="ShipmentPackageRouteSeg" map-name="lookupPKMap" value-name="lookedUpValue"/>
        <set-nonpk-fields map-name="parameters" value-name="lookedUpValue"/>
        <store-value value-name="lookedUpValue"/>
    </simple-method>
    <simple-method method-name="deleteShipmentPackageRouteSeg" short-description="Delete ShipmentPackageRouteSeg">
        <check-permission permission="FACILITY" action="_DELETE">
            <fail-message message="Security Error: to run deleteShipmentPackageRouteSeg you must have the FACILITY_DELETE or FACILITY_ADMIN permission"/>
        </check-permission>
        <check-errors/>

        <make-value value-name="lookupPKMap" entity-name="ShipmentPackageRouteSeg"/>
        <set-pk-fields map-name="parameters" value-name="lookupPKMap"/>
        <find-by-primary-key entity-name="ShipmentPackageRouteSeg" map-name="lookupPKMap" value-name="lookedUpValue"/>
        <remove-value value-name="lookedUpValue"/>
    </simple-method>

    <!-- ShipmentContactMech services -->
    <simple-method method-name="createShipmentContactMech" short-description="Create ShipmentContactMech">
        <check-permission permission="FACILITY" action="_CREATE">
            <fail-message message="Security Error: to run createShipmentContactMech you must have the FACILITY_CREATE or FACILITY_ADMIN permission"/>
        </check-permission>
        <check-errors/>

        <make-value value-name="newEntity" entity-name="ShipmentContactMech"/>
        <set-pk-fields map-name="parameters" value-name="newEntity"/>
        <set-nonpk-fields map-name="parameters" value-name="newEntity"/>
        
        <create-value value-name="newEntity"/>
    </simple-method>
    <simple-method method-name="updateShipmentContactMech" short-description="Update ShipmentContactMech">
        <check-permission permission="FACILITY" action="_UPDATE">
            <fail-message message="Security Error: to run updateShipmentContactMech you must have the FACILITY_UPDATE or FACILITY_ADMIN permission"/>
        </check-permission>
        <check-errors/>

        <make-value value-name="lookupPKMap" entity-name="ShipmentContactMech"/>
        <set-pk-fields map-name="parameters" value-name="lookupPKMap"/>
        <find-by-primary-key entity-name="ShipmentContactMech" map-name="lookupPKMap" value-name="lookedUpValue"/>
        <set-nonpk-fields map-name="parameters" value-name="lookedUpValue"/>
        <store-value value-name="lookedUpValue"/>
    </simple-method>
    <simple-method method-name="deleteShipmentContactMech" short-description="Delete ShipmentContactMech">
        <check-permission permission="FACILITY" action="_DELETE">
            <fail-message message="Security Error: to run deleteShipmentContactMech you must have the FACILITY_DELETE or FACILITY_ADMIN permission"/>
        </check-permission>
        <check-errors/>

        <make-value value-name="lookupPKMap" entity-name="ShipmentContactMech"/>
        <set-pk-fields map-name="parameters" value-name="lookupPKMap"/>
        <find-by-primary-key entity-name="ShipmentContactMech" map-name="lookupPKMap" value-name="lookedUpValue"/>
        <remove-value value-name="lookedUpValue"/>
    </simple-method>

    <!-- ShipmentRouteSegment services -->
    <simple-method method-name="createShipmentRouteSegment" short-description="Create ShipmentRouteSegment">
        <check-permission permission="FACILITY" action="_CREATE">
            <fail-message message="Security Error: to run createShipmentRouteSegment you must have the FACILITY_CREATE or FACILITY_ADMIN permission"/>
        </check-permission>
        <check-errors/>

        <make-value value-name="newEntity" entity-name="ShipmentRouteSegment"/>
        <set-pk-fields map-name="parameters" value-name="newEntity"/>
        <set-nonpk-fields map-name="parameters" value-name="newEntity"/>

        <!-- if no shipmentRouteSegmentSeqId, generate one based on existing items, ie one greater than the current higher number -->
        <make-next-seq-id value-name="newEntity" seq-field-name="shipmentRouteSegmentId"/>
        <field-to-result field-name="shipmentRouteSegmentId" map-name="newEntity" result-name="shipmentRouteSegmentId"/>
        
        <create-value value-name="newEntity"/>
    </simple-method>
    <simple-method method-name="updateShipmentRouteSegment" short-description="Update ShipmentRouteSegment">
        <check-permission permission="FACILITY" action="_UPDATE">
            <fail-message message="Security Error: to run updateShipmentRouteSegment you must have the FACILITY_UPDATE or FACILITY_ADMIN permission"/>
        </check-permission>
        <check-errors/>

        <make-value value-name="lookupPKMap" entity-name="ShipmentRouteSegment"/>
        <set-pk-fields map-name="parameters" value-name="lookupPKMap"/>
        <find-by-primary-key entity-name="ShipmentRouteSegment" map-name="lookupPKMap" value-name="lookedUpValue"/>
        <set-nonpk-fields map-name="parameters" value-name="lookedUpValue"/>
        <store-value value-name="lookedUpValue"/>
    </simple-method>
    <simple-method method-name="deleteShipmentRouteSegment" short-description="Delete ShipmentRouteSegment">
        <check-permission permission="FACILITY" action="_DELETE">
            <fail-message message="Security Error: to run deleteShipmentRouteSegment you must have the FACILITY_DELETE or FACILITY_ADMIN permission"/>
        </check-permission>
        <check-errors/>

        <make-value value-name="lookupPKMap" entity-name="ShipmentRouteSegment"/>
        <set-pk-fields map-name="parameters" value-name="lookupPKMap"/>
        <find-by-primary-key entity-name="ShipmentRouteSegment" map-name="lookupPKMap" value-name="lookedUpValue"/>
        <remove-value value-name="lookedUpValue"/>
    </simple-method>
</simple-methods>

    <!-- FooBar services -->
<!--
    <simple-method method-name="createFooBar" short-description="Create FooBar">
        <check-permission permission="FACILITY" action="_CREATE">
        	<fail-message message="Security Error: to run createFooBar you must have the FACILITY_CREATE or FACILITY_ADMIN permission"/>
        </check-permission>
        <check-errors/>

        <make-value value-name="newEntity" entity-name="FooBar"/>
        <set-pk-fields map-name="parameters" value-name="newEntity"/>
        <set-nonpk-fields map-name="parameters" value-name="newEntity"/>
        
        <create-value value-name="newEntity"/>
    </simple-method>
    <simple-method method-name="updateFooBar" short-description="Update FooBar">
        <check-permission permission="FACILITY" action="_UPDATE">
        	<fail-message message="Security Error: to run updateFooBar you must have the FACILITY_UPDATE or FACILITY_ADMIN permission"/>
        </check-permission>
        <check-errors/>

        <make-value value-name="lookupPKMap" entity-name="FooBar"/>
        <set-pk-fields map-name="parameters" value-name="lookupPKMap"/>
        <find-by-primary-key entity-name="FooBar" map-name="lookupPKMap" value-name="lookedUpValue"/>
        <set-nonpk-fields map-name="parameters" value-name="lookedUpValue"/>
        <store-value value-name="lookedUpValue"/>
    </simple-method>
    <simple-method method-name="deleteFooBar" short-description="Delete FooBar">
        <check-permission permission="FACILITY" action="_DELETE">
        	<fail-message message="Security Error: to run deleteFooBar you must have the FACILITY_DELETE or FACILITY_ADMIN permission"/>
        </check-permission>
        <check-errors/>

        <make-value value-name="lookupPKMap" entity-name="FooBar"/>
        <set-pk-fields map-name="parameters" value-name="lookupPKMap"/>
        <find-by-primary-key entity-name="FooBar" map-name="lookupPKMap" value-name="lookedUpValue"/>
        <remove-value value-name="lookedUpValue"/>
    </simple-method>
-->
