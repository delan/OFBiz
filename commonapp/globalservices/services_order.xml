<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE services PUBLIC "-//OFBiz//DTD Services Config//EN" "http://www.ofbiz.org/dtds/services.dtd">

<services>
    <description>Common Application Components Order Services</description>
    <vendor>OFBiz</vendor>
    <version>1.0</version>

    <!-- Order processing services -->
    <service name="processOrder" engine="workflow" location="org.ofbiz.commonapp.order.order" invoke="ProcessOrder">
        <description>Service for testing the workflow engine</description>
        <attribute name="orderId" type="String" mode="IN" optional="false"/>         
        <attribute name="orderStatusId" type="String" mode="INOUT" optional="false"/>
    </service>
    
    <service name="sendProcessNotification" engine="java"
    		location="org.ofbiz.commonapp.order.order.OrderServices" invoke="sendNotification">
    	<description>Limit Service for order processing workflow; sends activitiy notifications</description>
    	<attribute name="workEffortId" type="String" mode="IN"/>
    	<attribute name="adminEmailList" type="String" mode="IN"/>
    	<attribute name="assignedPartyId" type="String" mode="IN" optional="true"/>
    	<attribute name="assignedRoleTypeId" type="String" mode="IN" optional="true"/>    	
    </service>

    <service name="storeOrder" engine="java" validate="true" auth="true"
            location="org.ofbiz.commonapp.order.order.OrderServices" invoke="createOrder">
        <description>Creates order entities</description>
        <attribute name="partyId" type="String" mode="IN"/>
        <attribute name="visitId" type="String" mode="IN" optional="true"/>
        <attribute name="affiliateId" type="String" mode="IN" optional="true"/>
        <attribute name="prodCatalogId" type="String" mode="IN" optional="false"/>
        <attribute name="webSiteId" type="String" mode="IN" optional="true"/>
        <attribute name="distributorId" type="String" mode="IN" optional="true"/>
        <attribute name="orderItems" type="java.util.List" mode="IN"/>
        <attribute name="orderAdjustments" type="java.util.List" mode="IN"/>
        <attribute name="billingAccountId" type="String" mode="IN"/>
        <attribute name="shippingAmount" type="Double" mode="IN" optional="true"/>
        <attribute name="grandTotal" type="Double" mode="IN" optional="true"/>
        <attribute name="taxAmount" type="Double" mode="IN" optional="true"/>
        <attribute name="orderShipmentPreferences" type="java.util.List" mode="IN" optional="true"/>
        <attribute name="orderPaymentPreferences" type="java.util.List" mode="IN" optional="true"/>
        <attribute name="orderContactMechs" type="java.util.List" mode="IN" optional="true"/>
        <attribute name="orderItemContactMechs" type="java.util.List" mode="IN" optional="true"/>
        <attribute name="orderItemPriceInfos" type="java.util.List" mode="IN" optional="true"/>
        <attribute name="trackingCodeOrders" type="java.util.List" mode="IN" optional="true"/>
        <attribute name="orderId" type="String" mode="OUT"/>
    </service>

	<service name="createOrderAdjustment" engine="simple"
			location="org/ofbiz/commonapp/order/order/OrderSimpleMethods.xml" invoke="createOrderAdjustment">
		<description>Creates a new order adjustment record</description>
		<attribute name="orderAdjustmentTypeId" type="String" mode="IN" optional="false"/>
		<attribute name="orderId" type="String" mode="IN" optional="false"/>
		<attribute name="orderItemSeqId" type="String" mode="IN" optional="true"/>
		<attribute name="comments" type="String" mode="IN" optional="true"/>
		<attribute name="description" type="String" mode="IN" optional="true"/>
		<attribute name="amount" type="Double" mode="IN" optional="true"/>
		<attribute name="amountPerQuantity" type="Double" mode="IN" optional="true"/>
		<attribute name="percentage" type="Double" mode="IN" optional="true"/>
		<attribute name="productPromoId" type="String" mode="IN" optional="true"/>
		<attribute name="productPromoRuleId" type="String" mode="IN" optional="true"/>
		<attribute name="productPromoActionSeqId" type="String" mode="IN" optional="true"/>
		<attribute name="productFeatureId" type="String" mode="IN" optional="true"/>
		<attribute name="correspondingProductId" type="String" mode="IN" optional="true"/>
		<attribute name="sourceReferenceId" type="String" mode="IN" optional="true"/>
		<attribute name="includeInTax" type="Boolean" mode="IN" optional="true"/>
		<attribute name="includeInShipping" type="Boolean" mode="IN" optional="true"/>
		<attribute name="orderAdjustmentId" type="String" mode="OUT" optional="false"/>
	</service>
    
    <service name="updateTrackingNumber" engine="java"
            location="org.ofbiz.commonapp.order.order.OrderServices" invoke="updateTrackingNumber">
        <description>Sets the tracking number on a shipment preference</description>
        <attribute name="orderId" type="String" mode="IN" optional="false"/>
        <attribute name="orderItemSeqId" type="String" mode="IN" optional="true"/>
        <attribute name="trackingNumber" type="String" mode="IN" optional="false"/>
    </service>

    <service name="resetGrandTotal" engine="java"
            location="org.ofbiz.commonapp.order.order.OrderServices" invoke="resetGrandTotal">
        <description>Change the status of an existing order</description>
        <attribute name="orderId" type="String" mode="IN"/>
    </service>
        
    <service name="changeOrderStatus" engine="java"
            location="org.ofbiz.commonapp.order.order.OrderServices" invoke="setOrderStatus">
        <description>Change the status of an existing order</description>
        <attribute name="orderId" type="String" mode="IN"/>
        <attribute name="statusId" type="String" mode="IN"/>
        <attribute name="orderStatusId" type="String" mode="OUT" optional="true"/>
    </service>
    
    <service name="changeOrderItemStatus" engine="java"
    		location="org.ofbiz.commonapp.order.order.OrderServices" invoke="setItemStatus">
    	<description>Change the status of an existing order item</description>
    	<attribute name="orderId" type="String" mode="IN" optional="false"/>
    	<attribute name="orderItemSeqId" type="String" mode="IN" optional="true"/>
    	<attribute name="fromStatusId" type="String" mode="IN" optional="true"/>
    	<attribute name="statusId" type="String" mode="IN" optional="false"/>
    </service>
    
    <service name="checkOrderForBackOrders" engine="java"
    		location="org.ofbiz.commonapp.order.order.OrderServices" invoke="checkBackOrderItems">
    	<description>Check the order for items backordered</description>
    	<attribute name="orderId" type="String" mode="IN" optional="false"/>
    	<attribute name="backOrderedItems" type="List" mode="OUT" optional="false"/>
    </service>

    <service name="addOrderRole" engine="java"
            location="org.ofbiz.commonapp.order.order.OrderServices" invoke="addRoleType">
        <description>Adds a RoleType to an order</description>
        <attribute name="removeOld" type="Boolean" mode="IN" optional="true"/>
        <attribute name="orderId" type="String" mode="IN"/>
        <attribute name="partyId" type="String" mode="IN"/>
        <attribute name="roleTypeId" type="String" mode="IN"/>
    </service>

    <service name="removeOrderRole" engine="java"
            location="org.ofbiz.commonapp.order.order.OrderServices" invoke="removeRoleType">
        <description>Removes a RoleType from an order</description>
        <attribute name="orderId" type="String" mode="IN"/>
        <attribute name="partyId" type="String" mode="IN"/>
        <attribute name="roleTypeId" type="String" mode="IN"/>
    </service>

    <service name="createOrderPaymentPreference" engine="java"
            location="org.ofbiz.commonapp.order.order.OrderServices" invoke="createPaymentPreference">
        <description>Creates an order payment preference</description>
        <attribute name="orderId" type="String" mode="IN"/>
        <attribute name="paymentMethodTypeId" type="String" mode="IN"/>
        <attribute name="paymentMethodId" type="String" mode="IN" optional="true"/>
        <attribute name="maxAmount" type="Double" mode="IN" optional="true"/>
        <attribute name="orderPaymentPreferenceId" type="String" mode="OUT"/>
    </service>

    <service name="createOrderNote" engine="java"
            location="org.ofbiz.commonapp.order.order.OrderServices" invoke="createOrderNote" auth="true">
        <description>Create a note item and associate with a order header</description>
        <attribute name="orderId" type="String" mode="IN"/>
        <attribute name="note" type="String" mode="IN"/>
    </service>

    <service name="calcTax" engine="java"
            location="org.ofbiz.commonapp.order.order.OrderServices" invoke="simpleTaxCalc">
        <description>Calc Tax Service</description>
        <attribute name="itemProductList" type="java.util.List" mode="IN"/>
        <attribute name="itemAmountList" type="java.util.List" mode="IN"/>
        <attribute name="itemShippingList" type="java.util.List" mode="IN" optional="true"/>
        <attribute name="orderShippingAmount" type="Double" mode="IN" optional="true"/>
        <attribute name="shippingAddress" type="org.ofbiz.core.entity.GenericValue" mode="IN"/>
        <attribute name="orderAdjustments" type="java.util.List" mode="OUT"/>
        <attribute name="itemAdjustments" type="java.util.List" mode="OUT"/>
    </service>

    <service name="createTaxRate" engine="simple"
            location="org/ofbiz/commonapp/order/order/TaxRateServices.xml" invoke="createTaxRate">
        <description>Create a Tax Rate entry</description>
        <attribute name="stateProvinceGeoId" type="String" mode="IN" optional="false"/>
        <attribute name="taxCategory" type="String" mode="IN" optional="false"/>
        <attribute name="taxShipping" type="String" mode="IN" optional="false"/>
        <attribute name="salesTaxPercentage" type="Double" mode="IN" optional="false"/>
        <attribute name="fromDate" type="Timestamp" mode="IN" optional="true"/>
        <attribute name="thruDate" type="Timestamp" mode="IN" optional="true"/>
    </service>

    <service name="removeTaxRate" engine="simple"
            location="org/ofbiz/commonapp/order/order/TaxRateServices.xml" invoke="removeTaxRate">
        <description>Remove a Tax Rate entry</description>
        <attribute name="stateProvinceGeoId" type="String" mode="IN" optional="false"/>
        <attribute name="taxCategory" type="String" mode="IN" optional="false"/>
        <attribute name="fromDate" type="Timestamp" mode="IN" optional="false"/>
    </service>

    <!-- Customer Request Services -->
    <service name="interfaceCustRequest" engine="interface" location="" invoke="">
        <description>CustRequest Interface</description>
        <attribute name="custRequestTypeId" type="String" mode="IN" optional="false"/>
        <attribute name="custRequestCategoryId" type="String" mode="IN" optional="true"/>
        <attribute name="statusId" type="String" mode="IN" optional="true"/>
        <attribute name="priority" type="Long" mode="IN" optional="true"/>
        <attribute name="custRequestDate" type="Timestamp" mode="IN" optional="true"/>
        <attribute name="responseRequiredDate" type="Timestamp" mode="IN" optional="true"/>
        <attribute name="custRequestName" type="String" mode="IN" optional="false"/>
        <attribute name="description" type="String" mode="IN" optional="true"/>
    </service>
    <service name="createCustRequest" engine="simple"
            location="org/ofbiz/commonapp/order/request/CustRequestServices.xml" invoke="createCustRequest" auth="true">
        <description>Create a custRequest record</description>
        <implements service="interfaceCustRequest"/>
        <attribute name="custRequestId" type="String" mode="INOUT" optional="true"/>
    </service>
    <service name="updateCustRequest" engine="simple"
            location="org/ofbiz/commonapp/order/request/CustRequestServices.xml" invoke="updateCustRequest" auth="true">
        <description>Update a custRequest record</description>
        <implements service="interfaceCustRequest"/>
        <attribute name="custRequestId" type="String" mode="IN" optional="false"/>
        <attribute name="custRequestTypeId" type="String" mode="IN" optional="true"/>
    </service>

    <service name="createCustRequestAttribute" engine="simple"
            location="org/ofbiz/commonapp/order/request/CustRequestServices.xml" invoke="createCustRequestAttribute" auth="true">
        <description>Create CustRequestAttribute record</description>
        <attribute name="custRequestId" type="String" mode="IN" optional="false"/>
        <attribute name="attrName" type="String" mode="IN" optional="false"/>
        <attribute name="attrValue" type="String" mode="IN" optional="false"/>
    </service>

   <service name="updateCustRequestAttribute" engine="simple"
            location="org/ofbiz/commonapp/order/request/CustRequestServices.xml" invoke="updateCustRequestAttribute" auth="true">
        <description>Update CustRequestAttribute record</description>
        <attribute name="custRequestId" type="String" mode="IN" optional="false"/>
        <attribute name="attrName" type="String" mode="IN" optional="false"/>
        <attribute name="attrValue" type="String" mode="IN" optional="false"/>
    </service>

    <service name="interfaceCustRequestItem" engine="interface" location="" invoke="">
        <description>CustRequestItem Interface</description>
        <attribute name="custRequestItemSeqId" type="String" mode="IN" optional="false"/>
        <attribute name="custRequestResolutionId" type="String" mode="IN" optional="true"/>
        <attribute name="statusId" type="String" mode="IN" optional="true"/>
        <attribute name="priority" type="Long" mode="IN" optional="true"/>
        <attribute name="requiredByDate" type="Timestamp" mode="IN" optional="false"/>
        <attribute name="quantity" type="String" mode="IN" optional="true"/>
        <attribute name="maximumAmount" type="String" mode="IN" optional="true"/>
        <attribute name="description" type="String" mode="IN" optional="true"/>
    </service>
    <service name="createCustRequestItem" engine="simple"
            location="org/ofbiz/commonapp/order/request/CustRequestServices.xml" invoke="createCustRequestItem" auth="true">
        <description>Create a CustRequestItem record</description>
        <implements service="interfaceCustRequestItem"/>
        <attribute name="custRequestId" type="String" mode="IN" optional="false"/>
    </service>
    <service name="updateCustRequestItem" engine="simple"
            location="org/ofbiz/commonapp/order/request/CustRequestServices.xml" invoke="updateCustRequestItem" auth="true">
        <description>Update a CustRequestItem record</description>
        <implements service="interfaceCustRequestItem"/>
        <attribute name="custRequestId" type="String" mode="IN" optional="false"/>
    </service>

    <service name="createCustRequestRole" engine="simple"
            location="org/ofbiz/commonapp/order/request/CustRequestServices.xml" invoke="createCustRequestRole" auth="true">
        <description>Create a CustRequestRole record</description>
        <attribute name="custRequestId" type="String" mode="IN" optional="false"/>
        <attribute name="partyId" type="String" mode="IN" optional="false"/>
        <attribute name="roleTypeId" type="String" mode="IN" optional="false"/>
    </service>

    <service name="removeCustRequestRole" engine="simple"
            location="org/ofbiz/commonapp/order/request/CustRequestServices.xml" invoke="removeCustRequestRole" auth="true">
        <description>Remove a CustRequestRole record</description>
        <attribute name="custRequestId" type="String" mode="IN" optional="false"/>
        <attribute name="partyId" type="String" mode="IN" optional="false"/>
        <attribute name="roleTypeId" type="String" mode="IN" optional="false"/>
    </service>

    <service name="createCustRequestItemNote" engine="simple"
            location="org/ofbiz/commonapp/order/request/CustRequestServices.xml" invoke="createCustRequestItemNote" auth="true">
        <description>Create a CustRequestRole record</description>
        <attribute name="custRequestId" type="String" mode="IN" optional="false"/>
        <attribute name="custRequestItemSeqId" type="String" mode="IN" optional="false"/>
        <attribute name="note" type="String" mode="IN" optional="false"/>
    </service>

    <!-- Services for finding Associated CustRequests -->
    <service name="getCustRequestsByRole" engine="simple"
            location="org/ofbiz/commonapp/order/request/CustRequestServices.xml" invoke="getCustRequestsByRole" auth="true">
        <description>Get CustRequests Associated By Role</description>
        <attribute name="roleTypeId" type="String" mode="IN" optional="true"/>
        <attribute name="custRequestAndRoles" type="java.util.List" mode="OUT" optional="false"/>
    </service>
    
  <!-- Requirement Services -->
    <service name="interfaceRequirement" engine="simple"
            location="org/ofbiz/commonapp/order/requirement/RequirementServices.xml" invoke="createRequirement">
        <description>Requirement Interface</description>
        <attribute name="requirementTypeId" type="String" mode="IN" optional="false"/>
        <attribute name="facilityId" type="String" mode="IN" optional="true"/>
        <attribute name="deliverableId" type="String" mode="IN" optional="true"/>
        <attribute name="fixedAssetId" type="String" mode="IN" optional="true"/>
        <attribute name="productId" type="String" mode="IN" optional="true"/>
        <attribute name="description" type="String" mode="IN" optional="false"/>
        <attribute name="requiredByDate" type="String" mode="IN" optional="true"/>
        <attribute name="estimatedBudget" type="String" mode="IN" optional="true"/>
        <attribute name="quantity" type="String" mode="IN" optional="true"/>
        <attribute name="story" type="String" mode="IN" optional="true"/>
        <attribute name="reason" type="String" mode="IN" optional="true"/>
        <attribute name="requirementId" type="String" mode="OUT" optional="false"/>
    </service>
    <service name="createRequirement" engine="simple"
            location="org/ofbiz/commonapp/order/requirement/RequirementServices.xml" invoke="createRequirement">
        <description>Create a new requirement</description>
        <implements service="interfaceRequirement"/>
        <attribute name="requirementId" type="String" mode="OUT" optional="false"/>
    </service>
    <service name="updateRequirement" engine="simple"
            location="org/ofbiz/commonapp/order/requirement/RequirementServices.xml" invoke="updateRequirement">
        <description>Update an existing requirement</description>
        <implements service="interfaceRequirement"/>
        <attribute name="requirementId" type="String" mode="IN" optional="false"/>
    </service>

    <service name="deleteRequirement" engine="simple"
            location="org/ofbiz/commonapp/order/requirement/RequirementServices.xml" invoke="deleteRequirement">
        <description>Delete a requirement</description>
        <attribute name="requirementId" type="String" mode="IN" optional="false"/>
    </service>

    <service name="addRequirementTask" engine="simple"
            location="org/ofbiz/commonapp/order/requirement/RequirementServices.xml" invoke="addTaskToRequirement">
        <description>Associate an existing task w/ a requirement</description>
        <attribute name="requirementId" type="String" mode="IN" optional="false"/>
        <attribute name="workEffortId" type="String" mode="IN" optional="false"/>
        <attribute name="workReqFulfTypeId" type="String" mode="IN" optional="true"/>
    </service>

    <!-- Order View Services -->
    <service name="getOrderInformation" engine="java"
            location="org.ofbiz.commonapp.order.order.OrderServices" invoke="getOrderInformation">
        <description>Get basic order information.</description>
        <attribute name="orderId" type="String" mode="INOUT"/>
        <attribute name="orderHeader" type="org.ofbiz.core.entity.GenericValue" mode="OUT"/>
        <attribute name="shippingAddress" type="org.ofbiz.core.entity.GenericValue" mode="OUT"/>
        <attribute name="billingAddress" type="org.ofbiz.core.entity.GenericValue" mode="OUT" optional="true"/>
        <attribute name="billToPerson" type="org.ofbiz.core.entity.GenericValue" mode="OUT"/>
        <attribute name="orderItems" type="java.util.Collection" mode="OUT"/>
        <attribute name="totalItems" type="Double" mode="OUT"/>
        <attribute name="totalPrice" type="Double" mode="OUT"/>
        <attribute name="affiliateId" type="String" mode="OUT"/>
        <attribute name="distributorId" type="String" mode="OUT"/>
        <attribute name="statusString" type="String" mode="OUT"/>
    </service>
</services>
