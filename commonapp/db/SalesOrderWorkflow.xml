<?xml version="1.0" encoding="UTF-8"?>
<entity-engine-xml>
	
    <!-- Data for Special Order Processing Workflow -->      
    <WorkflowSpecification specificationId="XPDL" currentVersion="0.03"/>
    <WorkflowPackage packageId="org.ofbiz.commonapp.order.order" packageVersion="1.4" packageName="" description="Demo Order Processing Workflow" specificationVersion="0.03" specificationId="XPDL" sourceVendorInfo="OFBiz.org" creationDateTime="2002-12-03 00:00:00.0" author="Andy Zeneski" publicationStatusId="WPS_UNDER_REVISION" graphConformanceEnumId="WGC_FULL_BLOCKED" priorityUomId="P" costUomId="USD" responsibleListId="10003" documentationUrl="None" participantListId="10004"/>
    <WorkflowProcess packageId="org.ofbiz.commonapp.order.order" packageVersion="1.4" processId="ProcessOrder" processVersion="1.4" objectName="Processes incoming orders" objectPriority="5" description="Order Processing Workflow" creationDateTime="2002-12-01 12:00:00.0" author="OFBiz" publicationStatusId="WPS_UNDER_REVISION" timeLimit="12.0" validFromDate="2002-12-01 12:00:00.0" validToDate="2012-12-01 12:00:00.0" responsibleListId="10005" durationUomId="m" duration="3.0" waitingTime="2.0" defaultStartActivityId="receiveOrder" sourceReferenceField="orderId"/>

    <WorkflowParticipant participantId="admin" participantName="Workflow Admin" partyId="admin" description="None" participantTypeId="HUMAN"/>
    <WorkflowParticipant participantId="clerk" participantName="Order Clerk" roleTypeId="ORDER_CLERK" description="First handler of each order" participantTypeId="HUMAN"/>
    <WorkflowParticipant participantId="user" participantName="Dynamic User" partyId="expr:partyId" description="Dynamic user assignment" participantTypeId="RESOURCE"/>
    <WorkflowParticipantList participantListId="10003" participantId="admin" participantIndex="1"/>
    <WorkflowParticipantList participantListId="10004" participantId="admin" participantIndex="1"/>
    <WorkflowParticipantList participantListId="10004" participantId="clerk" participantIndex="2"/>
    <WorkflowParticipantList participantListId="10004" participantId="user" participantIndex="3"/>
    <WorkflowParticipantList participantListId="10005" participantId="admin" participantIndex="1"/>
           
    <WorkflowActivity packageId="org.ofbiz.commonapp.order.order" packageVersion="1.4" processId="ProcessOrder" processVersion="1.4" activityId="approveOrder" objectName="Approve Order" objectPriority="5" description="A clerk accepts and approves/declines the order" timeLimit="12.0" startModeEnumId="WAM_MANUAL" finishModeEnumId="WAM_MANUAL" performerParticipantId="clerk" activityTypeEnumId="WAT_NO" canStart="N" joinTypeEnumId="WJT_XOR" splitTypeEnumId="WST_XOR" acceptAllAssignments="N" completeAllAssignments="N" limitService="sendProcessNotification" limitAfterStart="N" delegateAfterStart="Y" restartOnDelegate="N" inheritPriority="Y"/>
    <WorkflowActivity packageId="org.ofbiz.commonapp.order.order" packageVersion="1.4" processId="ProcessOrder" processVersion="1.4" activityId="approveOrderEvent" objectName="Approve Order Event" objectPriority="1" description="Activity runs after an order is approved" timeLimit="1.0" startModeEnumId="WAM_AUTOMATIC" finishModeEnumId="WAM_AUTOMATIC" performerParticipantId="admin" activityTypeEnumId="WAT_TOOL" canStart="N" joinTypeEnumId="WJT_XOR" splitTypeEnumId="WST_XOR" acceptAllAssignments="N" completeAllAssignments="N" limitAfterStart="Y" delegateAfterStart="Y" restartOnDelegate="N" inheritPriority="N"/>
    <WorkflowActivity packageId="org.ofbiz.commonapp.order.order" packageVersion="1.4" processId="ProcessOrder" processVersion="1.4" activityId="cancelOrder" objectName="Cancel The Order" objectPriority="5" description="Order has been cancelled; cancel the order and abort the workflow" timeLimit="1.0" startModeEnumId="WAM_AUTOMATIC" finishModeEnumId="WAM_AUTOMATIC" performerParticipantId="admin" activityTypeEnumId="WAT_TOOL" canStart="N" joinTypeEnumId="WJT_XOR" splitTypeEnumId="WST_XOR" acceptAllAssignments="N" completeAllAssignments="N" limitAfterStart="Y" delegateAfterStart="Y" restartOnDelegate="N" inheritPriority="N"/>
    <WorkflowActivity packageId="org.ofbiz.commonapp.order.order" packageVersion="1.4" processId="ProcessOrder" processVersion="1.4" activityId="completeOrder" objectName="Complete Order" objectPriority="5" description="A clerk accepts and completes (ships)/cancels the order" timeLimit="12.0" startModeEnumId="WAM_MANUAL" finishModeEnumId="WAM_MANUAL" performerParticipantId="clerk" activityTypeEnumId="WAT_NO" canStart="N" joinTypeEnumId="WJT_XOR" splitTypeEnumId="WST_XOR" acceptAllAssignments="N" completeAllAssignments="N" limitService="sendProcessNotification" limitAfterStart="N" delegateAfterStart="Y" restartOnDelegate="N" inheritPriority="Y"/>
    <WorkflowActivity packageId="org.ofbiz.commonapp.order.order" packageVersion="1.4" processId="ProcessOrder" processVersion="1.4" activityId="completeOrderEvent" objectName="Complete Order Event" objectPriority="1" description="Activity runs after an order is completed" timeLimit="1.0" startModeEnumId="WAM_AUTOMATIC" finishModeEnumId="WAM_AUTOMATIC" performerParticipantId="admin" activityTypeEnumId="WAT_TOOL" canStart="N" joinTypeEnumId="WJT_XOR" splitTypeEnumId="WST_XOR" acceptAllAssignments="N" completeAllAssignments="N" limitAfterStart="Y" delegateAfterStart="Y" restartOnDelegate="N" inheritPriority="N"/>
    <WorkflowActivity packageId="org.ofbiz.commonapp.order.order" packageVersion="1.4" processId="ProcessOrder" processVersion="1.4" activityId="orderNotReady" objectName="Order Not Ready" objectPriority="5" description="The order is not ready for processing; suspend and wait for action" timeLimit="72.0" startModeEnumId="WAM_AUTOMATIC" finishModeEnumId="WAM_AUTOMATIC" performerParticipantId="admin" activityTypeEnumId="WAT_TOOL" canStart="N" joinTypeEnumId="WJT_XOR" splitTypeEnumId="WST_XOR" acceptAllAssignments="N" completeAllAssignments="N" limitService="sendProcessNotification" limitAfterStart="N" delegateAfterStart="Y" restartOnDelegate="N" inheritPriority="Y"/>
    <WorkflowActivity packageId="org.ofbiz.commonapp.order.order" packageVersion="1.4" processId="ProcessOrder" processVersion="1.4" activityId="receiveOrder" objectName="Receive Order" objectPriority="1" description="Initial activity when order is received" timeLimit="1.0" startModeEnumId="WAM_AUTOMATIC" finishModeEnumId="WAM_AUTOMATIC" performerParticipantId="admin" activityTypeEnumId="WAT_ROUTE" canStart="Y" joinTypeEnumId="WJT_XOR" splitTypeEnumId="WST_XOR" acceptAllAssignments="N" completeAllAssignments="N" limitAfterStart="Y" delegateAfterStart="Y" restartOnDelegate="N" inheritPriority="N"/>
    <WorkflowActivity packageId="org.ofbiz.commonapp.order.order" packageVersion="1.4" processId="ProcessOrder" processVersion="1.4" activityId="rejectOrder" objectName="Reject The Order" objectPriority="5" description="Order was not appoved; reject the order" timeLimit="1.0" startModeEnumId="WAM_AUTOMATIC" finishModeEnumId="WAM_AUTOMATIC" performerParticipantId="admin" activityTypeEnumId="WAT_TOOL" canStart="N" joinTypeEnumId="WJT_XOR" splitTypeEnumId="WST_XOR" acceptAllAssignments="N" completeAllAssignments="N" limitAfterStart="Y" delegateAfterStart="Y" restartOnDelegate="N" inheritPriority="N"/>
    
    <WorkflowActivityTool packageId="org.ofbiz.commonapp.order.order" packageVersion="1.4" processId="ProcessOrder" processVersion="1.4" activityId="approveOrderEvent" toolId="completeOrderStatus" toolTypeEnumId="WTT_PROCEDURE" actualParameters="orderId,statusId" extendedAttributes="runAsUser=admin|serviceName=changeOrderStatus|statusId=ORDER_APPROVED"/>
    <WorkflowActivityTool packageId="org.ofbiz.commonapp.order.order" packageVersion="1.4" processId="ProcessOrder" processVersion="1.4" activityId="cancelOrder" toolId="suspendOrderCancelWorkflow" toolTypeEnumId="WTT_PROCEDURE" actualParameters="workEffortId" extendedAttributes="runAsUser=admin|serviceName=wfCancelWorkflow"/>
    <WorkflowActivityTool packageId="org.ofbiz.commonapp.order.order" packageVersion="1.4" processId="ProcessOrder" processVersion="1.4" activityId="cancelOrder" toolId="suspendOrderChangeStatus" toolTypeEnumId="WTT_PROCEDURE" actualParameters="orderId,statusId" extendedAttributes="runAsUser=admin|serviceName=changeOrderStatus|statusId=ORDER_PROCESSING"/>
    <WorkflowActivityTool packageId="org.ofbiz.commonapp.order.order" packageVersion="1.4" processId="ProcessOrder" processVersion="1.4" activityId="completeOrderEvent" toolId="completeOrderStatus" toolTypeEnumId="WTT_PROCEDURE" actualParameters="orderId,statusId" extendedAttributes="runAsUser=admin|serviceName=changeOrderStatus|statusId=ORDER_COMPLETED"/>
    <WorkflowActivityTool packageId="org.ofbiz.commonapp.order.order" packageVersion="1.4" processId="ProcessOrder" processVersion="1.4" activityId="orderNotReady" toolId="orderNotReadySuspend" toolTypeEnumId="WTT_PROCEDURE" actualParameters="workEffortId" extendedAttributes="runAsUser=admin|serviceName=wfSuspendActivity"/>
    <WorkflowActivityTool packageId="org.ofbiz.commonapp.order.order" packageVersion="1.4" processId="ProcessOrder" processVersion="1.4" activityId="rejectOrder" toolId="rejectOrderChangeItemStatus" toolTypeEnumId="WTT_PROCEDURE" actualParameters="orderId,statusId" extendedAttributes="runAsUser=admin|serviceName=changeOrderItemStatus|statusId=ITEM_REJECTED"/>
    <WorkflowActivityTool packageId="org.ofbiz.commonapp.order.order" packageVersion="1.4" processId="ProcessOrder" processVersion="1.4" activityId="rejectOrder" toolId="rejectOrderChangeOrderStatus" toolTypeEnumId="WTT_PROCEDURE" actualParameters="orderId,statusId" extendedAttributes="runAsUser=admin|serviceName=changeOrderStatus|statusId=ORDER_REJECTED"/>
    
    <WorkflowDataField packageId="org.ofbiz.commonapp.order.order" packageVersion="1.4" processId="ProcessOrder" processVersion="1.4" dataFieldId="adminEmailList" dataFieldName="adminEmailList" initialValue="jaz@jflow.net,jonesde@ofbiz.org" dataTypeEnumId="WDT_STRING" isArray="N"/>
    
    <WorkflowFormalParam packageId="org.ofbiz.commonapp.order.order" packageVersion="1.4" processId="ProcessOrder" processVersion="1.4" applicationId="_NA_" formalParamId="orderId" indexNumber="1" modeEnumId="WPM_IN" description="The order number" dataTypeEnumId="WDT_STRING"/>
    <WorkflowFormalParam packageId="org.ofbiz.commonapp.order.order" packageVersion="1.4" processId="ProcessOrder" processVersion="1.4" applicationId="_NA_" formalParamId="orderStatusId" indexNumber="2" modeEnumId="WPM_INOUT" description="The order status" dataTypeEnumId="WDT_STRING"/>
        
    <WorkflowTransition packageId="org.ofbiz.commonapp.order.order" packageVersion="1.4" processId="ProcessOrder" processVersion="1.4" transitionId="trans1" transitionName="Goto Order Approve" conditionExpr="orderStatusId.equals(&quot;ORDER_PROCESSING&quot;)" conditionTypeEnumId="WTC_CONDITION" fromActivityId="receiveOrder" toActivityId="approveOrder" loopTypeEnumId="WTL_NOLOOP"/>
    <WorkflowTransition packageId="org.ofbiz.commonapp.order.order" packageVersion="1.4" processId="ProcessOrder" processVersion="1.4" transitionId="trans1.1" transitionName="Goto Order Complete" conditionExpr="orderStatusId.equals(&quot;ORDER_APPROVED&quot;)" conditionTypeEnumId="WTC_CONDITION" fromActivityId="receiveOrder" toActivityId="completeOrder" loopTypeEnumId="WTL_NOLOOP"/>
    <WorkflowTransition packageId="org.ofbiz.commonapp.order.order" packageVersion="1.4" processId="ProcessOrder" processVersion="1.4" transitionId="trans1.2" transitionName="Order not ready for processing" conditionTypeEnumId="WTC_OTHERWISE" fromActivityId="receiveOrder" toActivityId="orderNotReady" loopTypeEnumId="WTL_NOLOOP"/>
    <WorkflowTransition packageId="org.ofbiz.commonapp.order.order" packageVersion="1.4" processId="ProcessOrder" processVersion="1.4" transitionId="trans2" transitionName="Cancel Order" conditionExpr="approvalCode.equals(&quot;0&quot;)" conditionTypeEnumId="WTC_CONDITION" fromActivityId="approveOrder" toActivityId="cancelOrder" loopTypeEnumId="WTL_NOLOOP" extendedAttributes="approvalCode=0"/>
    <WorkflowTransition packageId="org.ofbiz.commonapp.order.order" packageVersion="1.4" processId="ProcessOrder" processVersion="1.4" transitionId="trans2.1" transitionName="Reject Order" conditionExpr="approvalCode.equals(&quot;1&quot;)" conditionTypeEnumId="WTC_CONDITION" fromActivityId="approveOrder" toActivityId="rejectOrder" loopTypeEnumId="WTL_NOLOOP" extendedAttributes="approvalCode=1"/>
    <WorkflowTransition packageId="org.ofbiz.commonapp.order.order" packageVersion="1.4" processId="ProcessOrder" processVersion="1.4" transitionId="trans2.2" transitionName="Approve Order" conditionExpr="approvalCode.equals(&quot;2&quot;)" conditionTypeEnumId="WTC_CONDITION" fromActivityId="approveOrder" toActivityId="approveOrderEvent" loopTypeEnumId="WTL_NOLOOP" extendedAttributes="approvalCode=2"/>
    <WorkflowTransition packageId="org.ofbiz.commonapp.order.order" packageVersion="1.4" processId="ProcessOrder" processVersion="1.4" transitionId="trans3" transitionName="Complete Order" conditionTypeEnumId="WTC_OTHERWISE" fromActivityId="approveOrderEvent" toActivityId="completeOrder" loopTypeEnumId="WTL_NOLOOP"/>
    <WorkflowTransition packageId="org.ofbiz.commonapp.order.order" packageVersion="1.4" processId="ProcessOrder" processVersion="1.4" transitionId="trans4" transitionName="Cancel Order" conditionExpr="approvalCode.equals(&quot;0&quot;)" conditionTypeEnumId="WTC_CONDITION" fromActivityId="completeOrder" toActivityId="cancelOrder" loopTypeEnumId="WTL_NOLOOP" extendedAttributes="approvalCode=0"/>
    <WorkflowTransition packageId="org.ofbiz.commonapp.order.order" packageVersion="1.4" processId="ProcessOrder" processVersion="1.4" transitionId="trans4.1" transitionName="Complete Order" conditionExpr="approvalCode.equals(&quot;2&quot;)" conditionTypeEnumId="WTC_CONDITION" fromActivityId="completeOrder" toActivityId="completeOrderEvent" loopTypeEnumId="WTL_NOLOOP" extendedAttributes="approvalCode=3"/>
    <WorkflowTransition packageId="org.ofbiz.commonapp.order.order" packageVersion="1.4" processId="ProcessOrder" processVersion="1.4" transitionId="trans5" transitionName="Goto Order Approve" conditionExpr="orderStatusId.equals(&quot;ORDER_PROCESSING&quot;)" conditionTypeEnumId="WTC_CONDITION" fromActivityId="orderNotReady" toActivityId="approveOrder" loopTypeEnumId="WTL_NOLOOP"/>
    <WorkflowTransition packageId="org.ofbiz.commonapp.order.order" packageVersion="1.4" processId="ProcessOrder" processVersion="1.4" transitionId="trans5.1" transitionName="Goto Order Complete" conditionExpr="orderStatusId.equals(&quot;ORDER_APPROVED&quot;)" conditionTypeEnumId="WTC_CONDITION" fromActivityId="orderNotReady" toActivityId="completeOrder" loopTypeEnumId="WTL_NOLOOP"/>
    <WorkflowTransition packageId="org.ofbiz.commonapp.order.order" packageVersion="1.4" processId="ProcessOrder" processVersion="1.4" transitionId="trans5.2" transitionName="Order not ready for processing" conditionTypeEnumId="WTC_OTHERWISE" fromActivityId="orderNotReady" toActivityId="receiveOrder" loopTypeEnumId="WTL_NOLOOP"/>

</entity-engine-xml>
  
