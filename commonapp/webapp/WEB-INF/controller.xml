<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE site-conf PUBLIC "-//OFBiz//DTD Request Config//EN" "http://www.ofbiz.org/dtds/site-conf.dtd">

<site-conf>
    <description>CommonApp Site Configuration File</description>
    <owner>The Open For Business Project (c) 2001 </owner>
    <errorpage>/error/error.jsp</errorpage>

    <handler name="java" type="request" class="org.ofbiz.core.event.JavaEventHandler"/>
    <handler name="soap" type="request" class="org.ofbiz.core.event.SOAPEventHandler"/>
    <handler name="service" type="request" class="org.ofbiz.core.event.ServiceEventHandler"/>
    <handler name="simple" type="request" class="org.ofbiz.core.event.SimpleEventHandler"/>

	<handler name="ftl" type="view" class="org.ofbiz.core.ftl.FreemarkerViewHandler"/>
    <handler name="region" type="view" class="org.ofbiz.core.view.RegionViewHandler"/>
    <handler name="velocity" type="view" class="org.ofbiz.core.view.VelocityViewHandler"/>

    <!-- Security Mappings -->
    <request-map uri="checkLogin" edit="false">
      <description>Verify a user is logged in.</description>
      <security https="false" auth="false"/>
      <event type="java" path="org.ofbiz.commonapp.security.login.LoginEvents" invoke="checkLogin" />
      <response name="success" type="view" value="main" />
      <response name="error" type="view" value="login" />
    </request-map>

    <request-map uri="login">
      <security https="true" auth="false"/>
      <event type="java" path="org.ofbiz.commonapp.security.login.LoginEvents" invoke="login"/>
      <response name="success" type="view" value="main"/>
      <response name="error" type="view" value="login"/>
    </request-map>

    <request-map uri="logout">
      <security https="true" auth="true"/>
      <event type="java" path="org.ofbiz.commonapp.security.login.LoginEvents" invoke="logout"/>
      <response name="success" type="request" value="checkLogin"/>
      <response name="error" type="view" value="main"/>
    </request-map>
    <!-- End of Security Mappings -->

    <!-- Request Mappings -->
    <request-map uri="pullapplet">
    	<event type="java" path="org.ofbiz.commonapp.common.CommonEvents" invoke="checkAppletRequest"/>
    	<response name="success" type="none"/>    	
    </request-map>
    <request-map uri="pushapplet">
    	<event type="java" path="org.ofbiz.commonapp.common.CommonEvents" invoke="receiveAppletRequest"/>
    	<response name="success" type="none"/>
    </request-map>
    <request-map uri="httpService">
        <event type="java" path="org.ofbiz.core.service.engine.HttpEngine" invoke="httpEngine"/>
        <response name="success" type="none"/>
        <response name="error" type="view" value="error"/>
    </request-map>
        
    <request-map uri="ServiceSchedule">
        <event type="java" path="org.ofbiz.core.event.CoreEvents" invoke="scheduleService"/>
        <response name="success" type="view" value="error"/>
        <response name="error" type="view" value="error"/>
    </request-map>

    <request-map uri="WorkflowTest">
        <event type="service" path="async" invoke="processOrder"/>
        <response name="success" type="view" value="main"/>
        <response name="error" type="view" value="error"/>
    </request-map>

    <request-map uri="SOAPService">
        <event type="soap"/>
        <response name="error" type="none"/>
        <response name="success" type="none"/>
    </request-map>

    <request-map uri="TestBeanShell">
       <event type="service" invoke="testBsh"/>
       <response name="error" type="view" value="error"/>
       <response name="success" type="view" value="error"/>
    </request-map>

    <request-map uri="TestService">
       <event type="service" invoke="testScv" />
       <response name="error" type="view" value="error"/>
       <response name="success" type="view" value="error"/>
    </request-map>

    <request-map uri="TestJMSQueue">
        <event type="service" invoke="testJMSQueue"/>
        <response name="error" type="view" value="error"/>
        <response name="success" type="view" value="error"/>
    </request-map>

    <request-map uri="TestJMSTopic">
        <event type="service" invoke="testJMSTopic"/>
        <response name="error" type="view" value="error"/>
        <response name="success" type="view" value="error"/>
    </request-map>

    <request-map uri="yahoo">
        <response name="success" type="url" value="http://www.yahoo.com"/>
    </request-map>

    <request-map uri="view">
        <security https="false" auth="false"/>
        <response name="success" type="view" value="main"/>
        <response name="error" type="view" value="error"/>
    </request-map>

    <request-map uri="chain">
        <event type="java" path="org.ofbiz.core.event.TestEvent" invoke="test"/>
        <response name="success" type="request" value="/view"/>
        <response name="error" type="view" value="error"/>
    </request-map>

    <request-map uri="main">
    	<security https="false" auth="false"/>
    	<response name="success" type="view" value="main"/>
    </request-map>

    <request-map uri="changeDelegator">
	    <event type="java" path="org.ofbiz.core.event.CoreEvents" invoke="changeDelegator"/>
	    <response name="success" type="view" value="main"/>
	    <response name="error" type="view" value="error"/>
	</request-map>
    <!-- end of request mappings -->

    <!-- View Mappings -->
    <view-map name="error" page="/error/error.jsp"/>
    <view-map name="main" type="region"/>
    <view-map name="login" type="region"/>
    <view-map name="fmtest" type="ftl" page="/freemarker_test.ftl"/>
    <!-- end of view mappings -->

</site-conf>


