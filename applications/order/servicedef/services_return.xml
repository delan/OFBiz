<?xml version="1.0" encoding="UTF-8" ?>
<!--
 *  Copyright (c) 2001-2005 The Open For Business Project - www.ofbiz.org
 *
 *  Permission is hereby granted, free of charge, to any person obtaining a
 *  copy of this software and associated documentation files (the "Software"),
 *  to deal in the Software without restriction, including without limitation
 *  the rights to use, copy, modify, merge, publish, distribute, sublicense,
 *  and/or sell copies of the Software, and to permit persons to whom the
 *  Software is furnished to do so, subject to the following conditions:
 *
 *  The above copyright notice and this permission notice shall be included
 *  in all copies or substantial portions of the Software.
 *
 *  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS
 *  OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 *  MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.
 *  IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY
 *  CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT
 *  OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR
 *  THE USE OR OTHER DEALINGS IN THE SOFTWARE.
-->

<services xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:noNamespaceSchemaLocation="http://www.ofbiz.org/dtds/services.xsd">
    <description>Order Return Services</description>
    <vendor>OFBiz</vendor>
    <version>1.0</version>

    <!-- Order Return Services -->
    <service name="quickReturnOrder" engine="simple"
            location="org/ofbiz/order/order/OrderReturnServices.xml" invoke="quickReturnFromOrder">
        <description>Quick Return Order</description>
        <attribute name="orderId" type="String" mode="IN" optional="false"/>
        <attribute name="returnReasonId" type="String" mode="IN" optional="true"/>
        <attribute name="returnTypeId" type="String" mode="IN" optional="true"/>
        <attribute name="receiveReturn" type="Boolean" mode="IN" optional="true"/>
        <attribute name="returnId" type="String" mode="OUT" optional="false"/>
    </service>
    <service name="createReturnHeader" engine="simple"
            location="org/ofbiz/order/order/OrderReturnServices.xml" invoke="createReturnHeader">
        <description>Create a new ReturnHeader</description>
        <auto-attributes entity-name="ReturnHeader" include="nonpk" mode="IN" optional="true"/>
        <auto-attributes entity-name="ReturnHeader" include="pk" mode="OUT" optional="false"/>
    </service>
    <service name="updateReturnHeader" engine="simple"
            location="org/ofbiz/order/order/OrderReturnServices.xml" invoke="updateReturnHeader">
        <description>Update a ReturnHeader</description>
        <auto-attributes entity-name="ReturnHeader" include="pk" mode="IN" optional="false"/>
        <auto-attributes entity-name="ReturnHeader" include="nonpk" mode="IN" optional="true"/>
        <attribute name="currentStatusId" type="String" mode="OUT" optional="false"/>
    </service>

    <service name="returnItemInterface" engine="interface" location="" invoke="">
        <description>Return Item Interface</description>
        <auto-attributes entity-name="ReturnItem" include="all" mode="IN" optional="false">
            <exclude field-name="returnItemSeqId"/>
        </auto-attributes>
        <override name="returnItemResponseId" optional="true"/>
        <override name="orderAdjustmentId" optional="true"/>
        <override name="orderItemSeqId" optional="true"/>
        <override name="receivedQuantity" optional="true"/>
        <override name="statusId" optional="true"/>
        <override name="returnPrice" optional="true"/>
    </service>
    <service name="createReturnItem" engine="simple"
            location="org/ofbiz/order/order/OrderReturnServices.xml" invoke="createReturnItem">
        <description>Create a new ReturnItem</description>
        <implements service="returnItemInterface"/>
        <attribute name="returnItemMapKey" type="String" mode="IN" optional="true"/>
        <attribute name="returnItemSeqId" type="String" mode="OUT" optional="false"/>
        <override name="returnReasonId" optional="true"/>
    </service>
    <service name="updateReturnItem" engine="simple"
            location="org/ofbiz/order/order/OrderReturnServices.xml" invoke="updateReturnItem">
        <description>Update a ReturnItem</description>
        <implements service="returnItemInterface"/>
        <attribute entity-name="ReturnItem" name="returnItemSeqId" type="String" mode="IN" optional="false"/>
        <attribute name="currentStatusId" type="String" mode="OUT" optional="false"/>
    </service>
    <service name="removeReturnItem" engine="simple"
            location="org/ofbiz/order/order/OrderReturnServices.xml" invoke="removeReturnItem">
        <description>Remove a ReturnItem</description>
        <auto-attributes entity-name="ReturnItem" include="pk" mode="IN" optional="false"/>
    </service>

    <service name="getReturnItemInitialCost" engine="java"
            location="org.ofbiz.order.order.OrderReturnServices" invoke="getReturnItemInitialCost">
        <description>Gets the item's initial cost based on the inventory item record associated with the order item or 0.00 if none found.</description>
        <attribute name="returnId" type="String" mode="IN" optional="false"/>
        <attribute name="returnItemSeqId" type="String" mode="IN" optional="false"/>
        <attribute name="initialItemCost" type="Double" mode="OUT" optional="false"/>
    </service>

    <service name="checkReturnComplete" engine="java"
            location="org.ofbiz.order.order.OrderReturnServices" invoke="checkReturnComplete">
        <description>Checks if all items on a return are complete/cancelled and updates the header status</description>
        <attribute name="returnId" type="String" mode="IN" optional="false"/>
        <attribute name="statusId" type="String" mode="OUT" optional="true"/>
    </service>

    <service name="sendReturnAcceptNotification" engine="java" max-retry="3"
            location="org.ofbiz.order.order.OrderReturnServices" invoke="sendReturnAcceptNotification">
        <description>Send a notification that a return has been accepted</description>
        <attribute name="returnId" type="String" mode="IN" optional="false"/>
    </service>
    <service name="sendReturnCompleteNotification" engine="java" max-retry="3"
            location="org.ofbiz.order.order.OrderReturnServices" invoke="sendReturnCompleteNotification">
        <description>Send a notification that a return has been completed</description>
        <attribute name="returnId" type="String" mode="IN" optional="false"/>
    </service>
     <service name="sendReturnCancelNotification" engine="java" max-retry="3"
            location="org.ofbiz.order.order.OrderReturnServices" invoke="sendReturnCancelNotification">
        <description>Send a notification that a return has been cancelled</description>
        <attribute name="returnId" type="String" mode="IN" optional="false"/>
    </service>

    <service name="processCreditReturn" engine="java" auth="true"
            location="org.ofbiz.order.order.OrderReturnServices" invoke="processCreditReturn">
        <description>Process the credits in a return</description>
        <attribute name="returnId" type="String" mode="IN" optional="false"/>
    </service>
    <service name="processRefundReturn" engine="java" auth="true"
            location="org.ofbiz.order.order.OrderReturnServices" invoke="processRefundReturn">
        <description>Process the refunds in a return</description>
        <attribute name="returnId" type="String" mode="IN" optional="false"/>
    </service>
    <service name="processReplacementReturn" engine="java" auth="true"
            location="org.ofbiz.order.order.OrderReturnServices" invoke="processReplacementReturn">
        <description>Process the replacements in a return</description>
        <attribute name="returnId" type="String" mode="IN" optional="false"/>
    </service>
    <service name="updateReturnStatusFromReceipt" engine="simple"
            location="org/ofbiz/order/order/OrderReturnServices.xml" invoke="updateReturnStatusFromReceipt">
        <description>Update return/item status when items have been received</description>
        <attribute name="returnId" type="String" mode="IN" optional="false"/>
        <attribute name="returnHeaderStatus" type="String" mode="OUT" optional="false"/>
    </service>
    <service name="getReturnableQuantity" engine="java"
            location="org.ofbiz.order.order.OrderReturnServices" invoke="getReturnableQuantity">
        <description>Get the quantity allowed for an item to be returned</description>
        <attribute name="orderItem" type="GenericValue" mode="IN" optional="false"/>
        <attribute name="returnableQuantity" type="Double" mode="OUT" optional="false"/>
        <attribute name="returnablePrice" type="Double" mode="OUT" optional="false"/>
    </service>
    <service name="getReturnableItems" engine="java"
            location="org.ofbiz.order.order.OrderReturnServices" invoke="getReturnableItems">
        <description>Get a map of returnable items orderItem => quantity available to return</description>
        <attribute name="orderId" type="String" mode="IN" optional="false"/>
        <attribute name="returnableItems" type="Map" mode="OUT" optional="false"/>
    </service>
</services>

