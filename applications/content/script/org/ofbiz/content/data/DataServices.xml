<?xml version="1.0" encoding="UTF-8"?>
<!--
Licensed to the Apache Software Foundation (ASF) under one
or more contributor license agreements.  See the NOTICE file
distributed with this work for additional information
regarding copyright ownership.  The ASF licenses this file
to you under the Apache License, Version 2.0 (the
"License"); you may not use this file except in compliance
with the License.  You may obtain a copy of the License at

http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing,
software distributed under the License is distributed on an
"AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, either express or implied.  See the License for the
specific language governing permissions and limitations
under the License.
-->

<simple-methods xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
        xsi:noNamespaceSchemaLocation="http://www.ofbiz.org/dtds/simple-methods.xsd">
	<!-- Methods for DataResource -->
    <simple-method method-name="createDataResource" short-description="Create a Data Resource">
        <make-value entity-name="DataResource" value-name="newEntity"/>
        <set-nonpk-fields map-name="parameters" value-name="newEntity"/>
        <set-pk-fields map-name="parameters" value-name="newEntity"/>

        <if-empty field-name="newEntity.dataResourceId">
            <sequenced-id-to-env sequence-name="DataResource" env-name="dataResourceId"/>
            <set field="newEntity.dataResourceId" from-field="dataResourceId"/>
        </if-empty>

        <now-timestamp-to-env env-name="nowTimestamp"/>
        <set field="newEntity.lastModifiedByUserLogin" from-field="userLogin.userLoginId"/>
        <set field="newEntity.createdByUserLogin" from-field="userLogin.userLoginId"/>
        <set field="newEntity.lastModifiedDate" from-field="nowTimestamp"/>
        <set field="newEntity.createdDate" from-field="nowTimestamp"/>

        <if-empty field-name="dataTemplateTypeId">
            <set field="newEntity.dataTemplateTypeId" value="NONE"/>
        </if-empty>

        <if-empty field-name="content.statusId">
            <!-- get the first status item -->
            <entity-and entity-name="StatusItem" list-name="contentStatus">
                <field-map field-name="statusTypeId" value="CONTENT_STATUS"/>
                <order-by field-name="sequenceId"/>
            </entity-and>
            <first-from-list entry-name="statusItem" list-name="contentStatus"/>
            <set field="newEntity.statusId" from-field="statusItem.statusId"/>
        </if-empty>

        <create-value value-name="newEntity"/>
        <field-to-result field-name="dataResourceId" map-name="newEntity"/>
    </simple-method>

    <simple-method method-name="updateDataResource" short-description="Update a Data Resource">
        <make-value entity-name="DataResource" value-name="lookupKeyValue"/>
        <set-pk-fields map-name="parameters" value-name="lookupKeyValue"/>
        <find-by-primary-key entity-name="DataResource" map-name="lookupKeyValue" value-name="lookedUpValue"/>

        <to-string map-name="parameters" field-name="locale" />
        <set-nonpk-fields map-name="parameters" value-name="lookedUpValue"/>

        <now-timestamp-to-env env-name="nowTimestamp"/>
        <set field="lookedUpValue.lastModifiedByUserLogin" from-field="userLogin.userLoginId"/>
        <set field="lookedUpValue.lastModifiedDate" from-field="nowTimestamp"/>

        <store-value value-name="lookedUpValue"/>
        <field-to-result field-name="dataResourceId" map-name="lookedUpValue"/>
    </simple-method>

    <simple-method method-name="deleteDataResource" short-description="Delete a Data Resource">        
        <make-value entity-name="DataResource" value-name="lookupKeyValue"/>
        <set-pk-fields map-name="parameters" value-name="lookupKeyValue"/>
        <find-by-primary-key entity-name="DataResource" map-name="lookupKeyValue" value-name="lookedUpValue"/>
        <remove-value value-name="lookedUpValue"/>
    </simple-method>

	<!-- Methods for DataCategory -->
    <simple-method method-name="createDataCategory" short-description="Create a Data Category">
        <make-value entity-name="DataCategory" value-name="newEntity"/>
        <set-nonpk-fields map-name="parameters" value-name="newEntity"/>
        <set-pk-fields map-name="parameters" value-name="newEntity"/>
        
        <create-value value-name="newEntity"/>
        <field-to-result field-name="dataCategoryId" map-name="newEntity"/>
    </simple-method>
    <simple-method method-name="updateDataCategory" short-description="Update a Data Category">
        <make-value entity-name="DataCategory" value-name="lookupKeyValue"/>
        <set-pk-fields map-name="parameters" value-name="lookupKeyValue"/>
        <find-by-primary-key entity-name="DataCategory" map-name="lookupKeyValue" value-name="lookedUpValue"/>
        <set-nonpk-fields map-name="parameters" value-name="lookedUpValue"/>
        <store-value value-name="lookedUpValue"/>
    </simple-method>
    <simple-method method-name="deleteDataCategory" short-description="Delete a Data Category">
        <make-value entity-name="DataCategory" value-name="lookupKeyValue"/>
        <set-pk-fields map-name="parameters" value-name="lookupKeyValue"/>
        <find-by-primary-key entity-name="DataCategory" map-name="lookupKeyValue" value-name="lookedUpValue"/>
        <remove-value value-name="lookedUpValue"/>
    </simple-method>
    
	<!-- Methods for DataResourceMetaData -->
    <simple-method method-name="createDataResourceMetaData" short-description="Create Data Resource Meta Data">
        <check-permission permission="CONTENTMGR" action="_CREATE"><fail-message message="Security Error: to run createDataResourceMetaData you must have the CONTENTMGR_CREATE or CONTENTMGR_ADMIN permission"/></check-permission>
        <check-errors/>

        <make-value entity-name="DataResourceMetaData" value-name="newEntity"/>
        <set-nonpk-fields map-name="parameters" value-name="newEntity"/>
        <set-pk-fields map-name="parameters" value-name="newEntity"/>
        <create-value value-name="newEntity"/>
    </simple-method>
    <simple-method method-name="updateDataResourceMetaData" short-description="Update Data Resource Meta Data">
        <check-permission permission="CONTENTMGR" action="_UPDATE"><fail-message message="Security Error: to run updateDataResourceMetaData you must have the CONTENTMGR_UPDATE or CONTENTMGR_ADMIN permission"/></check-permission>
        <check-errors/>

        <make-value entity-name="DataResourceMetaData" value-name="lookupKeyValue"/>
        <set-pk-fields map-name="parameters" value-name="lookupKeyValue"/>
        <find-by-primary-key entity-name="DataResourceMetaData" map-name="lookupKeyValue" value-name="lookedUpValue"/>
        <set-nonpk-fields map-name="parameters" value-name="lookedUpValue"/>
        <store-value value-name="lookedUpValue"/>
    </simple-method>
    <simple-method method-name="removeDataResourceMetaData" short-description="Remove Data Resource Meta Data">
        <check-permission permission="CONTENTMGR" action="_DELETE"><fail-message message="Security Error: to run removeDataResourceMetaData you must have the CONTENTMGR_DELETE or CONTENTMGR_ADMIN permission"/></check-permission>
        <check-errors/>

        <make-value entity-name="DataResourceMetaData" value-name="lookupKeyValue"/>
        <set-pk-fields map-name="parameters" value-name="lookupKeyValue"/>
        <find-by-primary-key entity-name="DataResourceMetaData" map-name="lookupKeyValue" value-name="lookedUpValue"/>
        <remove-value value-name="lookedUpValue"/>
    </simple-method>    
    
	<!-- Methods for DataResourcePurpose -->
    <simple-method method-name="createDataResourcePurpose" short-description="Create Data Resource Purpose">
        <check-permission permission="CONTENTMGR" action="_CREATE"><fail-message message="Security Error: to run createDataResourcePurpose you must have the CONTENTMGR_CREATE or CONTENTMGR_ADMIN permission"/></check-permission>
        <check-errors/>

        <make-value entity-name="DataResourcePurpose" value-name="newEntity"/>
        <set-nonpk-fields map-name="parameters" value-name="newEntity"/>
        <set-pk-fields map-name="parameters" value-name="newEntity"/>
        <create-value value-name="newEntity"/>
    </simple-method>
    <simple-method method-name="updateDataResourcePurpose" short-description="Update Data Resource Purpose">
        <check-permission permission="CONTENTMGR" action="_UPDATE"><fail-message message="Security Error: to run updateDataResourcePurpose you must have the CONTENTMGR_UPDATE or CONTENTMGR_ADMIN permission"/></check-permission>
        <check-errors/>

        <make-value entity-name="DataResourcePurpose" value-name="lookupKeyValue"/>
        <set-pk-fields map-name="parameters" value-name="lookupKeyValue"/>
        <find-by-primary-key entity-name="DataResourcePurpose" map-name="lookupKeyValue" value-name="lookedUpValue"/>
        <set-nonpk-fields map-name="parameters" value-name="lookedUpValue"/>
        <store-value value-name="lookedUpValue"/>
    </simple-method>
    <simple-method method-name="removeDataResourcePurpose" short-description="Remove Data Resource Purpose">
        <check-permission permission="CONTENTMGR" action="_DELETE"><fail-message message="Security Error: to run removeDataResourcePurpose you must have the CONTENTMGR_DELETE or CONTENTMGR_ADMIN permission"/></check-permission>
        <check-errors/>

        <make-value entity-name="DataResourcePurpose" value-name="lookupKeyValue"/>
        <set-pk-fields map-name="parameters" value-name="lookupKeyValue"/>
        <find-by-primary-key entity-name="DataResourcePurpose" map-name="lookupKeyValue" value-name="lookedUpValue"/>
        <remove-value value-name="lookedUpValue"/>
    </simple-method>    
    
	<!-- Methods for DataResourceRole -->
    <simple-method method-name="createDataResourceRole" short-description="Create Data Resource Role">
        <make-value entity-name="DataResourceRole" value-name="newEntity"/>
        <set-nonpk-fields map-name="parameters" value-name="newEntity"/>
        <set-pk-fields map-name="parameters" value-name="newEntity"/>

        <if-empty field-name="newEntity.fromDate">
            <now-timestamp-to-env env-name="nowTimestamp"/>
            <set field="newEntity.fromDate" from-field="nowTimestamp"/>
        </if-empty>
        
        <create-value value-name="newEntity"/>
    </simple-method>
    <simple-method method-name="updateDataResourceRole" short-description="Update Data Resource Role">
        <make-value entity-name="DataResourceRole" value-name="lookupKeyValue"/>
        <set-pk-fields map-name="parameters" value-name="lookupKeyValue"/>
        <find-by-primary-key entity-name="DataResourceRole" map-name="lookupKeyValue" value-name="lookedUpValue"/>
        <set-nonpk-fields map-name="parameters" value-name="lookedUpValue"/>
        <store-value value-name="lookedUpValue"/>
    </simple-method>
    <simple-method method-name="removeDataResourceRole" short-description="Remove Data Resource Role">        
        <make-value entity-name="DataResourceRole" value-name="lookupKeyValue"/>
        <set-pk-fields map-name="parameters" value-name="lookupKeyValue"/>
        <find-by-primary-key entity-name="DataResourceRole" map-name="lookupKeyValue" value-name="lookedUpValue"/>
        <remove-value value-name="lookedUpValue"/>
    </simple-method>
    
  <!-- Methods for DataCategory -->
    <simple-method method-name="createDataCategory" short-description="Create Data Category">
        <make-value entity-name="DataCategory" value-name="newEntity"/>
        <set-nonpk-fields map-name="parameters" value-name="newEntity"/>
        <set-pk-fields map-name="parameters" value-name="newEntity"/>
        <create-value value-name="newEntity"/>
        <field-to-result field-name="dataCategoryId" map-name="newEntity"/>
    </simple-method>
    <simple-method method-name="updateDataCategory" short-description="Update Data Category">
        <make-value entity-name="DataCategory" value-name="lookupKeyValue"/>
        <set-pk-fields map-name="parameters" value-name="lookupKeyValue"/>
        <find-by-primary-key entity-name="DataCategory" map-name="lookupKeyValue" value-name="lookedUpValue"/>
        <set-nonpk-fields map-name="parameters" value-name="lookedUpValue"/>
        <store-value value-name="lookedUpValue"/>
    </simple-method>
    <simple-method method-name="removeDataCategory" short-description="Remove Data DateCategory">       
        <make-value entity-name="DataCategory" value-name="lookupKeyValue"/>
        <set-pk-fields map-name="parameters" value-name="lookupKeyValue"/>
        <find-by-primary-key entity-name="DataCategory" map-name="lookupKeyValue" value-name="lookedUpValue"/>
        <remove-value value-name="lookedUpValue"/>
    </simple-method>

    <!-- Methods for DataResourceType -->
    <simple-method method-name="createDataResourceType" short-description="Create Data Resource Type">
        <make-value entity-name="DataResourceType" value-name="newEntity"/>
        <set-nonpk-fields map-name="parameters" value-name="newEntity"/>
        <set-pk-fields map-name="parameters" value-name="newEntity"/>
        <create-value value-name="newEntity"/>
        <field-to-result field-name="dataResourceTypeId" map-name="newEntity"/>
    </simple-method>
    <simple-method method-name="updateDataResourceType" short-description="Update Data Resource Type">
        <make-value entity-name="DataResourceType" value-name="lookupKeyValue"/>
        <set-pk-fields map-name="parameters" value-name="lookupKeyValue"/>
        <find-by-primary-key entity-name="DataResourceType" map-name="lookupKeyValue" value-name="lookedUpValue"/>
        <set-nonpk-fields map-name="parameters" value-name="lookedUpValue"/>
        <store-value value-name="lookedUpValue"/>
    </simple-method>
    <simple-method method-name="removeDataResourceType" short-description="Remove Data Resource Type">
        <make-value entity-name="DataResourceType" value-name="lookupKeyValue"/>
        <set-pk-fields map-name="parameters" value-name="lookupKeyValue"/>
        <find-by-primary-key entity-name="DataResourceType" map-name="lookupKeyValue" value-name="lookedUpValue"/>
        <remove-value value-name="lookedUpValue"/>
    </simple-method>
    
    <!-- Methods for DataResourceAttribute -->
    <simple-method method-name="createDataResourceAttribute" short-description="Create Data Resource Attribute">
        <make-value entity-name="DataResourceAttribute" value-name="newEntity"/>
        <set-nonpk-fields map-name="parameters" value-name="newEntity"/>
        <set-pk-fields map-name="parameters" value-name="newEntity"/>
        <create-value value-name="newEntity"/>
    </simple-method>
    <simple-method method-name="updateDataResourceAttribute" short-description="Update Data Resource Attribute">
        <make-value entity-name="DataResourceAttribute" value-name="lookupKeyValue"/>
        <set-pk-fields map-name="parameters" value-name="lookupKeyValue"/>
        <find-by-primary-key entity-name="DataResourceAttribute" map-name="lookupKeyValue" value-name="lookedUpValue"/>
        <set-nonpk-fields map-name="parameters" value-name="lookedUpValue"/>
        <store-value value-name="lookedUpValue"/>
    </simple-method>
    <simple-method method-name="removeDataResourceAttribute" short-description="Remove Data Resource Attribute">        
        <make-value entity-name="DataResourceAttribute" value-name="lookupKeyValue"/>
        <set-pk-fields map-name="parameters" value-name="lookupKeyValue"/>
        <find-by-primary-key entity-name="DataResourceAttribute" map-name="lookupKeyValue" value-name="lookedUpValue"/>
        <remove-value value-name="lookedUpValue"/>
    </simple-method>
   
    <!-- Methods for DataResourceTypeAttr -->
    <simple-method method-name="createDataResourceTypeAttr" short-description="Create Data Resource Type Attribute">
        <make-value entity-name="DataResourceTypeAttr" value-name="newEntity"/>
        <set-nonpk-fields map-name="parameters" value-name="newEntity"/>
        <set-pk-fields map-name="parameters" value-name="newEntity"/>
        <create-value value-name="newEntity"/>
    </simple-method>
    <simple-method method-name="removeDataResourceTypeAttr" short-description="Remove Data Resource Type Attribute">        
        <make-value entity-name="DataResourceTypeAttr" value-name="lookupKeyValue"/>
        <set-pk-fields map-name="parameters" value-name="lookupKeyValue"/>
        <find-by-primary-key entity-name="DataResourceTypeAttr" map-name="lookupKeyValue" value-name="lookedUpValue"/>
        <remove-value value-name="lookedUpValue"/>
    </simple-method>
    
    <!-- Methods for CharacterSet -->
    <simple-method method-name="createCharacterSet" short-description="Create Character Set">
        <make-value entity-name="CharacterSet" value-name="newEntity"/>
        <set-nonpk-fields map-name="parameters" value-name="newEntity"/>
        <set-pk-fields map-name="parameters" value-name="newEntity"/>
        <create-value value-name="newEntity"/>
        <field-to-result field-name="characterSetId" map-name="newEntity"/>
    </simple-method>
    <simple-method method-name="updateCharacterSet" short-description="Update Character Set">
        <make-value entity-name="CharacterSet" value-name="lookupKeyValue"/>
        <set-pk-fields map-name="parameters" value-name="lookupKeyValue"/>
        <find-by-primary-key entity-name="CharacterSet" map-name="lookupKeyValue" value-name="lookedUpValue"/>
        <set-nonpk-fields map-name="parameters" value-name="lookedUpValue"/>
        <store-value value-name="lookedUpValue"/>
    </simple-method>
    <simple-method method-name="removeCharacterSet" short-description="Remove Character Set">
        <make-value entity-name="CharacterSet" value-name="lookupKeyValue"/>
        <set-pk-fields map-name="parameters" value-name="lookupKeyValue"/>
        <find-by-primary-key entity-name="CharacterSet" map-name="lookupKeyValue" value-name="lookedUpValue"/>
        <remove-value value-name="lookedUpValue"/>
    </simple-method>
    
    <!-- Methods for FileExtension -->
    <simple-method method-name="createFileExtension" short-description="Create Data Resource Role">
        <make-value entity-name="FileExtension" value-name="newEntity"/>
        <set-nonpk-fields map-name="parameters" value-name="newEntity"/>
        <set-pk-fields map-name="parameters" value-name="newEntity"/>
        <create-value value-name="newEntity"/>
        <field-to-result field-name="fileExtensionId" map-name="newEntity"/>
    </simple-method>
    <simple-method method-name="updateFileExtension" short-description="Update Data Resource Role">
        <make-value entity-name="FileExtension" value-name="lookupKeyValue"/>
        <set-pk-fields map-name="parameters" value-name="lookupKeyValue"/>
        <find-by-primary-key entity-name="FileExtension" map-name="lookupKeyValue" value-name="lookedUpValue"/>
        <set-nonpk-fields map-name="parameters" value-name="lookedUpValue"/>
        <store-value value-name="lookedUpValue"/>
    </simple-method>
    <simple-method method-name="removeFileExtension" short-description="Remove Data Resource Role">
        <make-value entity-name="FileExtension" value-name="lookupKeyValue"/>
        <set-pk-fields map-name="parameters" value-name="lookupKeyValue"/>
        <find-by-primary-key entity-name="FileExtension" map-name="lookupKeyValue" value-name="lookedUpValue"/>
        <remove-value value-name="lookedUpValue"/>
    </simple-method>
    
    <!-- Methods for MetaDataPredicate -->
    <simple-method method-name="createMetaDataPredicate" short-description="Create Data Resource Role">
        <make-value entity-name="MetaDataPredicate" value-name="newEntity"/>
        <set-nonpk-fields map-name="parameters" value-name="newEntity"/>
        <set-pk-fields map-name="parameters" value-name="newEntity"/>
        <create-value value-name="newEntity"/>
        <field-to-result field-name="metaDataPredicateId" map-name="newEntity"/>
    </simple-method>
    <simple-method method-name="updateMetaDataPredicate" short-description="Update Data Resource Role">
        <make-value entity-name="MetaDataPredicate" value-name="lookupKeyValue"/>
        <set-pk-fields map-name="parameters" value-name="lookupKeyValue"/>
        <find-by-primary-key entity-name="MetaDataPredicate" map-name="lookupKeyValue" value-name="lookedUpValue"/>
        <set-nonpk-fields map-name="parameters" value-name="lookedUpValue"/>
        <store-value value-name="lookedUpValue"/>
    </simple-method>
    <simple-method method-name="removeMetaDataPredicate" short-description="Remove Data Resource Role">
        <make-value entity-name="MetaDataPredicate" value-name="lookupKeyValue"/>
        <set-pk-fields map-name="parameters" value-name="lookupKeyValue"/>
        <find-by-primary-key entity-name="MetaDataPredicate" map-name="lookupKeyValue" value-name="lookedUpValue"/>
        <remove-value value-name="lookedUpValue"/>
    </simple-method>
    
    <!-- Methods for MimeType -->
    <simple-method method-name="createMimeType" short-description="Create MimeType">
        <make-value entity-name="MimeType" value-name="newEntity"/>
        <set-nonpk-fields map-name="parameters" value-name="newEntity"/>
        <set-pk-fields map-name="parameters" value-name="newEntity"/>
        <create-value value-name="newEntity"/>
        <field-to-result field-name="mimeTypeId" map-name="newEntity"/>
    </simple-method>
    <simple-method method-name="updateMimeType" short-description="Update MimeType">
        <make-value entity-name="MimeType" value-name="lookupKeyValue"/>
        <set-pk-fields map-name="parameters" value-name="lookupKeyValue"/>
        <find-by-primary-key entity-name="MimeType" map-name="lookupKeyValue" value-name="lookedUpValue"/>
        <set-nonpk-fields map-name="parameters" value-name="lookedUpValue"/>
        <store-value value-name="lookedUpValue"/>
    </simple-method>
    <simple-method method-name="removeMimeType" short-description="Remove MimeType">        
        <make-value entity-name="MimeType" value-name="lookupKeyValue"/>
        <set-pk-fields map-name="parameters" value-name="lookupKeyValue"/>
        <find-by-primary-key entity-name="MimeType" map-name="lookupKeyValue" value-name="lookedUpValue"/>
        <remove-value value-name="lookedUpValue"/>
    </simple-method>

    <!-- Methods for ElectronicText -->
    <simple-method method-name="createElectronicText" short-description="Create Electronic Text">
        <make-value entity-name="ElectronicText" value-name="newEntity"/>
        <set-nonpk-fields map-name="parameters" value-name="newEntity"/>
        <set-pk-fields map-name="parameters" value-name="newEntity"/>

        <create-value value-name="newEntity"/>
        <field-to-result field-name="dataResourceId" map-name="newEntity"/> 
    </simple-method>

    <simple-method method-name="updateElectronicText" short-description="Update Electronic Text">
        <make-value entity-name="ElectronicText" value-name="lookupKeyValue"/>

        <set-pk-fields map-name="parameters" value-name="lookupKeyValue"/>
        <find-by-primary-key entity-name="ElectronicText" map-name="lookupKeyValue" value-name="lookedUpValue"/>

        <set-nonpk-fields map-name="parameters" value-name="lookedUpValue"/>
        <store-value value-name="lookedUpValue"/>
        <field-to-result field-name="dataResourceId" map-name="lookedUpValue"/>
    </simple-method>
    <simple-method method-name="removeElectronicText" short-description="Remove Electronic Text">
        <make-value entity-name="ElectronicText" value-name="lookupKeyValue"/>
        <set-pk-fields map-name="parameters" value-name="lookupKeyValue"/>
        
        <find-by-primary-key entity-name="ElectronicText" map-name="lookupKeyValue" value-name="lookedUpValue"/>
        <remove-value value-name="lookedUpValue"/>
    </simple-method>

    <!-- Methods for OtherDataResource -->
    <simple-method method-name="createOtherDataResource" short-description="Create Other Data Resource">
        <make-value entity-name="OtherDataResource" value-name="newEntity"/>
        <set-nonpk-fields map-name="parameters" value-name="newEntity"/>
        <set-pk-fields map-name="parameters" value-name="newEntity"/>
        <create-value value-name="newEntity"/>
    </simple-method>
    <simple-method method-name="updateOtherDataResource" short-description="Update Other Data Resource">
        <make-value entity-name="OtherDataResource" value-name="lookupKeyValue"/>
        <set-pk-fields map-name="parameters" value-name="lookupKeyValue"/>
        <find-by-primary-key entity-name="OtherDataResource" map-name="lookupKeyValue" value-name="lookedUpValue"/>
        <set-nonpk-fields map-name="parameters" value-name="lookedUpValue"/>
        <store-value value-name="lookedUpValue"/>
    </simple-method>
    <simple-method method-name="removeOtherDataResource" short-description="Remove Other Data Resource">        
        <make-value entity-name="OtherDataResource" value-name="lookupKeyValue"/>
        <set-pk-fields map-name="parameters" value-name="lookupKeyValue"/>
        <find-by-primary-key entity-name="OtherDataResource" map-name="lookupKeyValue" value-name="lookedUpValue"/>
        <remove-value value-name="lookedUpValue"/>
    </simple-method>

    <!-- 
    getElectronicText
    Passed a Content GenericValue or a contentId, this service returns the text data from
        ElectronicText in result.textData.

    Not that this service does not now do permission checking.
    -->

    <simple-method method-name="getElectronicText" short-description="Get Electronic Text" login-required="false">
        <set field="userLogin" from-field="parameters.userLogin" />
        <set field="currentContent" from-field="parameters.content" />
        <log level="always" message="GETELECTRONICTEXT, currentContent:${currentContent}"/>
        
        <if-empty field-name="currentContent">
            <if-not-empty field-name="contentId" map-name="parameters">
                <set field="contextA.contentId" from-field="parameters.contentId" />
                <find-by-primary-key value-name="currentContent" entity-name="Content"
                         map-name="contextA" use-cache="true" />
            </if-not-empty>
            <if-empty field-name="currentContent" >
                <add-error>
                    <fail-message message="Neither content nor contentId supplied." />
                </add-error>
            </if-empty>
        </if-empty>
        <check-errors/>
        <if-empty field-name="dataResourceId" map-name="currentContent">
                <add-error>
                    <fail-message message="No dataResourceId found" />
                </add-error>
        </if-empty>
        <check-errors/>
        <field-to-result field-name="currentContent.dataResourceId" result-name="dataResourceId"/>    
        <set field="contextB.dataResourceId" from-field="currentContent.dataResourceId" />
        <find-by-primary-key value-name="eText" entity-name="ElectronicText"
                         map-name="contextB" use-cache="true" />
        <if-empty field-name="eText" >
                <add-error>
                    <fail-message message="Electronic Text not found." />
                </add-error>
        </if-empty>
        <check-errors/>


        <field-to-result map-name="eText" field-name="textData" result-name="textData"/>
        <log level="always" message="result:${result}"/>
        <log level="always" message="parameters:${parameters}"/>
    </simple-method>

</simple-methods>
