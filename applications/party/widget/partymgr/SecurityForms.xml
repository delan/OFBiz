<?xml version="1.0" encoding="UTF-8" ?>
<!--
 *  Copyright (c) 2004-2005 The Open For Business Project - www.ofbiz.org
 *
 *  Permission is hereby granted, free of charge, to any person obtaining a
 *  copy of this software and associated documentation files (the "Software"),
 *  to deal in the Software without restriction, including without limitation
 *  the rights to use, copy, modify, merge, publish, distribute, sublicense,
 *  and/or sell copies of the Software, and to permit persons to whom the
 *  Software is furnished to do so, subject to the following conditions:
 *
 *  The above copyright notice and this permission notice shall be included
 *  in all copies or substantial portions of the Software.
 *
 *  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS
 *  OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 *  MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.
 *  IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY
 *  CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT
 *  OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR
 *  THE USE OR OTHER DEALINGS IN THE SOFTWARE.
-->

<forms xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
        xsi:noNamespaceSchemaLocation="http://www.ofbiz.org/dtds/widget-form.xsd">
    <form name="ListSecurityGroups" type="list"  list-name="securityGroups" paginate-target="FindSecurityGroup"
             default-title-style="tableheadtext" default-widget-style="inputBox" default-tooltip-style="tabletext">
        <actions>
            <entity-condition entity-name="SecurityGroup">
                <order-by field-name="description"/>
            </entity-condition>
        </actions>
        
        <field name="groupId" title="${uiLabelMap.PartySecurityGroupId}" widget-style="buttontext">
            <hyperlink also-hidden="false" description="[${groupId}]" target="EditSecurityGroup?groupId=${groupId}"/>
        </field>
        <field name="description" title="${uiLabelMap.CommonDescription}"><display/></field>
    </form>
    <form name="EditSecurityGroup" type="single" 
            target="updateSecurityGroup" title="" default-map-name="securityGroup"
            default-title-style="tableheadtext" default-widget-style="inputBox" default-tooltip-style="tabletext">
        <alt-target use-when="securityGroup==null" target="createSecurityGroup"/>
        <auto-fields-service service-name="updateSecurityGroup" map-name="securityGroup"/>
 
        <field use-when="securityGroup!=null" name="groupId" title="${uiLabelMap.PartySecurityGroupId}"  tooltip="${uiLabelMap.CommonNotModifRecreat}"><display/></field>
        <field use-when="securityGroup==null&amp;&amp;groupId==null" name="groupId" title="${uiLabelMap.PartySecurityGroupId}"><text size="20" maxlength="20"/></field>
        <field use-when="securityGroup==null&amp;&amp;groupId!=null" name="groupId" title="${uiLabelMap.PartySecurityGroupId}" tooltip="${uiLabelMap.CommonCannotBeFound}: [${groupId}]"><text size="20" maxlength="20"/></field>

        <field name="description" title="${uiLabelMap.CommonDescription}"><text size="60" maxlength="250"/></field>
        <field name="submitButton" title="${uiLabelMap.CommonUpdate}" widget-style="smallSubmit"><submit button-type="button"/></field>
    </form>

    <!-- SecurityGroupPermission -->
    <form name="ListSecurityGroupPermissions" type="list"  list-name="securityGroupPermissions"  target=""
            default-title-style="tableheadtext" default-widget-style="inputBox" default-tooltip-style="tabletext">
        <actions>
            <entity-condition entity-name="SecurityGroupPermission">
                <condition-expr field-name="groupId" env-name="groupId"/>
                <order-by field-name="permissionId"/>
            </entity-condition>
        </actions>
        
        <field name="groupId"><hidden/></field>
        <field name="permissionId" title="${uiLabelMap.PartyPermissionId}" widget-style="tabletext"><display-entity entity-name="SecurityPermission" description="[${permissionId}] ${description}"/></field>
        <field name="deleteLink" title="" widget-style="buttontext">
            <hyperlink target="removeSecurityPermissionFromSecurityGroup?permissionId=${permissionId}&amp;groupId=${groupId}"
                description="[${uiLabelMap.CommonRemove}]" also-hidden="false"/>
        </field>
    </form>
    <form name="AddSecurityGroupPermission" type="single" 
            target="addSecurityPermissionToSecurityGroup" title=""
            default-title-style="tableheadtext" default-widget-style="inputBox" default-tooltip-style="tabletext">
        <auto-fields-service service-name="addSecurityPermissionToSecurityGroup"/>

        <field name="groupId"><hidden/></field>
        <field name="permissionId" title="${uiLabelMap.PartyPermissionId}">
            <drop-down allow-empty="false">
                <entity-options entity-name="SecurityPermission" description="[${permissionId}] ${description}">
                    <entity-order-by field-name="permissionId"/>
                </entity-options> 
            </drop-down>
        </field>
        <field name="submitButton" title="${uiLabelMap.CommonAdd}" widget-style="smallSubmit"><submit button-type="button"/></field>
    </form>
    <form name="AddSecurityGroupPermissionManual" type="single" 
        target="addSecurityPermissionToSecurityGroup" title=""
        default-title-style="tableheadtext" default-widget-style="inputBox" default-tooltip-style="tabletext">
        <auto-fields-service service-name="addSecurityPermissionToSecurityGroup"/>
        
        <field name="groupId"><hidden/></field>
        <field name="permissionId" title="${uiLabelMap.PartyPermissionId}"/>
        <field name="submitButton" title="${uiLabelMap.CommonAdd}" widget-style="smallSubmit"><submit button-type="button"/></field>
    </form>

    <!-- SecurityGroupUserLogin -->    
    <form name="ListSecurityGroupUserLogins" type="list" list-name="userLoginSecurityGroups" target="updateUserLoginToSecurityGroup"
            default-title-style="tableheadtext" default-widget-style="inputBox" default-tooltip-style="tabletext">
        <actions>
            <entity-condition entity-name="UserLoginAndSecurityGroup">
                <condition-expr field-name="groupId" env-name="groupId"/>
                <order-by field-name="userLoginId"/>
            </entity-condition>
        </actions>
        
        <field name="groupId"><hidden/></field>
        <field name="userLoginId" title="${uiLabelMap.PartyUserLoginId}" widget-style="tabletext"><display/></field>
        <field name="fromDate" title="${uiLabelMap.CommonFromDate}"><display/></field>
        <field name="thruDate" title="${uiLabelMap.CommonThruDate}" widget-style="inputBox"><date-time/></field>
        <field name="partyId" title="${uiLabelMap.PartyParty}" widget-style="tabletext">
            <display-entity entity-name="PartyNameView" also-hidden="false" description="${firstName} ${middleName} ${lastName} ${groupName}">
                <sub-hyperlink target="viewprofile?partyId=${partyId}" description="[${partyId}]" link-style="buttontext"/>
            </display-entity>
        </field>
        <field name="submitButton" title="${uiLabelMap.CommonUpdate}" widget-style="smallSubmit"><submit button-type="button"/></field>
        <field name="deleteLink" title="" widget-style="buttontext">
            <hyperlink description="[${uiLabelMap.CommonRemove}]" target="removeUserLoginFromSecurityGroup?userLoginId=${userLoginId}&amp;groupId=${groupId}&amp;fromDate=${fromDate}" also-hidden="false"/>
        </field>
    </form>
    <form name="AddSecurityGroupUserLogin" type="single" 
        target="addUserLoginToSecurityGroup" title=""
        default-title-style="tableheadtext" default-widget-style="inputBox" default-tooltip-style="tabletext">
        <auto-fields-service service-name="addUserLoginToSecurityGroup"/>
        
        <field name="groupId"><hidden/></field>
        <field name="userLoginId" title="${uiLabelMap.PartyUserLoginId}"><lookup target-form-name="LookupPartyAndUserLoginAndPerson" size="30"></lookup></field>
        
        <field name="submitButton" title="${uiLabelMap.CommonAdd}" widget-style="smallSubmit"><submit button-type="button"/></field>
    </form>
    
    <form name="ListUserLoginSecurityGroups" type="list" extends="ListSecurityGroupUserLogins"
            list-name="userLoginSecurityGroups" target="userLogin_updateUserLoginToSecurityGroup">
        <actions>
            <entity-condition entity-name="UserLoginAndSecurityGroup">
                <condition-expr field-name="userLoginId" env-name="userLoginId"/>
                <order-by field-name="groupId"/>
            </entity-condition>
        </actions>

        <field name="partyId"><hidden value="${partyId}"/></field>
        <field name="groupId" title="${uiLabelMap.CommonGroup}" widget-style="tabletext">
            <display-entity entity-name="SecurityGroup">
                <sub-hyperlink target="EditSecurityGroup?groupId=${groupId}" description="[${groupId}]" link-style="buttontext"/>
            </display-entity>
        </field>
        <field name="userLoginId"><hidden/></field>
        <field name="fromDate" title="${uiLabelMap.CommonFromDate}"><display/></field>
        <field name="thruDate" title="${uiLabelMap.CommonThruDate}" widget-style="inputBox"><date-time/></field>
        <field name="submitButton" title="${uiLabelMap.CommonUpdate}" widget-style="smallSubmit"><submit button-type="button"/></field>
        <field name="deleteLink" title="" widget-style="buttontext">
            <hyperlink description="[${uiLabelMap.CommonRemove}]" target="userLogin_removeUserLoginFromSecurityGroup?partyId=${partyId}&amp;userLoginId=${userLoginId}&amp;groupId=${groupId}&amp;fromDate=${fromDate}" also-hidden="false"/>
        </field>
    </form>
    <form name="AddUserLoginSecurityGroup" type="single" target="userLogin_addUserLoginToSecurityGroup"
        default-title-style="tableheadtext" default-widget-style="inputBox" default-tooltip-style="tabletext">
        <auto-fields-service service-name="addUserLoginToSecurityGroup"/>
        
        <field name="partyId"><hidden value="${partyId}"/></field>
        <field name="userLoginId"><hidden/></field>
        <field name="groupId" title="${uiLabelMap.CommonGroup}">
            <drop-down allow-empty="false">
                <entity-options entity-name="SecurityGroup" description="[${groupId}] ${description}">
                    <entity-order-by field-name="description"/>
                </entity-options>
            </drop-down>
        </field>
        
        <field name="submitButton" title="${uiLabelMap.CommonAdd}" widget-style="smallSubmit"><submit button-type="button"/></field>
    </form>
</forms>
