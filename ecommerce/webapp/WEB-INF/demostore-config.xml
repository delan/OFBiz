<?xml version="1.0" encoding="UTF-8" ?>

<site-conf>
    <description>DemoStore Site Configuration File</description>
    
    <owner>unused</owner>
    <datasource>unused</datasource>
    <errorpage>/error/error.jsp</errorpage>

    <!-- Security Mappings -->
    <request-map>
        <uri>checkLogin</uri><secure>false</secure><auth>false</auth>
        <event-type>java</event-type><event-path>org.ofbiz.core.security.WebEventSecurity</event-path><event-invoke>checkLogin</event-invoke>
        <success>view:main</success><error>view:login</error>
    </request-map>
    <request-map>
        <uri>login</uri><secure>true</secure><auth>false</auth>
        <event-type>java</event-type><event-path>org.ofbiz.core.security.WebEventSecurity</event-path><event-invoke>login</event-invoke>
        <success>request:updatedistributor</success><error>view:login</error>
    </request-map>
    <request-map>
        <uri>logout</uri><secure>true</secure><auth>true</auth>
        <event-type>java</event-type><event-path>org.ofbiz.core.security.WebEventSecurity</event-path><event-invoke>logout</event-invoke>
        <success>view:main</success><error>view:main</error>
    </request-map>
    <view-map><view>login</view><mapped-page>/login.jsp</mapped-page></view-map>
    <!-- End of Security Mappings -->

    <!-- Request Mappings -->
    <request-map>
        <uri>setdistributor</uri><secure>true</secure><auth>false</auth>
        <event-type>java</event-type><event-path>org.ofbiz.ecommerce.distributor.DistributorEvents</event-path><event-invoke>setDistributor</event-invoke>
        <success>view:main</success><error>view:main</error>
    </request-map>
    <request-map>
        <uri>updatedistributor</uri><secure>true</secure><auth>false</auth>
        <event-type>java</event-type><event-path>org.ofbiz.ecommerce.distributor.DistributorEvents</event-path><event-invoke>updateAssociatedDistributor</event-invoke>
        <success>view:main</success>
        <error>view:main</error>
    </request-map>

    <request-map>
        <uri>view</uri>
        <secure>false</secure>
        <auth>false</auth>
        <success>view:main</success>
        <error>view:error</error>
    </request-map>
    <request-map>
        <uri>authview</uri>
        <secure>false</secure>
        <auth>true</auth>
        <success>view:main</success>
        <error>view:error</error>
    </request-map>
    <request-map>
        <uri>chain</uri>
        <event-type>java</event-type>
        <event-path>org.ofbiz.core.event.TestEvent</event-path>
        <event-invoke>test</event-invoke>
        <success>request:/view</success>
        <error>view:error</error>
    </request-map>
    <request-map><uri>main</uri><secure>false</secure><auth>false</auth><success>view:main</success></request-map>

    <request-map>
      <uri>additem</uri>
      <event-type>java</event-type>
      <event-path>org.ofbiz.ecommerce.shoppingcart.ShoppingCartEvents</event-path>
      <event-invoke>addToCart</event-invoke>
      <success>view:showcart</success>
      <error>view:showcart</error>
    </request-map>
    <request-map>
      <uri>addordertocart</uri>
      <event-type>java</event-type>
      <event-path>org.ofbiz.ecommerce.shoppingcart.ShoppingCartEvents</event-path>
      <event-invoke>addToCartFromOrder</event-invoke>
      <success>view:showcart</success>
      <error>view:orderstatus</error>
    </request-map>
    <request-map>
      <uri>addseparator</uri>
      <event-type>java</event-type>
      <event-path>org.ofbiz.ecommerce.shoppingcart.ShoppingCartEvents</event-path>
      <event-invoke>addSeparator</event-invoke>
      <success>view:showcart</success>
      <error>view:showcart</error>
    </request-map>
    <request-map>
      <uri>modifycart</uri>
      <event-type>java</event-type>
      <event-path>org.ofbiz.ecommerce.shoppingcart.ShoppingCartEvents</event-path>
      <event-invoke>modifyCart</event-invoke>
      <success>view:showcart</success>
      <error>view:showcart</error>
    </request-map>		
    <request-map>
      <uri>emptycart</uri>
      <event-type>java</event-type>
      <event-path>org.ofbiz.ecommerce.shoppingcart.ShoppingCartEvents</event-path>
      <event-invoke>clearCart</event-invoke>
      <success>view:showcart</success>
      <error>view:showcart</error>
    </request-map>		

    <request-map>
      <uri>checkoutoptions</uri><secure>true</secure><auth>true</auth>
      <event-type>java</event-type>
      <event-path>org.ofbiz.ecommerce.checkout.CheckOutEvents</event-path>
      <event-invoke>cartNotEmpty</event-invoke> 
      <success>view:checkoutoptions</success>
      <error>view:main</error>
    </request-map>
    <request-map>
      <uri>checkout</uri><secure>true</secure><auth>true</auth>
      <event-type>java</event-type>
      <event-path>org.ofbiz.ecommerce.checkout.CheckOutEvents</event-path>
      <event-invoke>setCheckOutOptions</event-invoke> 
      <success>view:checkout</success>
      <error>request:checkoutoptions</error>
    </request-map>
    <request-map>
      <uri>processorder</uri>
      <secure>true</secure>
      <auth>false</auth>
      <success>request:createorder</success>
    </request-map>
    <request-map>
      <uri>createorder</uri><secure>true</secure><auth>true</auth>
      <event-type>java</event-type>
      <event-path>org.ofbiz.ecommerce.checkout.CheckOutEvents</event-path>
      <event-invoke>createOrder</event-invoke> 
      <success>request:renderconfirmorder</success>
      <error>view:checkout</error>
    </request-map>		
    <request-map>
      <uri>renderconfirmorder</uri><secure>true</secure><auth>true</auth>
      <event-type>java</event-type>
      <event-path>org.ofbiz.ecommerce.checkout.CheckOutEvents</event-path>
      <event-invoke>renderConfirmOrder</event-invoke> 
      <success>request:emailorder</success>
      <error>view:orderhistory</error>
    </request-map>		
    <request-map><uri>confirmorder</uri><secure>false</secure><auth>false</auth><success>view:confirmorder</success></request-map>		
    <request-map>
      <uri>emailorder</uri><secure>true</secure><auth>true</auth>
      <event-type>java</event-type>
      <event-path>org.ofbiz.ecommerce.checkout.CheckOutEvents</event-path>
      <event-invoke>emailOrder</event-invoke> 
      <success>view:showconfirmorder</success>
      <error>view:showconfirmorder</error>
    </request-map>		

    <request-map><uri>catalog</uri><success>view:catalog</success></request-map>
    <request-map><uri>category</uri><success>view:category</success></request-map>
    <request-map><uri>product</uri><success>view:product</success></request-map>	
    <request-map><uri>keywordsearch</uri><success>view:keywordsearch</success></request-map>	

    <request-map><uri>orderhistory</uri><secure>true</secure><auth>true</auth><success>view:orderhistory</success></request-map>
    <request-map><uri>orderstatus</uri><secure>true</secure><auth>true</auth><success>view:orderstatus</success></request-map>

    <request-map><uri>newcustomer</uri><secure>true</secure><auth>false</auth><success>view:newcustomer</success></request-map>
    <request-map>
      <uri>createcustomer</uri><secure>true</secure><auth>false</auth>
      <event-type>java</event-type><event-path>org.ofbiz.ecommerce.customer.CustomerEvents</event-path><event-invoke>createCustomer</event-invoke>
      <success>view:main</success><error>view:newcustomer</error>
    </request-map>

    <request-map><uri>viewprofile</uri><secure>true</secure><auth>true</auth><success>view:viewprofile</success></request-map>
    <request-map><uri>editcontactmech</uri><secure>true</secure><auth>true</auth><success>view:editcontactmech</success></request-map>
    <request-map>
      <uri>updatecontactmech</uri><secure>true</secure><auth>true</auth>
      <event-type>java</event-type><event-path>org.ofbiz.ecommerce.customer.CustomerEvents</event-path><event-invoke>updateContactMech</event-invoke>
      <success>view:editcontactmech</success><error>view:editcontactmech</error>
    </request-map>
    <request-map>
      <uri>createpartycontactmechpurpose</uri><secure>true</secure><auth>true</auth>
      <event-type>java</event-type><event-path>org.ofbiz.ecommerce.customer.CustomerEvents</event-path><event-invoke>createPartyContactMechPurpose</event-invoke>
      <success>view:editcontactmech</success><error>view:editcontactmech</error>
    </request-map>
    <request-map>
      <uri>deletepartycontactmechpurpose</uri><secure>true</secure><auth>true</auth>
      <event-type>java</event-type><event-path>org.ofbiz.ecommerce.customer.CustomerEvents</event-path><event-invoke>deletePartyContactMechPurpose</event-invoke>
      <success>view:editcontactmech</success><error>view:editcontactmech</error>
    </request-map>

    <request-map><uri>editcreditcard</uri><secure>true</secure><auth>true</auth><success>view:editcreditcard</success></request-map>
    <request-map>
      <uri>updatecreditcard</uri><secure>true</secure><auth>true</auth>
      <event-type>java</event-type><event-path>org.ofbiz.ecommerce.customer.CustomerEvents</event-path><event-invoke>updateCreditCardInfo</event-invoke>
      <success>view:editcreditcard</success><error>view:editcreditcard</error>
    </request-map>

    <request-map><uri>editperson</uri><secure>true</secure><auth>true</auth><success>view:editperson</success></request-map>
    <request-map>
      <uri>updateperson</uri><secure>true</secure><auth>true</auth>
      <event-type>java</event-type><event-path>org.ofbiz.ecommerce.customer.CustomerEvents</event-path><event-invoke>updatePerson</event-invoke>
      <success>view:editperson</success><error>view:editperson</error>
    </request-map>

    <request-map><uri>changepassword</uri><secure>true</secure><auth>true</auth><success>view:changepassword</success></request-map>
    <request-map>
      <uri>updatepassword</uri><secure>true</secure><auth>true</auth>
      <event-type>java</event-type><event-path>org.ofbiz.ecommerce.customer.CustomerEvents</event-path><event-invoke>changePassword</event-invoke>
      <success>view:changepassword</success><error>view:changepassword</error>
    </request-map>

    <request-map>
        <uri>forgotpassword</uri><secure>true</secure><auth>false</auth>
        <event-type>java</event-type><event-path>org.ofbiz.ecommerce.customer.CustomerEvents</event-path><event-invoke>forgotPassword</event-invoke>
        <success>view:login</success><error>view:login</error>
    </request-map>
    <!-- end of request mappings -->

    <!-- View Mappings -->
    <view-map><view>error</view><mapped-page>/error/error.jsp</mapped-page></view-map>
    <view-map><view>main</view><mapped-page>/main.jsp</mapped-page></view-map>
    <view-map><view>showcart</view><mapped-page>/cart/showcart.jsp</mapped-page></view-map>
    <view-map><view>catalog</view><mapped-page>/catalog/catalog.jsp</mapped-page></view-map>
    <view-map><view>category</view><mapped-page>/catalog/category.jsp</mapped-page></view-map>
    <view-map><view>product</view><mapped-page>/catalog/product.jsp</mapped-page></view-map>
    <view-map><view>keywordsearch</view><mapped-page>/catalog/keywordsearch.jsp</mapped-page></view-map>

    <view-map><view>shippingAddress</view><mapped-page>/shipping/shipping.jsp</mapped-page></view-map>

    <view-map><view>checkoutoptions</view><secure>true</secure><auth>true</auth><mapped-page>/order/checkoutoptions.jsp</mapped-page></view-map>
    <view-map><view>checkout</view><secure>true</secure><auth>true</auth><mapped-page>/order/checkout.jsp</mapped-page></view-map>
    <view-map><view>confirmorder</view><mapped-page>/order/confirmorder.jsp</mapped-page></view-map>
    <view-map><view>showconfirmorder</view><secure>true</secure><auth>true</auth><mapped-page>/order/showconfirmorder.jsp</mapped-page></view-map>
    <view-map><view>orderhistory</view><secure>true</secure><auth>true</auth><mapped-page>/order/orderhistory.jsp</mapped-page></view-map>
    <view-map><view>orderstatus</view><secure>true</secure><auth>true</auth><mapped-page>/order/orderstatus.jsp</mapped-page></view-map>

    <view-map><view>viewprofile</view><secure>true</secure><auth>true</auth><mapped-page>/customer/viewprofile.jsp</mapped-page></view-map>
    <view-map><view>newcustomer</view><mapped-page>/customer/newcustomer.jsp</mapped-page></view-map>
    <view-map><view>editcontactmech</view><secure>true</secure><auth>true</auth><mapped-page>/customer/editcontactmech.jsp</mapped-page></view-map>
    <view-map><view>editcreditcard</view><secure>true</secure><auth>true</auth><mapped-page>/customer/editcreditcard.jsp</mapped-page></view-map>
    <view-map><view>changepassword</view><secure>true</secure><auth>true</auth><mapped-page>/customer/changepassword.jsp</mapped-page></view-map>
    <view-map><view>editperson</view><mapped-page>/customer/editperson.jsp</mapped-page></view-map>
    <!-- end of view mappings -->
</site-conf>
