<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE entity-eca PUBLIC "-//OFBiz//DTD Entity ECA Config//EN" "http://www.ofbiz.org/dtds/entity-eca.dtd">

<entity-eca>
    <!-- Product Keyword Indexing ECAs -->
    <eca entity="Product" operation="create-store" event="return">
        <condition field-name="autoCreateKeywords" operator="not-equals" value="N"/>
        <action service="indexProductKeywords" mode="sync" value-attr="productInstance"/>
    </eca>
    <eca entity="ProductAttribute" operation="create-store" event="return">
        <action service="indexProductKeywords" mode="sync"/>
    </eca>
    <eca entity="ProductFeatureAppl" operation="create-store" event="return">
        <action service="indexProductKeywords" mode="sync"/>
    </eca>
    <eca entity="ProductContent" operation="create-store" event="return">
        <action service="indexProductKeywords" mode="sync"/>
    </eca>

    <eca entity="InventoryItem" operation="create-store" event="return">
        <condition field-name="productId" operator="is-not-empty"/>
        <condition field-name="availableToPromise" operator="less-equals" value="0" type="Double"/>
        <action service="checkProductInventoryDiscontinuation" mode="async"/>
    </eca>
</entity-eca>
