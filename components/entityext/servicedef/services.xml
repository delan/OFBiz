<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE services PUBLIC "-//OFBiz//DTD Services Config//EN" "http://www.ofbiz.org/dtds/services.dtd">

<services>
    <description>Entity Extension Services</description>
    <vendor>OFBiz</vendor>
    <version>1.0</version>	
    
    <!-- Entity Engine Extension Services -->
    <service name="distributedClearAllEntityCaches" engine="jms" location="serviceMessenger" invoke="clearAllEntityCaches" auth="true">
        <description>Clear All Entity Engine Caches for all Servers listening to the topic</description>
    </service>
    <!-- Below uses Group/HTTP engine 
    <service name="distributedClearAllEntityCaches" engine="group" location="distributedClearAllEntityCaches" invoke=""/>
    -->
    <service name="clearAllEntityCaches" engine="java"
            location="org.ofbiz.entityext.cache.EntityCacheServices" invoke="clearAllEntityCaches" auth="true">
        <description>Clears all values from all Entity Engine caches. By default does not distribute.</description>
        <attribute name="distribute" type="Boolean" mode="IN" optional="true"/>
    </service>

    <service name="distributedClearCacheLineByValue" engine="jms" location="serviceMessenger" invoke="clearCacheLineByValue" auth="true">
        <description>Clear Cache Line by value for all Servers listening to the topic</description>
        <attribute name="value" type="GenericValue" mode="IN" optional="false"/>
    </service>
    <!-- Below uses Group/HTTP engine
    <service name="distributedClearCacheLineByValue" engine="group" location="distributedClearCacheLineByValue" invoke=""/>
    -->
    <service name="clearCacheLineByValue" engine="java"
            location="org.ofbiz.extentity.cache.EntityCacheServices" invoke="clearCacheLine" auth="true">
        <description>Clear Cache Line with a value (GenericValue); this is the preferred method since the all, by primary key and by and caches will be cleared. By default does not distribute.</description>
        <attribute name="value" type="GenericValue" mode="IN" optional="false"/>
        <attribute name="distribute" type="Boolean" mode="IN" optional="true"/>
    </service>

    <service name="distributedClearCacheLineByDummyPK" engine="jms" location="serviceMessenger" invoke="clearCacheLineByDummyPK" auth="true">
        <description>Clear Cache Line by dummyPK for all Servers listening to the topic</description>
        <attribute name="dummyPK" type="GenericEntity" mode="IN" optional="false"/>
    </service>
    <!-- Below uses Group/HTTP engine
    <service name="distributedClearCacheLineByDummyPK" engine="group" location="distributedClearCacheLineByDummyPK" invoke=""/>
    -->
    <service name="clearCacheLineByDummyPK" engine="java"
            location="org.ofbiz.extentity.cache.EntityCacheServices" invoke="clearCacheLine" auth="true">
        <description>Clear Cache Line with a dummyPK (GenericEntity); clears that all cache entry and depending on whether the dummyPK is a primaryKey or not this clears the by primary key cache or the specified entry in the by and cache. By default does not distribute.</description>
        <attribute name="dummyPK" type="GenericEntity" mode="IN" optional="false"/>
        <attribute name="distribute" type="Boolean" mode="IN" optional="true"/>
    </service>
    
    <service name="distributedClearCacheLineByPrimaryKey" engine="jms" location="serviceMessenger" invoke="clearCacheLineByPrimaryKey" auth="true">
        <description>Clear Cache Line by primaryKey for all Servers listening to the topic</description>
        <attribute name="primaryKey" type="GenericPK" mode="IN" optional="false"/>
        <attribute name="distribute" type="Boolean" mode="IN" optional="true"/>
    </service>
    <!-- Below uses Group/HTTP engine
    <service name="distributedClearCacheLineByPrimaryKey" engine="group" location="distributedClearCacheLineByPrimaryKey" invoke=""/>
    -->
    <service name="clearCacheLineByPrimaryKey" engine="java"
            location="org.ofbiz.entityext.cache.EntityCacheServices" invoke="clearCacheLine" auth="true">
        <description>Clear Cache Line with a primaryKey (GenericPK); clears the all and by primary key caches. By default does not distribute.</description>
        <attribute name="primaryKey" type="GenericPK" mode="IN" optional="false"/>
        <attribute name="distribute" type="Boolean" mode="IN" optional="true"/>
    </service>
    
    <!-- HTTP Engine localhost cache clearing (example: duplicate entire block for each server) -->
    <service name="localhostClearAllEntityCaches" engine="http"
            location="http://localhost:8080/webtools/control/httpService" invoke="clearAllEntityCaches">
        <attribute name="distribute" type="Boolean" mode="IN" optional="true"/>
    </service>
    <service name="localhostClearCacheLineByValue" engine="http"
            location="http://localhost:8080/webtools/control/httpService" invoke="clearCacheLineByValue">
        <attribute name="value" type="GenericValue" mode="IN" optional="false"/>
        <attribute name="distribute" type="Boolean" mode="IN" optional="true"/>
    </service>
    <service name="localhostClearCacheLineByDummyPK" engine="http"
            location="http://localhost:8080/webtools/control/httpService" invoke="clearCacheLineByDummyPK">
        <attribute name="dummyPK" type="GenericEntity" mode="IN" optional="false"/>
        <attribute name="distribute" type="Boolean" mode="IN" optional="true"/>
    </service>
    <service name="localhostClearCacheLineByPrimaryKey" engine="http"
            location="http://localhost:8080/webtools/control/httpService" invoke="clearCacheLineByPrimaryKey">
        <attribute name="primaryKey" type="GenericPK" mode="IN" optional="false"/>
        <attribute name="distribute" type="Boolean" mode="IN" optional="true"/>
    </service>
</services>
