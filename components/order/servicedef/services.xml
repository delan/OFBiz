<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE services PUBLIC "-//OFBiz//DTD Services Config//EN" "http://www.ofbiz.org/dtds/services.dtd">

<services>
    <description>Common Application Components Order Services</description>
    <vendor>OFBiz</vendor>
    <version>1.0</version>

    <!-- Order processing services -->
    <service name="processOrderWf" engine="workflow" location="org.ofbiz.order" invoke="ProcessOrder">
        <description>Service for testing the workflow engine</description>
        <attribute name="orderId" type="String" mode="IN" optional="false"/>
    </service>

    <service name="prepareOrderEmailData" engine="java"
            location="org.ofbiz.order.order.OrderServices" invoke="prepareOrderEmailData">
        <description>Prepares the data for a order notification email</description>
        <attribute name="orderId" type="String" mode="INOUT" optional="false"/>
        <attribute name="orderItemSeqId" type="String" mode="INOUT" optional="true"/>
        <attribute name="orderHeader" type="Map" mode="OUT" optional="false"/>
        <attribute name="orderItems" type="List" mode="OUT" optional="false"/>
        <attribute name="orderAdjustments" type="List" mode="OUT" optional="false"/>
        <attribute name="orderHeaderAdjustments" type="List" mode="OUT" optional="false"/>
        <attribute name="orderSubTotal" type="Double" mode="OUT" optional="false"/>
        <attribute name="statusString" type="String" mode="OUT" optional="false"/>
        <attribute name="headerAdjustmentsToShow" type="List" mode="OUT" optional="false"/>
        <attribute name="orderShippingTotal" type="Double" mode="OUT" optional="false"/>
        <attribute name="orderTaxTotal" type="Double" mode="OUT" optional="false"/>
        <attribute name="orderGrandTotal" type="Double" mode="OUT" optional="false"/>
        <attribute name="placingCustomerPerson" type="GenericValue" mode="OUT" optional="true"/>
        <attribute name="shippingAddress" type="GenericValue" mode="OUT" optional="true"/>
        <attribute name="billingAccount" type="GenericValue" mode="OUT" optional="true"/>
        <attribute name="paymentMethods" type="List" mode="OUT" optional="true"/>
        <attribute name="paymentMethodType" type="GenericValue" mode="OUT" optional="true"/>
        <attribute name="orderShipmentInfoSummaryList" type="List" mode="OUT" optional="true"/>
        <attribute name="creditCard" type="GenericValue" mode="OUT" optional="true"/>
        <attribute name="formattedCardNumber" type="String" mode="OUT" optional="true"/>
        <attribute name="eftAccount" type="GenericValue" mode="OUT" optional="true"/>
        <attribute name="carrierPartyId" type="String" mode="OUT" optional="true"/>
        <attribute name="shipmentMethodTypeId" type="String" mode="OUT" optional="true"/>
        <attribute name="shipMethDescription" type="String" mode="OUT" optional="true"/>
        <attribute name="shippingInstructions" type="String" mode="OUT" optional="true"/>
        <attribute name="maySplit" type="Boolean" mode="OUT" optional="true"/>
        <attribute name="giftMessage" type="String" mode="OUT" optional="true"/>
        <attribute name="isGift" type="Boolean" mode="OUT" optional="true"/>
        <attribute name="trackingNumber" type="String" mode="OUT" optional="true"/>
        <attribute name="customerPoNumber" type="String" mode="OUT" optional="true"/>
    </service>
    <service name="prepareOrderEmail" engine="java"
            location="org.ofbiz.order.order.OrderServices" invoke="prepareOrderEmail">
        <description>Service to prepare (template, addresses, etc) the order notification</description>
        <attribute name="orderId" type="String" mode="IN" optional="false"/>
        <attribute name="emailType" type="String" mode="INOUT" optional="false"/>
        <attribute name="templateName" type="String" mode="OUT" optional="false"/>
        <attribute name="subject" type="String" mode="OUT" optional="false"/>
        <attribute name="sendTo" type="String" mode="OUT" optional="false"/>
        <attribute name="sendFrom" type="String" mode="OUT" optional="false"/>
        <attribute name="sendCc" type="String" mode="OUT" optional="true"/>
        <attribute name="sendBcc" type="String" mode="OUT" optional="true"/>
        <attribute name="contentType" type="String" mode="OUT" optional="true"/>
    </service>
    <service name="prepareOrderConfirmation" engine="java"
            location="org.ofbiz.order.order.OrderServices" invoke="prepareOrderConfirmation">
        <description>Service to prepare (template, addresses, etc) the order confirmation</description>
        <implements service="prepareOrderEmail"/>
        <override name="emailType" mode="OUT"/>
    </service>
    <service name="prepareOrderComplete" engine="java"
            location="org.ofbiz.order.order.OrderServices" invoke="prepareOrderComplete">
        <description>Service to prepare (template, addresses, etc) the order notification</description>
        <implements service="prepareOrderEmail"/>
        <override name="emailType" mode="OUT"/>
    </service>
    <service name="prepareOrderBackorder" engine="java"
            location="org.ofbiz.order.order.OrderServices" invoke="prepareOrderBackorder">
        <description>Service to prepare (template, addresses, etc) the order notification</description>
        <implements service="prepareOrderEmail"/>
        <override name="emailType" mode="OUT"/>
    </service>
    <service name="prepareOrderChange" engine="java"
            location="org.ofbiz.order.order.OrderServices" invoke="prepareOrderChange">
        <description>Service to prepare (template, addresses, etc) the order notification</description>
        <implements service="prepareOrderEmail"/>
        <override name="emailType" mode="OUT"/>
    </service>
    <service name="prepareOrderPayRetry" engine="java"
            location="org.ofbiz.order.order.OrderServices" invoke="prepareOrderPayRetry">
        <description>Service to prepare (template, addresses, etc) the order notification</description>
        <implements service="prepareOrderEmail"/>
        <override name="emailType" mode="OUT"/>
    </service>
    <service name="sendOrderConfirmation" engine="java" require-new-transaction="true" max-retry="3"
            location="org.ofbiz.content.email.NotificationServices" invoke="sendNotification">
        <description>Send a order confirmation</description>
        <implements service="sendNotificationInterface"/>
        <attribute name="orderId" type="String" mode="IN" optional="false"/>
        <attribute name="emailType" type="String" mode="IN" optional="false"/>
    </service>
    <service name="sendOrderChangeNotification" engine="java" require-new-transaction="true" max-retry="3"
            location="org.ofbiz.content.email.NotificationServices" invoke="sendNotification">
        <description>Send a order notification</description>
        <implements service="sendNotificationInterface"/>
        <attribute name="orderId" type="String" mode="IN" optional="false"/>
        <attribute name="orderItemSeqId" type="String" mode="IN" optional="true"/>
        <attribute name="emailType" type="String" mode="IN" optional="false"/>
    </service>
    <service name="sendOrderCompleteNotification" engine="java" require-new-transaction="true" max-retry="3"
            location="org.ofbiz.content.email.NotificationServices" invoke="sendNotification">
        <description>Send a order notification</description>
        <implements service="sendNotificationInterface"/>
        <attribute name="orderId" type="String" mode="IN" optional="false"/>
        <attribute name="orderItemSeqId" type="String" mode="IN" optional="true"/>
        <attribute name="emailType" type="String" mode="IN" optional="false"/>
    </service>
    <service name="sendOrderBackorderNotification" engine="java" require-new-transaction="true" max-retry="3"
            location="org.ofbiz.content.email.NotificationServices" invoke="sendNotification">
        <description>Send a order notification</description>
        <implements service="sendNotificationInterface"/>
        <attribute name="orderId" type="String" mode="IN" optional="false"/>
        <attribute name="orderItemSeqId" type="String" mode="IN" optional="true"/>
        <attribute name="emailType" type="String" mode="IN" optional="false"/>
    </service>
    <service name="sendOrderPayRetryNotification" engine="java" require-new-transaction="true" max-retry="3"
            location="org.ofbiz.content.email.NotificationServices" invoke="sendNotification">
        <description>Send a order notification</description>
        <implements service="sendNotificationInterface"/>
        <attribute name="orderId" type="String" mode="IN" optional="false"/>
        <attribute name="orderItemSeqId" type="String" mode="IN" optional="true"/>
        <attribute name="emailType" type="String" mode="IN" optional="false"/>
    </service>

    <service name="sendProcessNotification" engine="java" require-new-transaction="true" max-retry="3"
            location="org.ofbiz.order.order.OrderServices" invoke="sendProcessNotification">
    	<description>Limit Service for order processing workflow; sends activitiy notifications</description>
    	<attribute name="workEffortId" type="String" mode="IN"/>
    	<attribute name="adminEmailList" type="String" mode="IN"/>
    	<attribute name="assignedPartyId" type="String" mode="IN" optional="true"/>
    	<attribute name="assignedRoleTypeId" type="String" mode="IN" optional="true"/>
    </service>

    <service name="createOrderNotificationLog" engine="simple"
            location="org/ofbiz/order/order/OrderSimpleMethods.xml" invoke="createNotificationLog">
        <description>Logs when a notification was sent</description>
        <attribute name="orderId" type="String" mode="IN" optional="false"/>
        <attribute name="emailType" type="String" mode="IN" optional="false"/>
    </service>

    <service name="storeOrder" engine="java" validate="true" auth="true"
            location="org.ofbiz.order.order.OrderServices" invoke="createOrder">
        <description>Creates order entities</description>
        <attribute name="partyId" type="String" mode="IN" optional="false"/>
        <attribute name="visitId" type="String" mode="IN" optional="true"/>
        <attribute name="affiliateId" type="String" mode="IN" optional="true"/>
        <attribute name="productStoreId" type="String" mode="IN" optional="true"/>
        <attribute name="webSiteId" type="String" mode="IN" optional="true"/>
        <attribute name="distributorId" type="String" mode="IN" optional="true"/>
        <attribute name="orderTypeId" type="String" mode="INOUT" optional="false"/>
        <attribute name="orderItems" type="java.util.List" mode="IN" optional="false"/>
        <attribute name="orderAdjustments" type="java.util.List" mode="IN" optional="false"/>
        <attribute name="billingAccountId" type="String" mode="IN" optional="true"/>
        <attribute name="shippingAmount" type="Double" mode="IN" optional="true"/>
        <attribute name="firstAttemptOrderId" type="String" mode="IN" optional="true"/>
        <attribute name="currencyUom" type="String" mode="IN" optional="false"/>
        <attribute name="grandTotal" type="Double" mode="IN" optional="true"/>
        <attribute name="taxAmount" type="Double" mode="IN" optional="true"/>
        <attribute name="orderShipmentPreferences" type="java.util.List" mode="IN" optional="true"/>
        <attribute name="orderPaymentPreferences" type="java.util.List" mode="IN" optional="true"/>
        <attribute name="orderContactMechs" type="java.util.List" mode="IN" optional="true"/>
        <attribute name="orderItemContactMechs" type="java.util.List" mode="IN" optional="true"/>
        <attribute name="orderItemPriceInfos" type="java.util.List" mode="IN" optional="true"/>
        <attribute name="orderProductPromoUses" type="java.util.List" mode="IN" optional="true"/>
        <attribute name="orderItemSurveyResponses" type="java.util.List" mode="IN" optional="true"/>
        <attribute name="trackingCodeOrders" type="java.util.List" mode="IN" optional="true"/>
        <attribute name="orderAdditionalPartyRoleMap" type="java.util.Map" mode="IN" optional="true"/>
        <attribute name="orderId" type="String" mode="OUT" optional="false"/>
        <attribute name="statusId" type="String" mode="OUT" optional="false"/>
    </service>

    <service name="createOrderItemBilling" engine="simple"
    	    location="org/ofbiz/order/order/OrderSimpleMethods.xml" invoke="createOrderItemBilling">
        <description>Create a new order item billing record</description>
        <attribute name="orderId" type="String" mode="IN" optional="false"/>
        <attribute name="orderItemSeqId" type="String" mode="IN" optional="false"/>
        <attribute name="invoiceId" type="String" mode="IN" optional="false"/>
        <attribute name="invoiceItemSeqId" type="String" mode="IN" optional="false"/>
        <attribute name="quantity" type="Double" mode="IN" optional="true"/>
        <attribute name="amount" type="Double" mode="IN" optional="true"/>
    </service>

    <service name="createOrderAdjustment" engine="simple"
            location="org/ofbiz/order/order/OrderSimpleMethods.xml" invoke="createOrderAdjustment">
        <description>Creates a new order adjustment record</description>
        <attribute name="orderAdjustmentTypeId" type="String" mode="IN" optional="false"/>
        <attribute name="orderId" type="String" mode="IN" optional="false"/>
        <attribute name="orderItemSeqId" type="String" mode="IN" optional="true"/>
        <attribute name="comments" type="String" mode="IN" optional="true"/>
        <attribute name="description" type="String" mode="IN" optional="true"/>
        <attribute name="amount" type="Double" mode="IN" optional="true"/>
        <attribute name="amountPerQuantity" type="Double" mode="IN" optional="true"/>
        <attribute name="percentage" type="Double" mode="IN" optional="true"/>
        <attribute name="productPromoId" type="String" mode="IN" optional="true"/>
        <attribute name="productPromoRuleId" type="String" mode="IN" optional="true"/>
        <attribute name="productPromoActionSeqId" type="String" mode="IN" optional="true"/>
        <attribute name="productFeatureId" type="String" mode="IN" optional="true"/>
        <attribute name="correspondingProductId" type="String" mode="IN" optional="true"/>
        <attribute name="sourceReferenceId" type="String" mode="IN" optional="true"/>
        <attribute name="includeInTax" type="Boolean" mode="IN" optional="true"/>
        <attribute name="includeInShipping" type="Boolean" mode="IN" optional="true"/>
        <attribute name="orderAdjustmentId" type="String" mode="OUT" optional="false"/>
    </service>

    <service name="updateTrackingNumber" engine="java"
            location="org.ofbiz.order.order.OrderServices" invoke="updateTrackingNumber">
        <description>Sets the tracking number on a shipment preference</description>
        <attribute name="orderId" type="String" mode="IN" optional="false"/>
        <attribute name="orderItemSeqId" type="String" mode="IN" optional="true"/>
        <attribute name="trackingNumber" type="String" mode="IN" optional="false"/>
    </service>

    <service name="resetGrandTotal" engine="java"
            location="org.ofbiz.order.order.OrderServices" invoke="resetGrandTotal" require-new-transaction="false">
        <!-- NOTE: require-new-transaction is false because this service is often run as a sync action on an ECA, so generally at the same time and in a separate TX it runs into locking problems -->
        <description>Reset the grandTotal of an existing order</description>
        <attribute name="orderId" type="String" mode="IN"/>
    </service>
    <service name="setEmptyGrandTotals" engine="java"
            location="org.ofbiz.order.order.OrderServices" invoke="setEmptyGrandTotals">
        <description>Find all OrderHeaders with no grandTotal and call resetGrandTotal</description>
        <attribute name="forceAll" type="Boolean" mode="IN" optional="true"/>
    </service>

    <service name="recalcShippingTotal" engine="java"
            location="org.ofbiz.order.order.OrderServices" invoke="recalcOrderShipping">
        <description>Adjust the order shipping amount</description>
        <attribute name="orderId" type="String" mode="IN"/>
    </service>
    <service name="recalcTaxTotal" engine="java"
            location="org.ofbiz.order.order.OrderServices" invoke="recalcOrderTax">
        <description>Adjust the order tax amount</description>
        <attribute name="orderId" type="String" mode="IN"/>
    </service>

    <service name="changeOrderStatus" engine="java" auth="true"
            location="org.ofbiz.order.order.OrderServices" invoke="setOrderStatus">
        <description>Change the status of an existing order</description>
        <attribute name="orderId" type="String" mode="IN"/>
        <attribute name="statusId" type="String" mode="IN"/>
        <attribute name="orderStatusId" type="String" mode="OUT" optional="true"/>
        <attribute name="needsInventoryIssuance" type="String" mode="OUT" optional="true"/>
        <attribute name="grandTotal" type="Double" mode="OUT" optional="true"/>
    </service>

    <service name="changeOrderItemStatus" engine="java" auth="true"
    		location="org.ofbiz.order.order.OrderServices" invoke="setItemStatus">
    	<description>Change the status of an existing order item</description>
    	<attribute name="orderId" type="String" mode="IN" optional="false"/>
    	<attribute name="orderItemSeqId" type="String" mode="IN" optional="true"/>
    	<attribute name="fromStatusId" type="String" mode="IN" optional="true"/>
    	<attribute name="statusId" type="String" mode="IN" optional="false"/>
    </service>

    <service name="cancelOrderItem" engine="java" auth="true"
    		location="org.ofbiz.order.order.OrderServices" invoke="cancelOrderItem">
    	<description>Cancel an Order Item Quantity</description>
    	<attribute name="orderId" type="String" mode="IN" optional="false"/>
    	<attribute name="orderItemSeqId" type="String" mode="IN" optional="true"/>
    	<attribute name="cancelQuantity" type="Double" mode="IN" optional="true"/>
    </service>

    <service name="checkOrderItemStatus" engine="java"
    		location="org.ofbiz.order.order.OrderServices" invoke="checkItemStatus">
    	<description>Check the status of all items and cancel/complete the order if we can</description>
    	<attribute name="orderId" type="String" mode="IN" optional="false"/>
    </service>

    <service name="updateOrderStatusFromReceipt" engine="simple"
    		location="org/ofbiz/order/order/OrderSimpleMethods.xml" invoke="updateOrderStatusFromReceipt">
    	<description>Updates the (purchase) order/order item status based on receipt</description>
    	<attribute name="orderId" type="String" mode="IN" optional="false"/>
    	<attribute name="currentStatusId" type="String" mode="OUT" optional="false"/>
    </service>

    <service name="autoCancelOrderItems" engine="java"
            location="org.ofbiz.order.order.OrderServices" invoke="cancelFlaggedSalesOrders">
        <description>Batch service for doing auto-cancel on set items</description>
        <!-- this service has no parameters IN or OUT -->
    </service>

    <service name="setAllowOrderSplit" engine="java" auth="true"
            location="org.ofbiz.order.order.OrderServices" invoke="allowOrderSplit">
        <description>Set the Allow Split Flag To 'Y' (true)</description>
        <attribute name="orderId" type="String" mode="IN" optional="false"/>
        <attribute name="orderItemSeqId" type="String" mode="IN" optional="true"/>
    </service>

    <service name="addOrderRole" engine="java"
            location="org.ofbiz.order.order.OrderServices" invoke="addRoleType">
        <description>Adds a RoleType to an order</description>
        <attribute name="removeOld" type="Boolean" mode="IN" optional="true"/>
        <attribute name="orderId" type="String" mode="IN"/>
        <attribute name="partyId" type="String" mode="IN"/>
        <attribute name="roleTypeId" type="String" mode="IN"/>
    </service>

    <service name="removeOrderRole" engine="java"
            location="org.ofbiz.order.order.OrderServices" invoke="removeRoleType">
        <description>Removes a RoleType from an order</description>
        <attribute name="orderId" type="String" mode="IN"/>
        <attribute name="partyId" type="String" mode="IN"/>
        <attribute name="roleTypeId" type="String" mode="IN"/>
    </service>

    <service name="createOrderPaymentPreference" engine="java"
            location="org.ofbiz.order.order.OrderServices" invoke="createPaymentPreference">
        <description>Creates an order payment preference</description>
        <attribute name="orderId" type="String" mode="IN"/>
        <attribute name="paymentMethodTypeId" type="String" mode="IN"/>
        <attribute name="paymentMethodId" type="String" mode="IN" optional="true"/>
        <attribute name="maxAmount" type="Double" mode="IN" optional="true"/>
        <attribute name="orderPaymentPreferenceId" type="String" mode="OUT"/>
    </service>

    <service name="createOrderNote" engine="java"
            location="org.ofbiz.order.order.OrderServices" invoke="createOrderNote" auth="true">
        <description>Create a note item and associate with a order header</description>
        <attribute name="orderId" type="String" mode="IN"/>
        <attribute name="note" type="String" mode="IN"/>
    </service>

    <!-- Order (digital) Fulfillment Services -->
    <service name="checkDigitalItemFulfillment" engine="java"
            location="org.ofbiz.order.order.OrderServices" invoke="checkDigitalItemFulfillment" auth="true">
        <description>Check an order for digital items and invoice/capture + fulfill the items</description>
        <attribute name="orderId" type="String" mode="IN"/>
    </service>
   <service name="fulfillDigitalItems" engine="java" require-new-transaction="true" transaction-timout="300"
       location="org.ofbiz.order.order.OrderServices" invoke="fulfillDigitalItems">
       <description>Order Fulfillment</description>
       <attribute name="orderId" type="String" mode="IN" optional="false"/>
       <attribute name="orderItems" type="java.util.List" mode="IN" optional="false"/>
   </service>
   <service name="itemFulfillmentInterface" engine="interface" invoke="" location="" auth="false" >
       <auto-attributes entity-name="ProductContent" include="pk" mode="IN" optional="false"/>
       <attribute name="orderItem" type="GenericValue" mode="IN" optional="false"/>
   </service>

    <!-- Order Return Services -->
    <service name="createReturnHeader" engine="simple"
            location="org/ofbiz/order/order/OrderReturnServices.xml" invoke="createReturnHeader">
        <description>Create a new ReturnHeader</description>
        <auto-attributes entity-name="ReturnHeader" include="nonpk" mode="IN" optional="true"/>
        <auto-attributes entity-name="ReturnHeader" include="pk" mode="OUT" optional="false"/>
    </service>
    <service name="updateReturnHeader" engine="simple"
            location="org/ofbiz/order/order/OrderReturnServices.xml" invoke="updateReturnHeader">
        <description>Update a ReturnHeader</description>
        <auto-attributes entity-name="ReturnHeader" include="pk" mode="IN" optional="false"/>
        <auto-attributes entity-name="ReturnHeader" include="nonpk" mode="IN" optional="true"/>
        <attribute name="currentStatusId" type="String" mode="OUT" optional="false"/>
    </service>

    <service name="returnItemInterface" engine="interface" location="" invoke="">
        <description>Return Item Interface</description>
        <auto-attributes entity-name="ReturnItem" include="all" mode="IN" optional="false">
            <exclude field-name="returnItemSeqId"/>
        </auto-attributes>
        <override name="returnItemResponseId" optional="true"/>
        <override name="statusId" optional="true"/>
        <override name="returnPrice" optional="true"/>
    </service>
    <service name="createReturnItem" engine="simple"
            location="org/ofbiz/order/order/OrderReturnServices.xml" invoke="createReturnItem">
        <description>Create a new ReturnItem</description>
        <implements service="returnItemInterface"/>
        <attribute name="returnItemType" type="String" mode="IN" optional="false"/>
        <attribute name="returnItemSeqId" type="String" mode="OUT" optional="false"/>
        <override name="orderItemSeqId" optional="true"/>
        <override name="returnReasonId" optional="true"/>
    </service>
    <service name="updateReturnItem" engine="simple"
            location="org/ofbiz/order/order/OrderReturnServices.xml" invoke="updateReturnItem">
        <description>Update a ReturnItem</description>
        <implements service="returnItemInterface"/>
        <attribute entity-name="ReturnItem" name="returnItemSeqId" type="String" mode="IN" optional="false"/>
        <attribute name="currentStatusId" type="String" mode="OUT" optional="false"/>
    </service>
    <service name="removeReturnItem" engine="simple"
            location="org/ofbiz/order/order/OrderReturnServices.xml" invoke="removeReturnItem">
        <description>Remove a ReturnItem</description>
        <auto-attributes entity-name="ReturnItem" include="pk" mode="IN" optional="false"/>
    </service>

    <service name="checkReturnComplete" engine="java"
            location="org.ofbiz.order.order.OrderServices" invoke="checkReturnComplete">
        <description>Checks if all items on a return are complete/cancelled and updates the header status</description>
        <attribute name="returnId" type="String" mode="IN" optional="false"/>
        <attribute name="statusId" type="String" mode="OUT" optional="true"/>
    </service>

    <service name="sendReturnAcceptNotification" engine="java"
            location="org.ofbiz.order.order.OrderServices" invoke="sendReturnAcceptNotification">
        <description>Send a notification that a return has been accepted</description>
        <attribute name="returnId" type="String" mode="IN" optional="false"/>
    </service>
    <service name="sendReturnCompleteNotification" engine="java"
            location="org.ofbiz.order.order.OrderServices" invoke="sendReturnCompleteNotification">
        <description>Send a notification that a return has been completed</description>
        <attribute name="returnId" type="String" mode="IN" optional="false"/>
    </service>
     <service name="sendReturnCancelNotification" engine="java"
            location="org.ofbiz.order.order.OrderServices" invoke="sendReturnCancelNotification">
        <description>Send a notification that a return has been cancelled</description>
        <attribute name="returnId" type="String" mode="IN" optional="false"/>
    </service>

    <service name="processCreditReturn" engine="java" auth="true"
            location="org.ofbiz.order.order.OrderServices" invoke="processCreditReturn">
        <description>Process the credits in a return</description>
        <attribute name="returnId" type="String" mode="IN" optional="false"/>
    </service>
    <service name="processRefundReturn" engine="java" auth="true"
            location="org.ofbiz.order.order.OrderServices" invoke="processRefundReturn">
        <description>Process the refunds in a return</description>
        <attribute name="returnId" type="String" mode="IN" optional="false"/>
    </service>
    <service name="processReplacementReturn" engine="java" auth="true"
            location="org.ofbiz.order.order.OrderServices" invoke="processReplacementReturn">
        <description>Process the replacements in a return</description>
        <attribute name="returnId" type="String" mode="IN" optional="false"/>
    </service>
    <service name="updateReturnStatusFromReceipt" engine="simple"
            location="org/ofbiz/order/order/OrderReturnServices.xml" invoke="updateReturnStatusFromReceipt">
        <description>Update return/item status when items have been received</description>
        <attribute name="returnId" type="String" mode="IN" optional="false"/>
        <attribute name="returnHeaderStatus" type="String" mode="OUT" optional="false"/>
    </service>
    <service name="getReturnableQuantity" engine="java"
            location="org.ofbiz.order.order.OrderServices" invoke="getReturnableQuantity">
        <description>Get the quantity allowed for an item to be returned</description>
        <attribute name="orderItem" type="GenericValue" mode="IN" optional="false"/>
        <attribute name="returnableQuantity" type="Double" mode="OUT" optional="false"/>
        <attribute name="returnablePrice" type="Double" mode="OUT" optional="false"/>
    </service>
    <service name="getReturnableItems" engine="java"
            location="org.ofbiz.order.order.OrderServices" invoke="getReturnableItems">
        <description>Get a map of returnable items orderItem => quantity available to return</description>
        <attribute name="orderId" type="String" mode="IN" optional="false"/>
        <attribute name="returnableItems" type="Map" mode="OUT" optional="false"/>
    </service>

    <!-- Tax Services -->
    <service name="calcTax" engine="java"
            location="org.ofbiz.order.order.OrderServices" invoke="simpleTaxCalc">
        <description>Simple Calc Tax Service</description>
        <attribute name="productStoreId" type="String" mode="IN"/>
        <attribute name="itemProductList" type="java.util.List" mode="IN"/>
        <attribute name="itemAmountList" type="java.util.List" mode="IN"/>
        <attribute name="itemShippingList" type="java.util.List" mode="IN" optional="true"/>
        <attribute name="orderShippingAmount" type="Double" mode="IN" optional="true"/>
        <attribute name="shippingAddress" type="org.ofbiz.entity.GenericValue" mode="IN"/>
        <attribute name="orderAdjustments" type="java.util.List" mode="OUT"/>
        <attribute name="itemAdjustments" type="java.util.List" mode="OUT"/>
    </service>

    <service name="createTaxRate" engine="simple"
            location="org/ofbiz/order/order/TaxRateServices.xml" invoke="createTaxRate">
        <description>Create a Tax Rate entry</description>
        <attribute name="productStoreId" type="String" mode="IN" optional="false"/>
        <attribute name="countryGeoId" type="String" mode="IN" optional="false"/>
        <attribute name="stateProvinceGeoId" type="String" mode="IN" optional="false"/>
        <attribute name="taxCategory" type="String" mode="IN" optional="true"/>
        <attribute name="taxShipping" type="String" mode="IN" optional="false"/>
        <attribute name="minPurchase" type="Double" mode="IN" optional="false"/>
        <attribute name="description" type="String" mode="IN" optional="true"/>
        <attribute name="salesTaxPercentage" type="Double" mode="IN" optional="false"/>
        <attribute name="fromDate" type="Timestamp" mode="IN" optional="true"/>
        <attribute name="thruDate" type="Timestamp" mode="IN" optional="true"/>
    </service>

    <service name="removeTaxRate" engine="simple"
            location="org/ofbiz/order/order/TaxRateServices.xml" invoke="removeTaxRate">
        <description>Remove a Tax Rate entry</description>
        <attribute name="productStoreId" type="String" mode="IN" optional="false"/>
        <attribute name="countryGeoId" type="String" mode="IN" optional="false"/>
        <attribute name="stateProvinceGeoId" type="String" mode="IN" optional="false"/>
        <attribute name="taxCategory" type="String" mode="IN" optional="false"/>
        <attribute name="minPurchase" type="Double" mode="IN" optional="false"/>
        <attribute name="fromDate" type="Timestamp" mode="IN" optional="false"/>
    </service>

    <!-- ZipSales Tax Services -->
    <service name="importZipSalesTaxData" engine="java" transaction-timout="7200"
            location="org.ofbiz.order.thirdparty.zipsales.ZipSalesServices" invoke="importFlatTable">
        <description>Import ZipSales Flat File</description>
        <attribute name="taxFileLocation" type="String" mode="IN" optional="false"/>
        <attribute name="ruleFileLocation" type="String" mode="IN" optional="false"/>
    </service>

    <service name="_calcTax" engine="java"
            location="org.ofbiz.order.thirdparty.zipsales.ZipSalesServices" invoke="flatTaxCalc">
        <description>Zip Sales Calc Tax Service - change this to calcTax to run</description>
        <attribute name="productStoreId" type="String" mode="IN"/>
        <attribute name="itemProductList" type="java.util.List" mode="IN"/>
        <attribute name="itemAmountList" type="java.util.List" mode="IN"/>
        <attribute name="itemShippingList" type="java.util.List" mode="IN" optional="true"/>
        <attribute name="orderShippingAmount" type="Double" mode="IN" optional="true"/>
        <attribute name="shippingAddress" type="org.ofbiz.entity.GenericValue" mode="IN"/>
        <attribute name="orderAdjustments" type="java.util.List" mode="OUT"/>
        <attribute name="itemAdjustments" type="java.util.List" mode="OUT"/>
    </service>

    <!-- Customer Request Services -->
    <service name="interfaceCustRequest" engine="interface" location="" invoke="">
        <description>CustRequest Interface</description>
        <attribute name="custRequestTypeId" type="String" mode="IN" optional="false"/>
        <attribute name="custRequestCategoryId" type="String" mode="IN" optional="true"/>
        <attribute name="statusId" type="String" mode="IN" optional="true"/>
        <attribute name="priority" type="Long" mode="IN" optional="true"/>
        <attribute name="custRequestDate" type="Timestamp" mode="IN" optional="true"/>
        <attribute name="responseRequiredDate" type="Timestamp" mode="IN" optional="true"/>
        <attribute name="custRequestName" type="String" mode="IN" optional="false"/>
        <attribute name="description" type="String" mode="IN" optional="true"/>
    </service>
    <service name="createCustRequest" engine="simple"
            location="org/ofbiz/order/request/CustRequestServices.xml" invoke="createCustRequest" auth="true">
        <description>Create a custRequest record</description>
        <implements service="interfaceCustRequest"/>
        <attribute name="requestPartyId" type="String" mode="IN" optional="true"/>
        <attribute name="custRequestId" type="String" mode="OUT" optional="false"/>
    </service>
    <service name="updateCustRequest" engine="simple"
            location="org/ofbiz/order/request/CustRequestServices.xml" invoke="updateCustRequest" auth="true">
        <description>Update a custRequest record</description>
        <implements service="interfaceCustRequest"/>
        <attribute name="custRequestId" type="String" mode="IN" optional="false"/>
        <attribute name="custRequestTypeId" type="String" mode="IN" optional="true"/>
    </service>

    <service name="createCustRequestAttribute" engine="simple"
            location="org/ofbiz/order/request/CustRequestServices.xml" invoke="createCustRequestAttribute" auth="true">
        <description>Create CustRequestAttribute record</description>
        <attribute name="custRequestId" type="String" mode="IN" optional="false"/>
        <attribute name="attrName" type="String" mode="IN" optional="false"/>
        <attribute name="attrValue" type="String" mode="IN" optional="false"/>
    </service>

   <service name="updateCustRequestAttribute" engine="simple"
            location="org/ofbiz/order/request/CustRequestServices.xml" invoke="updateCustRequestAttribute" auth="true">
        <description>Update CustRequestAttribute record</description>
        <attribute name="custRequestId" type="String" mode="IN" optional="false"/>
        <attribute name="attrName" type="String" mode="IN" optional="false"/>
        <attribute name="attrValue" type="String" mode="IN" optional="false"/>
    </service>

    <service name="interfaceCustRequestItem" engine="interface" location="" invoke="">
        <description>CustRequestItem Interface</description>
        <attribute name="custRequestItemSeqId" type="String" mode="IN" optional="false"/>
        <attribute name="custRequestResolutionId" type="String" mode="IN" optional="true"/>
        <attribute name="story" type="String" mode="IN" optional="true"/>
        <attribute name="statusId" type="String" mode="IN" optional="true"/>
        <attribute name="priority" type="Long" mode="IN" optional="true"/>
        <attribute name="requiredByDate" type="Timestamp" mode="IN" optional="false"/>
        <attribute name="productId" type="String" mode="IN" optional="true"/>
        <attribute name="quantity" type="Double" mode="IN" optional="true"/>
        <attribute name="maximumAmount" type="Double" mode="IN" optional="true"/>
        <attribute name="description" type="String" mode="IN" optional="true"/>
    </service>
    <service name="createCustRequestItem" engine="simple"
            location="org/ofbiz/order/request/CustRequestServices.xml" invoke="createCustRequestItem" auth="true">
        <description>Create a CustRequestItem record</description>
        <implements service="interfaceCustRequestItem"/>
        <attribute name="custRequestId" type="String" mode="IN" optional="false"/>
    </service>
    <service name="updateCustRequestItem" engine="simple"
            location="org/ofbiz/order/request/CustRequestServices.xml" invoke="updateCustRequestItem" auth="true">
        <description>Update a CustRequestItem record</description>
        <implements service="interfaceCustRequestItem"/>
        <attribute name="custRequestId" type="String" mode="IN" optional="false"/>
    </service>

    <service name="createCustRequestRole" engine="simple"
            location="org/ofbiz/order/request/CustRequestServices.xml" invoke="createCustRequestRole" auth="true">
        <description>Create a CustRequestRole record</description>
        <attribute name="custRequestId" type="String" mode="IN" optional="false"/>
        <attribute name="partyId" type="String" mode="IN" optional="false"/>
        <attribute name="roleTypeId" type="String" mode="IN" optional="false"/>
    </service>

    <service name="removeCustRequestRole" engine="simple"
            location="org/ofbiz/order/request/CustRequestServices.xml" invoke="removeCustRequestRole" auth="true">
        <description>Remove a CustRequestRole record</description>
        <attribute name="custRequestId" type="String" mode="IN" optional="false"/>
        <attribute name="partyId" type="String" mode="IN" optional="false"/>
        <attribute name="roleTypeId" type="String" mode="IN" optional="false"/>
    </service>

    <service name="createCustRequestItemNote" engine="simple"
            location="org/ofbiz/order/request/CustRequestServices.xml" invoke="createCustRequestItemNote" auth="true">
        <description>Create a CustRequestRole record</description>
        <attribute name="custRequestId" type="String" mode="IN" optional="false"/>
        <attribute name="custRequestItemSeqId" type="String" mode="IN" optional="false"/>
        <attribute name="note" type="String" mode="IN" optional="false"/>
    </service>

    <!-- Services for finding Associated CustRequests -->
    <service name="getCustRequestsByRole" engine="simple"
            location="org/ofbiz/order/request/CustRequestServices.xml" invoke="getCustRequestsByRole" auth="true">
        <description>Get CustRequests Associated By Role</description>
        <attribute name="roleTypeId" type="String" mode="IN" optional="true"/>
        <attribute name="custRequestAndRoles" type="java.util.List" mode="OUT" optional="false"/>
    </service>

  <!-- Requirement Services -->
    <service name="interfaceRequirement" engine="simple"
            location="org/ofbiz/order/requirement/RequirementServices.xml" invoke="createRequirement">
        <description>Requirement Interface</description>
        <attribute name="requirementTypeId" type="String" mode="IN" optional="false"/>
        <attribute name="facilityId" type="String" mode="IN" optional="true"/>
        <attribute name="deliverableId" type="String" mode="IN" optional="true"/>
        <attribute name="fixedAssetId" type="String" mode="IN" optional="true"/>
        <attribute name="productId" type="String" mode="IN" optional="true"/>
        <attribute name="description" type="String" mode="IN" optional="false"/>
        <attribute name="requirementStartDate" type="Timestamp" mode="IN" optional="true"/>
        <attribute name="requiredByDate" type="Timestamp" mode="IN" optional="true"/>
        <attribute name="estimatedBudget" type="Double" mode="IN" optional="true"/>
        <attribute name="quantity" type="Double" mode="IN" optional="true"/>
        <attribute name="story" type="String" mode="IN" optional="true"/>
        <attribute name="reason" type="String" mode="IN" optional="true"/>
    </service>
    <service name="createRequirement" engine="simple"
            location="org/ofbiz/order/requirement/RequirementServices.xml" invoke="createRequirement">
        <description>Create a new requirement</description>
        <implements service="interfaceRequirement"/>
        <attribute name="custRequestId" type="String" mode="IN" optional="true"/>
        <attribute name="custRequestItemSeqId" type="String" mode="IN" optional="true"/>
        <attribute name="requirementId" type="String" mode="INOUT" optional="true"/>
    </service>
    <service name="updateRequirement" engine="simple"
            location="org/ofbiz/order/requirement/RequirementServices.xml" invoke="updateRequirement">
        <description>Update an existing requirement</description>
        <implements service="interfaceRequirement"/>
        <attribute name="requirementId" type="String" mode="IN" optional="false"/>
    </service>

    <service name="deleteRequirement" engine="simple"
            location="org/ofbiz/order/requirement/RequirementServices.xml" invoke="deleteRequirement">
        <description>Delete a requirement</description>
        <attribute name="requirementId" type="String" mode="IN" optional="false"/>
    </service>

    <service name="associatedRequirementWithRequestItem" engine="simple"
    		location="org/ofbiz/order/requirement/RequirementServices.xml" invoke="associateRequirementWithRequestItem">
    	<description>Creates a CustRequestItem/Requirement association</description>
    	<attribute name="requirementId" type="String" mode="IN" optional="false"/>
    	<attribute name="custRequestId" type="String" mode="IN" optional="false"/>
    	<attribute name="custRequestItemSeqId" type="String" mode="IN" optional="false"/>
    </service>

    <service name="addRequirementTask" engine="simple"
            location="org/ofbiz/order/requirement/RequirementServices.xml" invoke="addTaskToRequirement">
        <description>Associate an existing task w/ a requirement</description>
        <attribute name="requirementId" type="String" mode="IN" optional="false"/>
        <attribute name="workEffortId" type="String" mode="IN" optional="false"/>
        <attribute name="workReqFulfTypeId" type="String" mode="IN" optional="true"/>
    </service>

    <!-- Shopping List Services -->
    <service name="shoppingListInterface" engine="interface" location="" invoke="">
        <description>Shopping List Interface</description>
        <attribute name="shoppingListTypeId" type="String" mode="IN" optional="true"/>
        <attribute name="parentShoppingListId" type="String" mode="IN" optional="true"/>
        <attribute name="partyId" type="String" mode="IN" optional="true"/>
        <attribute name="listName" type="String" mode="IN" optional="true"/>
        <attribute name="description" type="String" mode="IN" optional="true"/>
        <attribute name="isPublic" type="String" mode="IN" optional="true"/>
    </service>
    <service name="createShoppingList" engine="simple" auth="true"
            location="org/ofbiz/order/shoppinglist/ShoppingListServices.xml" invoke="createShoppingList">
        <description>Create a shopping list entity</description>
        <implements service="shoppingListInterface"/>
        <attribute name="shoppingListId" type="String" mode="OUT" optional="false"/>
    </service>
    <service name="updateShoppingList" engine="simple" auth="true"
            location="org/ofbiz/order/shoppinglist/ShoppingListServices.xml" invoke="updateShoppingList">
        <description>Update a shopping list entity</description>
        <implements service="shoppingListInterface"/>
        <attribute name="shoppingListId" type="String" mode="IN" optional="false"/>
    </service>
    <service name="removeShoppingList" engine="simple" auth="true"
            location="org/ofbiz/order/shoppinglist/ShoppingListServices.xml" invoke="removeShoppingList">
        <description>Remove a shopping list entity</description>
        <attribute name="shoppingListId" type="String" mode="IN" optional="false"/>
    </service>
    <service name="calculateShoppingListDeepTotalPrice" engine="simple" auth="true"
            location="org/ofbiz/order/shoppinglist/ShoppingListServices.xml" invoke="calculateShoppingListDeepTotalPrice">
        <description>Remove a shopping list entity</description>
        <attribute name="shoppingListId" type="String" mode="IN" optional="false"/>
        <attribute name="prodCatalogId" type="String" mode="IN" optional="false"/>
        <attribute name="webSiteId" type="String" mode="IN" optional="false"/>
        <attribute name="partyId" type="String" mode="IN" optional="true"/>
        <attribute name="productStoreGroupId" type="String" mode="IN" optional="true"/>
        <attribute name="quantity" type="Double" mode="IN" optional="true"/>
        <attribute name="currencyUomId" type="String" mode="IN" optional="true"/>
        <attribute name="autoUserLogin" type="GenericValue" mode="IN" optional="true"/>
        <attribute name="totalPrice" type="Double" mode="OUT" optional="false"/>
    </service>

    <service name="shoppingListItemInterface" engine="interface" location="" invoke="">
        <description>Interface of shopping list items</description>
        <attribute name="shoppingListId" type="String" mode="IN" optional="false"/>
        <attribute name="productId" type="String" mode="IN" optional="true"/>
        <attribute name="quantity" type="Double" mode="IN" optional="true"/>
        <attribute name="quantityPurchased" type="Double" mode="IN" optional="true"/>
    </service>
    <service name="createShoppingListItem" engine="simple" auth="true"
            location="org/ofbiz/order/shoppinglist/ShoppingListServices.xml" invoke="createShoppingListItem">
        <description>Create a shopping list item</description>
        <implements service="shoppingListItemInterface"/>
        <attribute name="shoppingListId" type="String" mode="INOUT" optional="true"/>
        <attribute name="productId" type="String" mode="IN" optional="false"/>
        <attribute name="shoppingListItemSeqId" type="String" mode="OUT" optional="false"/>
    </service>
    <service name="updateShoppingListItem" engine="simple" auth="true"
            location="org/ofbiz/order/shoppinglist/ShoppingListServices.xml" invoke="updateShoppingListItem">
        <description>Update a shopping list item</description>
        <implements service="shoppingListItemInterface"/>
        <attribute name="shoppingListItemSeqId" type="String" mode="IN" optional="false"/>
    </service>
    <service name="removeShoppingListItem" engine="simple" auth="true"
            location="org/ofbiz/order/shoppinglist/ShoppingListServices.xml" invoke="removeShoppingListItem">
        <description>Remove a shopping list item</description>
        <attribute name="shoppingListId" type="String" mode="IN" optional="false"/>
        <attribute name="shoppingListItemSeqId" type="String" mode="IN" optional="false"/>
    </service>

    <!-- Order View Services -->
    <service name="getOrderedSummaryInformation" engine="simple"
            location="org/ofbiz/order/order/OrderServices.xml" invoke="getOrderedSummaryInformation">
        <description>Get Ordered Summary Information</description>
        <attribute name="partyId" type="String" mode="IN" optional="false"/>
        <attribute name="roleTypeId" type="String" mode="IN" optional="true"/> <!-- defaults to PLACING_CUSTOMER -->
        <attribute name="orderTypeId" type="String" mode="IN" optional="true"/> <!-- defaults to SALES_ORDER -->
        <attribute name="statusId" type="String" mode="IN" optional="true"/> <!-- defaults to ORDER_COMPLETED -->
        <attribute name="fromDate" type="Timestamp" mode="IN" optional="true"/>
        <attribute name="thruDate" type="Timestamp" mode="IN" optional="true"/>
        <attribute name="monthsToInclude" type="Integer" mode="IN" optional="true"/> <!-- if monthsToInclude specified along with fromDate/thruDate, will override fromDate/thruDate -->
        <attribute name="totalOrders" type="Long" mode="OUT" optional="false"/>
        <attribute name="totalGrandAmount" type="Double" mode="OUT" optional="false"/>
        <attribute name="totalSubRemainingAmount" type="Double" mode="OUT" optional="false"/>
    </service>
    
    <service name="getOrderInformation" engine="java"
            location="org.ofbiz.order.order.OrderServices" invoke="getOrderInformation">
        <description>Get basic order information.</description>
        <attribute name="orderId" type="String" mode="INOUT"/>
        <attribute name="orderHeader" type="org.ofbiz.entity.GenericValue" mode="OUT"/>
        <attribute name="shippingAddress" type="org.ofbiz.entity.GenericValue" mode="OUT"/>
        <attribute name="billingAddress" type="org.ofbiz.entity.GenericValue" mode="OUT" optional="true"/>
        <attribute name="billToPerson" type="org.ofbiz.entity.GenericValue" mode="OUT"/>
        <attribute name="orderItems" type="java.util.Collection" mode="OUT"/>
        <attribute name="totalItems" type="Double" mode="OUT"/>
        <attribute name="totalPrice" type="Double" mode="OUT"/>
        <attribute name="affiliateId" type="String" mode="OUT"/>
        <attribute name="distributorId" type="String" mode="OUT"/>
        <attribute name="statusString" type="String" mode="OUT"/>
    </service>

    <service name="getOrderHeaderInformation" engine="java" validate="false"
            location="org.ofbiz.order.order.OrderServices" invoke="getOrderHeaderInformation">
        <description>Get basic order header information.</description>
        <auto-attributes entity-name="OrderHeader" include="pk" mode="INOUT" optional="false"/>
        <auto-attributes entity-name="OrderHeader" include="nonpk" mode="OUT" optional="true"/>
    </service>

    <service name="getOrderShippingAmount" engine="java"
            location="org.ofbiz.order.order.OrderServices" invoke="getOrderShippingAmount">
        <description>Get the total shipping for an order</description>
        <attribute name="orderId" type="String" mode="IN" optional="false"/>
        <attribute name="shippingAmount" type="Double" mode="OUT" optional="false"/>
    </service>

    <!-- Order Delivery Services -->
    <service name="createOrderDeliverySchedule" default-entity-name="OrderDeliverySchedule" engine="simple"
            location="org/ofbiz/order/order/OrderDeliveryServices.xml" invoke="createOrderDeliverySchedule">
        <description>Creates a delivery schedule for the specified order</description>
        <auto-attributes include="pk" mode="IN" optional="false"/>
        <auto-attributes include="nonpk" mode="IN" optional="true"/>
        <override name="orderItemSeqId" optional="true"/>
    </service>
    <service name="updateOrderDeliverySchedule" default-entity-name="OrderDeliverySchedule" engine="simple"
            location="org/ofbiz/order/order/OrderDeliveryServices.xml" invoke="updateOrderDeliverySchedule">
        <description>Update an existing delivery schedule for a specified purchase order</description>
        <auto-attributes include="pk" mode="IN" optional="false"/>
        <auto-attributes include="nonpk" mode="IN" optional="true"/>
    </service>
    <service name="sendOrderDeliveryScheduleNotification" engine="simple"
            location="org/ofbiz/order/order/OrderDeliveryServices.xml" invoke="sendOrderDeliveryScheduleNotification">
        <description>Send Order Delivery Schedule Notification</description>
        <attribute name="orderId" type="String" mode="IN" optional="false"/>
        <attribute name="orderItemSeqId" type="String" mode="IN" optional="true"/>
    </service>

    <service name="checkSupplierRelatedOrderPermission" engine="simple"
            location="org/ofbiz/order/order/OrderDeliveryServices.xml" invoke="checkSupplierRelatedOrderPermissionService">
        <description>Check Supplier Related Order Permission</description>
        <attribute name="orderId" type="String" mode="IN" optional="false"/>
        <attribute name="checkAction" type="String" mode="IN" optional="true"/>
        <attribute name="callingMethodName" type="String" mode="IN" optional="true"/>
        <attribute name="hasSupplierRelatedPermission" type="String" mode="OUT" optional="false"/>
    </service>
    
    <!-- serialization test -->
    <service name="shoppingCartRemoteTest" engine="java"
            location="org.ofbiz.order.order.OrderServices" invoke="shoppingCartRemoteTest">
        <attribute name="cart" type="org.ofbiz.order.shoppingcart.ShoppingCart" mode="IN" optional="false"/>
    </service>
    <service name="shoppingCartTest" engine="java"
            location="org.ofbiz.order.order.OrderServices" invoke="shoppingCartTest">        
    </service>
</services>

