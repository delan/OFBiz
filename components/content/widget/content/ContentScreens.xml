<?xml version="1.0" encoding="UTF-8"?>
<!--
 *  Copyright (c) 2004 The Open For Business Project - www.ofbiz.org
 *
 *  Permission is hereby granted, free of charge, to any person obtaining a
 *  copy of this software and associated documentation files (the "Software"),
 *  to deal in the Software without restriction, including without limitation
 *  the rights to use, copy, modify, merge, publish, distribute, sublicense,
 *  and/or sell copies of the Software, and to permit persons to whom the
 *  Software is furnished to do so, subject to the following conditions:
 *
 *  The above copyright notice and this permission notice shall be included
 *  in all copies or substantial portions of the Software.
 *
 *  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS
 *  OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 *  MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.
 *  IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY
 *  CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT
 *  OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR
 *  THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 *
 *  $Id: CommonScreens.xml 2951 2004-08-03 16:33:32Z byersa $
-->

<screens xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
        xsi:noNamespaceSchemaLocation="http://www.ofbiz.org/dtds/widget-screen.xsd">
	<screen name="common">
		<section>
		<actions>
		    <set field="currentMenuItemName" from-field="currentMenuItemName" from-scope="user"/>
		</actions>
                  <widgets>
                       <decorator-screen name="main" location="component://content/widget/CommonScreens.xml" >
                         <decorator-section name="body">
                           <include-menu name="content" location="component://content/webapp/content/content/ContentMenus.xml" />
                           <decorator-section-include name="body"/>
                          </decorator-section>
                        </decorator-screen>
                  </widgets>
		</section>
	</screen>
	
	<screen name="ContentMenu">
		<section>
		<actions>
		    <set field="headerItem" value="Content"/>
		    <set field="currentMenuItemName" from-field="currentMenuItemName" from-scope="user" default-value="FindContent"/>
		    <set field="subScreens.FindContent" value="FindContent" />
		    <set field="subScreens.EditContent" value="EditContent" />
		    <set field="subScreens.AddContent" value="AddContent" />
		    <set field="subScreens.EditContentAssoc" value="contentassoc" />
		    <set field="subScreens.EditContentRole" value="role" />
		    <set field="subScreens.EditContentPurpose" value="purpose" />
		    <set field="subScreens.EditContentAttribute" value="attribute" />
		    <set field="subScreens.EditContentMetaData" value="metadata" />
		</actions>
                  <widgets>
                           <include-screen name="${subScreens.${currentMenuItemName}}" />
                  </widgets>
		</section>
	</screen>


	<screen name="FindContent">
	  <section>
	    <condition>
		  <or>
		    <if-has-permission permission="CONTENTMGR" action="UPDATE"/>
          </or>
		</condition>
	    <actions>
            <set field="currentMenuItemName" value="FindContent" to-scope="user" />
            <set field="currentMenuItemName" value="FindContent" to-scope="screen" />
                    <set field="title" value="Content Find Page"/>
                    <set field="entityName" value="Content"/>
                    <set field="queryString" from-field="result.queryString"/>
                    <set field="viewIndex" from-field="requestParameters.VIEW_INDEX" type="Integer"/>
                    <set field="viewSize" from-field="requestParameters.VIEW_SIZE" type="Integer" default-value="20"/>
	    </actions>
        <widgets>
          <decorator-screen name="common" >
            <decorator-section name="body">
              <include-form name="findContent" location="component://content/webapp/content/content/ContentForms.xml" />
              <include-form name="listFindContent" location="component://content/webapp/content/content/ContentForms.xml" />
            </decorator-section>
          </decorator-screen>
        </widgets>
	  </section>
	</screen>

	<screen name="EditContent">
		<section>
			<condition>
				<if-has-permission permission="CONTENTMGR" action="UPDATE"/>
			</condition>
		<actions>
		    <script location="component://content/widget/getMenuContext.bsh"/>
                    <set field="title" value="Content Edit Page"/>
                    <set field="titleProperty" value="PageTitleEditContent"/>
            <set field="currentMenuItemName" value="EditContent" to-scope="user" />
            <set field="defaultContentId" from-field="contentId" from-scope="user" />
            <set field="contentId" from-field="parameters.contentId" to-scope="session" default-value="${defaultContentId}"/>
            <set field="contentId" from-field="contentId" to-scope="user" />
			<entity-one entity-name="Content" value-name="currentValue">
				<field-map field-name="contentId" env-name="contentId"/>
			</entity-one>
		</actions>
                  <widgets>
                       <decorator-screen name="common" >
                         <decorator-section name="body">
                           <include-form name="EditContent" location="component://content/webapp/content/content/ContentForms.xml" />
                          </decorator-section>
                        </decorator-screen>
                  </widgets>
		</section>
	</screen>
	
	<screen name="AddContent">
		<section>
			<condition>
				<if-has-permission permission="CONTENTMGR" action="CREATE"/>
			</condition>
		<actions>
		    <script location="component://content/widget/getMenuContext.bsh"/>
                    <set field="title" value="CMS Content Edit Page"/>
                    <set field="titleProperty" value="PageTitleEditContent"/>
          <set field="currentMenuItemName" value="AddContent" to-scope="user" />
		</actions>
                  <widgets>
                       <decorator-screen name="common" >
                         <decorator-section name="body">
                           <include-form name="AddContent" location="component://content/webapp/content/content/ContentForms.xml" />
                          </decorator-section>
                        </decorator-screen>
                  </widgets>
		</section>
	</screen>
	
	<screen name="EditContentAssoc">
		<section>
			<condition>
				<if-has-permission permission="CONTENTMGR" action="UPDATE"/>
			</condition>
		<actions>
		    <script location="component://content/widget/getMenuContext.bsh"/>
                    <set field="title" value="Content Edit Page"/>
                    <set field="titleProperty" value="PageTitleEditContent"/>
            <set field="currentMenuItemName" value="contentassoc" to-scope="user" />
            
            <set field="defaultContentId" from-field="contentId" from-scope="user" />
            <set field="contentId" from-field="parameters.contentId" to-scope="session" default-value="${defaultContentId}"/>
            <set field="contentId" from-field="contentId" to-scope="user" />
            
            <set field="defaultContentIdTo" from-field="contentIdTo" from-scope="user" />
            <set field="contentIdTo" from-field="parameters.contentIdTo" to-scope="session" default-value="${defaultContentId}"/>
            <set field="contentIdTo" from-field="contentIdTo" to-scope="user" />
            
            <set field="defaultContentAssocTypeId" from-field="contentAssocTypeId" from-scope="user" />
            <set field="contentAssocTypeId" from-field="parameters.contentAssocTypeId" to-scope="session" default-value="${defaultContentAssocTypeId}"/>
            <set field="contentAssocTypeId" from-field="contentAssocTypeId" to-scope="user" />
            
            <set field="defaultFromDate" from-field="fromDate" from-scope="user" />
            <set field="fromDate" from-field="parameters.fromDate" to-scope="session" default-value="${defaultFromDate}"/>
            <set field="fromDate" from-field="fromDate" to-scope="user" />
            
		</actions>
        <widgets>
          <decorator-screen name="common" >
            <decorator-section name="body">
              <include-form name="ListContentAssocFrom" location="component://content/webapp/content/content/ContentForms.xml" />
              <include-form name="ListContentAssocTo" location="component://content/webapp/content/content/ContentForms.xml" />
              <section>
                <condition>
                  <and>
                    <not><if-empty field-name="contentId"/></not>  
                    <not><if-empty field-name="contentIdTo"/></not>  
                    <not><if-empty field-name="contentAssocTypeId"/></not>  
                    <not><if-empty field-name="fromDate"/></not>  
                  </and>  
                </condition>
                <widgets>
                  <include-form name="EditContentAssoc" location="component://content/webapp/content/content/ContentForms.xml" />
                </widgets>
              </section>
              <section>
                <condition>
                  <or>
                    <if-empty field-name="contentId"/>  
                    <if-empty field-name="contentIdTo"/>  
                    <if-empty field-name="contentAssocTypeId"/>  
                    <if-empty field-name="fromDate"/>  
                  </or>  
                </condition>
                <widgets>
                  <include-form name="AddContentAssoc" location="component://content/webapp/content/content/ContentForms.xml" />
                </widgets>
              </section>
            </decorator-section>
          </decorator-screen>
        </widgets>
		</section>
	</screen>
	
	<screen name="EditContentRole">
		<section>
			<condition>
				<if-has-permission permission="CONTENTMGR" action="UPDATE"/>
			</condition>
		<actions>
		    <script location="component://content/widget/getMenuContext.bsh"/>
                    <set field="title" value="Content Edit Page"/>
                    <set field="titleProperty" value="PageTitleEditContent"/>
            <set field="currentMenuItemName" value="role" to-scope="user" />
            
            <set field="defaultContentId" from-field="contentId" from-scope="user" />
            <set field="contentId" from-field="parameters.contentId" to-scope="session" default-value="${defaultContentId}"/>
            <set field="contentId" from-field="contentId" to-scope="user" />
            
		</actions>
        <widgets>
          <decorator-screen name="common" >
            <decorator-section name="body">
              <include-form name="ListContentRole" location="component://content/webapp/content/content/ContentForms.xml" />
              <include-form name="AddContentRole" location="component://content/webapp/content/content/ContentForms.xml" />
            </decorator-section>
          </decorator-screen>
        </widgets>
		</section>
	</screen>
	
	<screen name="EditContentPurpose">
		<section>
			<condition>
				<if-has-permission permission="CONTENTMGR" action="UPDATE"/>
			</condition>
		<actions>
		    <script location="component://content/widget/getMenuContext.bsh"/>
                    <set field="title" value="Content Edit Page"/>
                    <set field="titleProperty" value="PageTitleEditContent"/>
            <set field="currentMenuItemName" value="purpose" to-scope="user" />
            
            <set field="defaultContentId" from-field="contentId" from-scope="user" />
            <set field="contentId" from-field="parameters.contentId" to-scope="session" default-value="${defaultContentId}"/>
            <set field="contentId" from-field="contentId" to-scope="user" />
            
		</actions>
        <widgets>
          <decorator-screen name="common" >
            <decorator-section name="body">
              <include-form name="ListContentPurpose" location="component://content/webapp/content/content/ContentForms.xml" />
              <include-form name="AddContentPurpose" location="component://content/webapp/content/content/ContentForms.xml" />
            </decorator-section>
          </decorator-screen>
        </widgets>
		</section>
	</screen>
	
	<screen name="EditContentAttribute">
		<section>
			<condition>
				<if-has-permission permission="CONTENTMGR" action="UPDATE"/>
			</condition>
		<actions>
		    <script location="component://content/widget/getMenuContext.bsh"/>
                    <set field="title" value="Content Edit Page"/>
                    <set field="titleProperty" value="PageTitleEditContent"/>
            <set field="currentMenuItemName" value="attribute" to-scope="user" />
            
            <set field="defaultContentId" from-field="contentId" from-scope="user" />
            <set field="contentId" from-field="parameters.contentId" to-scope="session" default-value="${defaultContentId}"/>
            <set field="contentId" from-field="contentId" to-scope="user" />
            
		</actions>
        <widgets>
          <decorator-screen name="common" >
            <decorator-section name="body">
              <include-form name="ListContentAttribute" location="component://content/webapp/content/content/ContentForms.xml" />
              <include-form name="AddContentAttribute" location="component://content/webapp/content/content/ContentForms.xml" />
            </decorator-section>
          </decorator-screen>
        </widgets>
		</section>
	</screen>
	
	
	<screen name="EditContentMetaData">
		<section>
			<condition>
				<if-has-permission permission="CONTENTMGR" action="UPDATE"/>
			</condition>
		<actions>
		    <script location="component://content/widget/getMenuContext.bsh"/>
                    <set field="title" value="Content Edit Page"/>
                    <set field="titleProperty" value="PageTitleEditContent"/>
            <set field="currentMenuItemName" value="metadata" to-scope="user" />
            
            <set field="defaultContentId" from-field="contentId" from-scope="user" />
            <set field="contentId" from-field="parameters.contentId" to-scope="session" default-value="${defaultContentId}"/>
            <set field="contentId" from-field="contentId" to-scope="user" />
            
		</actions>
        <widgets>
          <decorator-screen name="common" >
            <decorator-section name="body">
              <include-form name="ListContentMetaData" location="component://content/webapp/content/content/ContentForms.xml" />
              <include-form name="AddContentMetaData" location="component://content/webapp/content/content/ContentForms.xml" />
            </decorator-section>
          </decorator-screen>
        </widgets>
		</section>
	</screen>
	
	<screen name="LookupContent">
	  <section>
	    <condition>
		  <or>
		    <if-has-permission permission="CONTENTMGR" action="UPDATE"/>
          </or>
		</condition>
	    <actions>
                    <set field="title" value="Lookup Content"/>
                    <set field="entityName" value="Content"/>
                    <set field="queryString" from-field="result.queryString"/>
                    <set field="viewIndex" from-field="requestParameters.VIEW_INDEX" type="Integer"/>
                    <set field="viewSize" from-field="requestParameters.VIEW_SIZE" type="Integer" default-value="20"/>
	    </actions>
        <widgets>
          <decorator-screen name="lookup" location="component://content/widget/CommonScreens.xml" >
            <decorator-section name="body">
              <include-form name="lookupContent" location="component://content/webapp/content/content/ContentForms.xml" />
              <include-form name="listLookupContent" location="component://content/webapp/content/content/ContentForms.xml" />
            </decorator-section>
          </decorator-screen>
        </widgets>
	  </section>
	</screen>
	
	<screen name="LookupPerson">
	  <section>
	    <condition>
		  <or>
		    <if-has-permission permission="CONTENTMGR" action="UPDATE"/>
          </or>
		</condition>
	    <actions>
                    <set field="title" value="Lookup Person"/>
                    <set field="entityName" value="Person"/>
                    <set field="queryString" from-field="result.queryString"/>
                    <set field="viewIndex" from-field="requestParameters.VIEW_INDEX" type="Integer"/>
                    <set field="viewSize" from-field="requestParameters.VIEW_SIZE" type="Integer" default-value="20"/>
	    </actions>
        <widgets>
          <decorator-screen name="lookup" location="component://content/widget/CommonScreens.xml" >
            <decorator-section name="body">
              <include-form name="lookupPerson" location="component://content/webapp/content/content/ContentForms.xml" />
              <include-form name="listLookupPerson" location="component://content/webapp/content/content/ContentForms.xml" />
            </decorator-section>
          </decorator-screen>
        </widgets>
	  </section>
	</screen>
	
	<screen name="LookupPartyAndUserLoginAndPerson">
	  <section>
	    <condition>
		  <or>
		    <if-has-permission permission="CONTENTMGR" action="UPDATE"/>
          </or>
		</condition>
	    <actions>
                    <set field="title" value="Lookup PartyAndUserLoginAndPerson"/>
                    <set field="entityName" value="PartyAndUserLoginAndPerson"/>
                    <set field="queryString" from-field="result.queryString"/>
                    <set field="viewIndex" from-field="requestParameters.VIEW_INDEX" type="Integer"/>
                    <set field="viewSize" from-field="requestParameters.VIEW_SIZE" type="Integer" default-value="20"/>
	    </actions>
        <widgets>
          <decorator-screen name="lookup" location="component://content/widget/CommonScreens.xml" >
            <decorator-section name="body">
              <include-form name="lookupPartyAndUserLoginAndPerson" location="component://content/webapp/content/content/ContentForms.xml" />
              <include-form name="listLookupPartyAndUserLoginAndPerson" location="component://content/webapp/content/content/ContentForms.xml" />
            </decorator-section>
          </decorator-screen>
        </widgets>
	  </section>
	</screen>


</screens>

