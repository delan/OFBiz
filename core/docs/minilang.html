<html>
<head>
<title>Open For Business Mini-Language Guide</title>
</head>

<body>

<h2 align="center">The Open For Business Project: Mini-Language Guide</h2>

<br>Written By: David E. Jones
<br>Email: <a href="mailto:jonesde@ofbiz.org">jonesde@ofbiz.org</a>
<br>Open For Business Site: <a href="http://www.ofbiz.org/">http://www.ofbiz.org</a>
<br>
<A href="http://sf.net/projects/ofbiz"><IMG src="http://sourceforge.net/sflogo.php?group_id=27173" border="0" alt="SourceForge Logo"></A> 
<br>
Founders and Lead Architects: David E. Jones &amp; Andy Zeneski <br>
Last Updated: February 23, 2002<br>
$Id$ <br>
<hr>
<br>
<h3>Table of Contents</h3>

<ul>
  <li><a href="#Introduction">Introduction</a>
  <li><a href="#Simple_Map_Processor">The Simple Map Processor Mini-Language</a>
    <ul>
    <li><a href='#MapOverview'>Simple Map Processor Overview</a>
    <li><a href='#MakeInString'>Make In String Operations</a>
    <li><a href='#Process'>Process Field Operations</a>
    <li><a href='#MapExample'>Simple Map Processors Example</a>
    </ul>
  <li><a href="#Simple_Method">The Simple Method Mini-Language</a>
    <ul>
    <li><a href='#MethodOverview'>Simple Method Overview</a>
    <li><a href='#Call'>Call Operations</a>
    <li><a href='#Event'>Event Specific Operations</a>
    <li><a href='#Service'>Service Specific Operations</a>
    <li><a href='#Environment'>Method Environment Operations</a>
    <li><a href='#Entity'>Entity Engine Operations</a>
    <li><a href='#Conditional'>Conditional (If) Operations</a>
    <li><a href='#MethodExample'>Simple Methods Example</a>
    </ul>
</ul>

<br>

<hr>
<h3><a name="Introduction">Introduction</a></h3>
<hr>
<p>The Mini-Language concept in Open For Business is similar to the Gang of Four Interpreter
pattern, or the Mark Grand Little Language pattern. This is also the central theme
of the Building Parsers with Java book by Steven John Metsker which the OFBiz Rule Engine
is based on. The idea is to create simple languages that simplify complex or
frequently performed tasks.</p>
<p>In business software there are things that are done
hundreds or thousands of times in a single application that a Mini-Language
can simplify to the point of cutting implementation and maintenance times not
by just 50%, but often as much as 70-90%. Yes, certain tasks will take only 10% of
the effort and knowledge to perform. This makes it easier people not familiar
with the software to manipulate existing or build new functionality.</p>
<p>Mini-Languages tend to have instructions that are more like method calls in a 
general purpose language. They are meant to solve a specific problem in a specific
context, and are generally worthless or need to be modified for other contexts
or problems.</p>
<p>Often this idea is implemented using a free form (BNF) or english-like syntax.
In Open For Business the Mini-Languages are expressed as XML files to simplify the
learning and manipulation of the syntax, in addition to making the Mini-Languages
easier to write and extend.</p>

<p>The DTD for the simple-map-processor and simple-method XML files is 
in the distribution in <b>ofbiz/core/docs/xmldefs/ofbiz/simple-methods.dtd</b> or
on the website at <a href='http://www.ofbiz.org/dtds/simple-methods.dtd'>www.ofbiz.org/dtds/simple-methods.dtd</a>.
These are combined into a single DTD to make it easy to use inlined 
simple-map-processors inside a simple-method.</p>

<p>To specify the DOCTYPE for a simple-map-processors XML file use the following:</p>
<pre>
&lt;!DOCTYPE simple-map-processors PUBLIC "-//OFBiz//DTD Simple Methods//EN" "http://www.ofbiz.org/dtds/simple-methods.dtd"&gt;
</pre>

<p>To specify the DOCTYPE for a simple-methods XML file use the following:</p>
<pre>
&lt;!DOCTYPE simple-methods PUBLIC "-//OFBiz//DTD Simple Methods//EN" "http://www.ofbiz.org/dtds/simple-methods.dtd"&gt;
</pre>

<p>The only difference between the two DOCTYPE definitions is the root node to use
from the DTD.</p>

<hr>
<h3><a name="Simple_Map_Processor">The Simple Map Processor Mini-Language</a></h3>
<ul>
<li><a href='#MapOverview'>Simple Map Processor Overview</a>
<li><a href='#MakeInString'>Make In String Operations</a>
<li><a href='#Process'>Process Field Operations</a>
<li><a href='#MapExample'>Simple Map Processors Example</a>
</ul>
<hr>

<h4><a name='MapOverview'>Simple Map Processor Overview</a></h4>

<p>The Simple Map Processor Mini-Language performes two primary tasks: validation
and conversion. It does this in a context of moving values from one Map to another. The
input map will commonly contain Strings, but can contain other object types like Integer, Long,
Float, Double, java.sql.Date, Time, and Timestamp.</p>

<hr>
<h4><a name='MakeInString'>Make In String Operations</a></h4>

<p><b><u>make-in-string</u></b></p>
<p>In addition to dealing with the fields already in the incoming Map you can build 
Strings and add them to the in-Map before the processing begins with the make-in-string tag. You can have zero or
many make-in-string tags, and they must all come before the process tags. Inside each
make-in-string is a list of snippets to concatenate together to make the final String. 
Each snippet can be another field in the in-Map (in-field element), a value from a properties 
file (property element), or a constant (constant element).</p>

<hr>
<h4><a name='Process'>Process Field Operations</a></h4>

<p><b><u>process</u></b></p>
<p>The process tag is used to contain the operations to be done on the specified 
field in the in-Map. It has one required attribute, the field to operate on. The
operations that it contains are: validate-method, compare, compare-field, regexp, 
not-empty, copy,  and convert.</p>

<p>All process operations tags except copy must contain one of two tags: 
fail-message or fail-property. If the operation fails a message is added to
the message list that is either the specified fail-message, or the String from
the properties file value that is specified in fail-property.</p>

<p>Messages are collected in List as the Simple Map Processor runs. If the List
is not empty when it completes then something failed in the map processor. This
is done so that all failures will be reported immediately rather than having to 
fix one failure before another can be discovered.</p>

<p>All process operations automatically convert the field value and other values
from their current type to the type specified for the operation, where applicable.
The ObjectType.simpleTypeConvert method is used to do the conversion. It supports
the following types: String, Double, Float, Long, Integer, Date, Time, and 
Timestamp. If the type is not specified String is the default.</p>

<p><b><u>process:validate-method</u></b></p>
<p>The validate-method tag is used to call any static method that accepts
a String and returns a boolean. If the field coming in is not a String
it will be converted to a String before calling the method. The two attributes
for this tag are class and method which should contain the fully qualified class 
name and the method name, respectively. If the class name is not specified it 
will default to org.ofbiz.core.util.UtilValidate.</p>

<p><b><u>process:compare</u></b></p>
<p>The compare tag is used to compare the field value to the value specified
in the value attribute. An operator must be specified to indicate
the comparison desired. Operators available include less, greater, less-equals, 
greater-equals, equals, not-equals, and contains.</p>

<p><b><u>process:compare-field</u></b></p>
<p>The compare-field tag is just like the compare tag except that instead
of specifying a value you specify the name of another field in the in-Map 
to compare the current field to.</p>

<p><b><u>process:regexp</u></b></p>
<p>The regexp tag validate the current field against the regular expression 
specified in the expr attribute of the tag. Standard Perl style regular
expressions are used with the ORO library from Jakarta.</p>

<p><b><u>process:not-empty</u></b></p>
<p>The not-empty tag verifies that the current field is not empty. If the
field is a String it must not be null and must have a length greater than
zero, otherwise it must simply not be null. The not-empty tag has no attributes.</p>

<p><b><u>process:copy</u></b></p>
<p>The copy operation simply copies the current field value to the out-Map from
the in-Map. There are three optional attributes. If a different field name is
desired in the out-Map it can be specified in the to-field attribute. The replace
attribute can be used to specify if an existing field in the out-Map should be 
replaced or not. The replace attribute defaults to true. The set-if-null 
attribute specifies whether or not the value should be put in the out-Map if
it is null. The default for set-if-null is false.</p>

<p><b><u>process:convert</u></b></p>
<p>The convert tag does the same thing as copy except that the type can be
converted to the type specified in the type attribute. The format attribute
can be used to specify the format for date/time fields. These two tags are
in addition to all of the the attributes in the copy tag.</p>

<hr>
<h4><a name='MapExample'>Simple Map Processors Example</a></h4>
<pre>
&lt;!DOCTYPE simple-map-processors PUBLIC "-//OFBiz//DTD Simple Methods//EN" "http://www.ofbiz.org/dtds/simple-methods.dtd"&gt;

&lt;simple-map-processors&gt;
  &lt;simple-map-processor name="update"&gt;
    &lt;make-in-string field="estimatedStartDate"&gt;
        &lt;in-field field="estimatedStartYear"&gt;&lt;constant&gt;-&lt;/constant&gt;
        &lt;in-field field="estimatedStartMonth"&gt;&lt;constant&gt;-&lt;/constant&gt;
        &lt;in-field field="estimatedStartDay"&gt;&lt;constant&gt;T&lt;/constant&gt;
        &lt;in-field field="estimatedStartHour"&gt;&lt;constant&gt;:&lt;/constant&gt;
        &lt;in-field field="estimatedStartMinute"&gt;&lt;constant&gt;:&lt;/constant&gt;
        &lt;in-field field="estimatedStartSecond"&gt;
    &lt;/make-in-string&gt;
    &lt;process field="workEffortId"&gt;&lt;copy replace="false"/&gt;&lt;/process&gt;
    &lt;process field="scopeEnumId"&gt;&lt;copy/&gt;&lt;/process&gt;
    &lt;process field="currentStatusId"&gt;&lt;copy/&gt;&lt;not-empty&gt;&lt;fail-message message="Status is missing."/&gt;&lt;/not-empty&gt;&lt;/process&gt;
    &lt;process field="priority"&gt;&lt;convert type="Long"&gt;&lt;fail-message message="Priority is not a valid whole number."/&gt;&lt;/convert&gt;&lt;/process&gt;
    &lt;process field="estimatedStartDate"&gt;
        &lt;compare-field operator="less" field="estimatedCompletionDate" type="Timestamp" format="yyyy-MM-dd'T'HH:mm:ss"&gt;
            &lt;fail-message message="Estimated Start date/time must be BEFORE End date/time."/&gt;&lt;/compare-field&gt;
        &lt;convert type="Timestamp" format="yyyy-MM-dd'T'HH:mm:ss"&gt;
            &lt;fail-message message="Estimated Start Date is not a valid Date-Time."/&gt;&lt;/convert&gt;&lt;/process&gt;
    &lt;process field="estimatedCompletionDate"&gt;
        &lt;convert type="Timestamp"&gt;&lt;fail-message message="Estimated Completion Date is not a valid Date-Time."/&gt;&lt;/convert&gt;&lt;/process&gt;
    &lt;process field="estimatedMilliSeconds"&gt;
        &lt;convert type="Double"&gt;&lt;fail-message message="Estimated Milli-seconds is not a valid number."/&gt;&lt;/convert&gt;&lt;/process&gt;
  &lt;/simple-map-processor&gt;
  &lt;simple-map-processor name="delete"&gt;
    &lt;process field="workEffortId"&gt;&lt;copy/&gt;&lt;not-empty&gt;&lt;fail-message message="Work Effort ID is missing."/&gt;&lt;/not-empty&gt;&lt;/process&gt;
  &lt;/simple-map-processor&gt;
&lt;/simple-map-processors&gt;
</pre>

<hr>
<h3><a name="Simple_Method">The Simple Method Mini-Language</a></h3>
<ul>
<li><a href='#MethodOverview'>Simple Method Overview</a>
<li><a href='#Call'>Call Operations</a>
<li><a href='#Event'>Event Specific Operations</a>
<li><a href='#Service'>Service Specific Operations</a>
<li><a href='#Environment'>Method Environment Operations</a>
<li><a href='#Entity'>Entity Engine Operations</a>
<li><a href='#Conditional'>Conditional (If) Operations</a>
<li><a href='#MethodExample'>Simple Methods Example</a>
</ul>
<hr>

<h4><a name='MethodOverview'>Simple Method Overview</a></h4>

<p>The Simple Method Mini-Language is a simple way to implement an event
that is invoked by the Control Servlet or a service that is invoked by the Service Engine.
A Simple Method can be invoked through the static methods on the SimpleMethod
class, or as an event through an entry in the controller configuration XML file
like the following:</p>

<pre>
    &lt;event type="simple" path="org/ofbiz/commonapp/workeffort/workeffort/WorkEffortSimpleEvents.xml" invoke="update"/&gt;
</pre>

<p>or as a service through an entry in a services.xml file like the following:

<pre>
    &lt;service name="createPartyRole" engine="simple"
            location="org/ofbiz/commonapp/party/party/PartyRoleServices.xml" invoke="createPartyRole" auth="true"&gt;
        &lt;description&gt;Create a Party Role (add a Role to a Party)&lt;/description&gt;
        &lt;attribute name="partyId" type="String" mode="IN" optional="true"/&gt;
        &lt;attribute name="roleTypeId" type="String" mode="IN" optional="false"/&gt;
    &lt;/service&gt;
</pre>

<p>The path or location for a Simple Method is the classpath and filename of the XML file.</p>

<p>In this Mini-Language you can invoke Simple Map Processors, Services and bsh scripts,
perform entity related operations, and create messages to return to the caller.
Speficic operations can be enclosed in if blocks to execute conditionally and
values or fields can be copied around in the maps, lists and method environment.</p>

<p>There are a number of tags which can be used to get and set attributes to/from
a request or session object when called as an event or to set attributes in the
result when called as a service. These operations are only applied when applicable. 
In other words if you include a <b>env-to-request</b> operation it will only be
invoked when the simple-method is called as an event and a <b>env-to-result</b>
operation will only be invoked when the simple-method is called as a service.
Everything else is the same when called as an event or a service which makes it
easy to write flexible logic that can be mounted/applied in various ways.</p>

<p>There are a number of objects that exist in the method environment when a
simple-method starts or that are used as it executes to keep track of certain 
information. Some will exist when called as an event or a service, these
are marked in the following list. Each name can be overridden using an attribute
on the <b>simple-method</b> tag. The defaults are listed below (you can also find 
them in the DTD).</p>

<p>Here is a complete list of the attributes of the simple-method tag:</p>

<table cellpadding='2' cellspacing='0' border='1'>
<tr>
    <td><b>Attribute&nbsp;Name</b></td>
    <td><b>Reqd?</b></td>
    <td><b>Default&nbsp;Value</b></td>
    <td><b>Description</b></td>
</tr>
<tr>
    <td>method-name</td><td>Y</td><td>N/A</td>
    <td>A name (preferrably a legal Java identifier) for this method. This name
    must be unique for the XML file it is in as it will be used to reference this
    method externally.</td>
</tr>
<tr>
    <td>short-description</td><td>Y</td><td>N/A</td>
    <td>A short description of the method for certain system error messages.</td>
</tr>
<tr>
    <td>login-required</td><td>N</td><td>"true"</td>
    <td>Is a logged in user (UserLogin object, or login.username and login.password Strings) required to run this method? "true" or "false".</td>
</tr>
<tr>
    <td>use-transaction</td><td>N</td><td>"true"</td>
    <td>Create a transaction if none exists for this thread? "true" or "false".</td>
</tr>
<tr>
    <td>default-error-code</td><td>N</td><td>"error"</td>
    <td>The default error return code.</td>
</tr>
<tr>
    <td>default-success-code</td><td>N</td><td>"success"</td>
    <td>The default success return code.</td>
</tr>
<tr>
    <td>parameter-map-name</td><td>N</td><td>"parameters"</td>
    <td>As event: copy of request parameters<br>As service: incoming context</td>
</tr>
<tr>
    <td>event-request-object-name</td><td>N</td><td>"request"</td>
    <td>(as event only)</td>
</tr>
<tr>
    <td>event-response-code-name</td><td>N</td><td>"_response_code_"</td>
    <td>(as event only)</td>
</tr>
<tr>
    <td>event-error-message-name</td><td>N</td><td>"_error_message_"</td>
    <td>(as event only)</td>
</tr>
<tr>
    <td>event-event-message-name</td><td>N</td><td>"_event_message_"</td>
    <td>(as event only)</td>
</tr>
<tr>
    <td>service-response-message-name</td><td>N</td><td>"responseMessage"</td>
    <td>(as service only)</td>
</tr>
<tr>
    <td>service-error-message-name</td><td>N</td><td>"errorMessage"</td>
    <td>(as service only)</td>
</tr>
<tr>
    <td>service-error-message-list-name</td><td>N</td><td>"errorMessageList"</td>
    <td>(as service only)</td>
</tr>
<tr>
    <td>service-success-message-name</td><td>N</td><td>"successMessage"</td>
    <td>(as service only)</td>
</tr>
<tr>
    <td>service-success-message-list-name</td><td>N</td><td>"successMessageList"</td>
    <td>(as service only)</td>
</tr>
<tr>
    <td>delegator-name</td><td>N</td><td>"delegator"</td>
    <td>A GenericDelegator object to use in the method</td>
</tr>
<tr>
    <td>security-name</td><td>N</td><td>"security"</td>
    <td>A Security object to use in the method</td>
</tr>
<tr>
    <td>dispatcher-name</td><td>N</td><td>"dispatcher"</td>
    <td>A LocalDispatcher object to use in the method</td>
</tr>
</table>

<p>Okay, enough of the general stuff, here is a catalog and description of the 
available operations.</p>

<!-- ======================================================================= -->
<!-- ======================================================================= -->
<hr>
<h4><a name='Call'>Call Operations</a></h4>

<p><b><u>call-map-processor</u></b></p>

<table cellpadding='2' cellspacing='0' border='1'>
<tr>
    <td><b>Attribute&nbsp;Name</b></td>
    <td><b>Required?</b></td>
    <td><b>Description</b></td>
</tr>
<tr>
    <td>xml-resource</td><td>N</td>
    <td>The full path and filename on the classpath of the XML file which
    contains an external map processor to execute. This is only required if
    an external map processor is desired.</td>
</tr>
<tr>
    <td>processor-name</td><td>N</td>
    <td>The name of the external map processor to execute in the specified 
    xml-resource. This is only required if an external map processor is desired.</td>
</tr>
<tr>
    <td>in-map-name</td><td>Y</td>
    <td>The name of a map in the method environment to use as the input map.</td>
</tr>
<tr>
    <td>out-map-name</td><td>Y</td>
    <td>The name of a map in the method environment to use as the output map.
    Will be created if it does not exist already. If already exists will be added
    to in place.</td>
</tr>
<tr>
    <td>error-list-name</td><td>N</td>
    <td>The name of a list in the method environment that the error messages will
    be added to. Will be created if does not exist. Defaults to "error_list".</td>
</tr>
</table>
<br>
<table cellpadding='2' cellspacing='0' border='1'>
<tr>
    <td><b>Sub-Element&nbsp;Name</b></td>
    <td><b>How&nbsp;Many</b></td>
    <td><b>Description</b></td>
</tr>
<tr>
    <td>simple-map-processor</td><td>0 or 1</td>
    <td>Uses the same definition as the simple-map-processor in the context of
    a simple-map-processors XML file. Allows for an inlined simple-map-processor.</td>
</tr>
</table>

<p>The call-map-processor tag invokes a simple map processor from an existing 
map, creating a new map or adding to an existing one if the named out-map already
exists. Resulting messages are added to the named list, and a new list is
created if a list with the given name does not yet exist. Note that all lists 
and maps exist in the same context and must have unique names.</p>

<p>An inline simple-map-processor can be used by putting a <b>simple-map-processor</b>
tag under the <b>call-map-processor</b> tag. If both an external and an inline 
map-processor are specified, the external one will be called first, allowing the 
inline one to override its behavior</p>

<p><b><u>call-service</u></b></p>

<table cellpadding='2' cellspacing='0' border='1'>
<tr>
    <td><b>Attribute&nbsp;Name</b></td>
    <td><b>Required?</b></td>
    <td><b>Description</b></td>
</tr>
<tr>
    <td>service-name</td><td>Y</td>
    <td></td>
</tr>
<tr>
    <td>in-map-name</td><td>Y</td>
    <td></td>
</tr>
<tr>
    <td>include-user-login</td><td>N</td>
    <td>Defaults to "true".</td>
</tr>
<tr>
    <td>error-code</td><td>N</td>
    <td>Defaults to "error".</td>
</tr>
<tr>
    <td>success-code</td><td>N</td>
    <td>Defaults to "success".</td>
</tr>
</table>
<br>
<table cellpadding='2' cellspacing='0' border='1'>
<tr>
    <td><b>Sub-Element&nbsp;Name</b></td>
    <td><b>How&nbsp;Many</b></td>
    <td><b>Description</b></td>
</tr>
<tr>
    <td>error-prefix</td><td>0 or 1</td>
    <td></td>
</tr>
<tr>
    <td>error-suffix</td><td>0 or 1</td>
    <td></td>
</tr>
<tr>
    <td>success-prefix</td><td>0 or 1</td>
    <td></td>
</tr>
<tr>
    <td>success-suffix</td><td>0 or 1</td>
    <td></td>
</tr>
<tr>
    <td>message-prefix</td><td>0 or 1</td>
    <td></td>
</tr>
<tr>
    <td>message-suffix</td><td>0 or 1</td>
    <td></td>
</tr>
<tr>
    <td>default-message</td><td>0 or 1</td>
    <td></td>
</tr>
<tr>
    <td>results-to-map</td><td>0 to many</td>
    <td></td>
</tr>
<tr>
    <td>result-to-field</td><td>0 to many</td>
    <td></td>
</tr>
<tr>
    <td>result-to-request</td><td>0 to many</td>
    <td></td>
</tr>
<tr>
    <td>result-to-session</td><td>0 to many</td>
    <td></td>
</tr>
<tr>
    <td>result-to-result</td><td>0 to many</td>
    <td></td>
</tr>
</table>

<p>The call-service tag invokes a service through the Service Engine. If the
specified error code is returned from the service, the event is aborted
and the transaction in the current thread is rolled back. Otherwise, the
remaining operations are invoked.</p>

<p>The result-to-request and result-to-session elements will be IGNORED when 
called in a service context. So, they are ONLY used when called in an event context.</p>

<p><b><u>call-service-asynch</u></b></p>
<table cellpadding='2' cellspacing='0' border='1'>
<tr>
    <td><b>Attribute&nbsp;Name</b></td>
    <td><b>Required?</b></td>
    <td><b>Description</b></td>
</tr>
<tr>
    <td>service-name</td><td>Y</td>
    <td></td>
</tr>
<tr>
    <td>in-map-name</td><td>Y</td>
    <td></td>
</tr>
<tr>
    <td>include-user-login</td><td>N</td>
    <td>Defaults to "true".</td>
</tr>
</table>

<p>Calls a service asynchronously and ignores the result, so no return messages 
are used; that doesn't mean no errors will result, but they would just be
system errors like database failures, etc which all have system error messages.</p>

<p><b><u>call-bsh</u></b></p>
<table cellpadding='2' cellspacing='0' border='1'>
<tr>
    <td><b>Attribute&nbsp;Name</b></td>
    <td><b>Required?</b></td>
    <td><b>Description</b></td>
</tr>
<tr>
    <td>resource</td><td>N</td>
    <td></td>
</tr>
<tr>
    <td>error-list-name</td><td>N</td>
    <td>Defaults to "error_list".</td>
</tr>
</table>
<p>Runs an external bsh script from the classpath if resource is specified and 
then runs the inlined bsh script if any is specified.</p>

<p>The bsh context is the current simple-method environment including maps, lists
and special objects whose names are defined in the simple-method attributes.</p>

<p>The current env cannot be modified, but if a Map is returned by the bsh block
the entries in the map will be put into the current env.</p>

<p>Error messages go on the error list and are handled with the check-errors tag.</p>

<p><b><u>check-errors</u></b></p>
<table cellpadding='2' cellspacing='0' border='1'>
<tr>
    <td><b>Attribute&nbsp;Name</b></td>
    <td><b>Required?</b></td>
    <td><b>Description</b></td>
</tr>
<tr>
    <td>error-code</td><td>N</td>
    <td>Defaults to "error".</td>
</tr>
<tr>
    <td>error-list-name</td><td>N</td>
    <td>Defaults to "error_list".</td>
</tr>
</table>

<p>The message lists from invoking are not checked until the check-errors tag
is used. The named list is checked and if it contains any messages they are 
put in the servlet request object and the specified error code is returned to
the control servlet.</p>

<!-- ======================================================================= -->
<!-- ======================================================================= -->
<hr>
<h4><a name='Event'>Event Specific Operations</a></h4>

<p><b><u>field-to-request</u></b></p>
<table cellpadding='2' cellspacing='0' border='1'>
<tr>
    <td><b>Attribute&nbsp;Name</b></td>
    <td><b>Required?</b></td>
    <td><b>Description</b></td>
</tr>
<tr>
    <td>map-name</td><td>N</td>
    <td>The name of the map in the method environment. If not specified the 
    field-name will be used to get the field from the method environment.</td>
</tr>
<tr>
    <td>field-name</td><td>Y</td>
    <td>The name (key) of the map field to use.</td>
</tr>
<tr>
    <td>request-name</td><td>N</td>
    <td>The name of the request attribute to use. Defaults to the field-name.</td>
</tr>
</table>
<p>The field-to-request tag copies a field from a map to the specified servlet request
attribute.</p>

<p>The tag is only used when the simple-method is called as an event, it is ignored otherwise.</p>

<p><b><u>field-to-session</u></b></p>
<table cellpadding='2' cellspacing='0' border='1'>
<tr>
    <td><b>Attribute&nbsp;Name</b></td>
    <td><b>Required?</b></td>
    <td><b>Description</b></td>
</tr>
<tr>
    <td>map-name</td><td>N</td>
    <td>The name of the map in the method environment. If not specified the 
    field-name will be used to get the field from the method environment.</td>
</tr>
<tr>
    <td>field-name</td><td>Y</td>
    <td>The name (key) of the map field to use.</td>
</tr>
<tr>
    <td>session-name</td><td>N</td>
    <td>The name of the session attribute to use. Defaults to the field-name.</td>
</tr>
</table>
<p>The field-to-session tag copies a field from a map to the specified servlet session
attribute.</p>

<p>The tag is only used when the simple-method is called as an event, it is ignored otherwise.</p>

<p><b><u>request-to-field</u></b></p>
<table cellpadding='2' cellspacing='0' border='1'>
<tr>
    <td><b>Attribute&nbsp;Name</b></td>
    <td><b>Required?</b></td>
    <td><b>Description</b></td>
</tr>
<tr>
    <td>map-name</td><td>N</td>
    <td>The name of the map in the method environment. If not specified the 
    field-name will be used to set the field in the method environment.</td>
</tr>
<tr>
    <td>field-name</td><td>Y</td>
    <td>The name (key) of the map field to use.</td>
</tr>
<tr>
    <td>default</td><td>N</td>
    <td>A default value to use if the request attribute is null or is a String and is empty.
    This will also be used when NOT running as an event.</td>
</tr>
<tr>
    <td>request-name</td><td>N</td>
    <td>The name of the request attribute to use. Defaults to the field-name.</td>
</tr>
</table>
<p>The request-to-field tag copies an attribute from the servlet request to a field of a 
map in the method environment.</p>

<p>The tag is only used when the simple-method is called as an event, it is ignored otherwise (except the default value, if specified).</p>

<p><b><u>session-to-field</u></b></p>
<table cellpadding='2' cellspacing='0' border='1'>
<tr>
    <td><b>Attribute&nbsp;Name</b></td>
    <td><b>Required?</b></td>
    <td><b>Description</b></td>
</tr>
<tr>
    <td>map-name</td><td>N</td>
    <td>The name of the map in the method environment. If not specified the 
    field-name will be used to set the field in the method environment.</td>
</tr>
<tr>
    <td>field-name</td><td>Y</td>
    <td>The name (key) of the map field to use.</td>
</tr>
<tr>
    <td>default</td><td>N</td>
    <td>A default value to use if the session attribute is null or is a String and is empty.
    This will also be used when NOT running as an event.</td>
</tr>
<tr>
    <td>session-name</td><td>N</td>
    <td>The name of the session attribute to use. Defaults to the field-name.</td>
</tr>
</table>
<p>The session-to-field tag copies an attribute from the servlet session to a field of a 
map in the method environment.</p>

<p>The tag is only used when the simple-method is called as an event, it is ignored otherwise (except the default value, if specified).</p>

<p><b><u>webapp-property-to-field</u></b></p>
<table cellpadding='2' cellspacing='0' border='1'>
<tr>
    <td><b>Attribute&nbsp;Name</b></td>
    <td><b>Required?</b></td>
    <td><b>Description</b></td>
</tr>
<tr>
    <td>resource</td><td>Y</td>
    <td>The resource location of the properties file inside the webapp,
    and relative to the root of the webapp (can be inside a war file).
    An example of this is "/WEB-INF/myprops.properties".</td>
</tr>
<tr>
    <td>property</td><td>Y</td>
    <td>The property whose value will be put in the field.</td>
</tr>
<tr>
    <td>default</td><td>N</td>
    <td>A default value to use if the property value is null or empty.
    This will also be used when NOT running as an event.</td>
</tr>
<tr>
    <td>map-name</td><td>N</td>
    <td>The name of the map in the method environment. If not specified the 
    field-name will be used to set the field in the method environment.</td>
</tr>
<tr>
    <td>field-name</td><td>Y</td>
    <td>The name (key) of the map field to use.</td>
</tr>
</table>
<p>The webapp-property-to-field tag copies a property value from a properties file in a ServletContext resource to a field.</p>

<p>The tag is only used when the simple-method is called as an event, it is ignored otherwise (except the default value, if specified).</p>

<!-- ======================================================================= -->
<!-- ======================================================================= -->
<hr>
<h4><a name='Service'>Service Specific Operations</a></h4>

<p><b><u>field-to-result</u></b></p>
<table cellpadding='2' cellspacing='0' border='1'>
<tr>
    <td><b>Attribute&nbsp;Name</b></td>
    <td><b>Required?</b></td>
    <td><b>Description</b></td>
</tr>
<tr>
    <td>map-name</td><td>N</td>
    <td>The name of the map in the method environment. If not specified the 
    field-name will be used to get the field from the method environment.</td>
</tr>
<tr>
    <td>field-name</td><td>Y</td>
    <td>The name (key) of the map field to use.</td>
</tr>
<tr>
    <td>result-name</td><td>N</td>
    <td>The name of the request attribute to use. Defaults to the field-name.</td>
</tr>
</table>
<p>The field-to-result tag copies a field from a map to the specified service 
result field.</p>

<p>The tag is only used when the simple-method is called as a service, it is ignored otherwise.</p>

<!-- ======================================================================= -->
<!-- ======================================================================= -->
<hr>
<h4><a name='Environment'>Method Environment Operations</a></h4>

<p><b><u>field-to-field</u></b></p>
<table cellpadding='2' cellspacing='0' border='1'>
<tr>
    <td><b>Attribute&nbsp;Name</b></td>
    <td><b>Required?</b></td>
    <td><b>Description</b></td>
</tr>
<tr>
    <td>map-name</td><td>Y</td>
    <td>The name of the map in the method environment the field will come from.</td>
</tr>
<tr>
    <td>field-name</td><td>Y</td>
    <td>The name (key) of the map field to copy.</td>
</tr>
<tr>
    <td>to-map-name</td><td>N</td>
    <td>The name of the map in the method environment the field will go to.
    If empty will default to the map-name.</td>
</tr>
<tr>
    <td>to-field-name</td><td>N</td>
    <td>The name (key) of the map field to put the original field in.
    If empty will default to the field-name.</td>
</tr>
</table>
<p>The field-to-field tag copies a field from a map to a field in another map.</p>

<p><b><u>field-to-list</u></b></p>
<table cellpadding='2' cellspacing='0' border='1'>
<tr>
    <td><b>Attribute&nbsp;Name</b></td>
    <td><b>Required?</b></td>
    <td><b>Description</b></td>
</tr>
<tr>
    <td>map-name</td><td>N</td>
    <td>The name of the map in the method environment. If not specified the 
    field-name will be used to get the field from the method environment.</td>
</tr>
<tr>
    <td>field-name</td><td>Y</td>
    <td>The name (key) of the map field to use.</td>
</tr>
<tr>
    <td>list-name</td><td>Y</td>
    <td>The name of the list in the method environment that the object will be appended to.</td>
</tr>
</table>
<p>The field-to-list tag appends a field to the specified list.</p>

<p><b><u>env-to-field</u></b></p>
<table cellpadding='2' cellspacing='0' border='1'>
<tr>
    <td><b>Attribute&nbsp;Name</b></td>
    <td><b>Required?</b></td>
    <td><b>Description</b></td>
</tr>
<tr>
    <td>env-name</td><td>Y</td>
    <td>The name of the method environment field the object will come from.</td>
</tr>
<tr>
    <td>map-name</td><td>Y</td>
    <td>The name of the map in the method environment the field will go to.</td>
</tr>
<tr>
    <td>field-name</td><td>N</td>
    <td>The name (key) of the map field to put the original field in.
    If empty will default to the env-name.</td>
</tr>
</table>
<p>The env-to-field tag copies a field from the method environment to a field in a map.</p>

<p><b><u>field-to-env</u></b></p>
<table cellpadding='2' cellspacing='0' border='1'>
<tr>
    <td><b>Attribute&nbsp;Name</b></td>
    <td><b>Required?</b></td>
    <td><b>Description</b></td>
</tr>
<tr>
    <td>env-name</td><td>Y</td>
    <td>The name of the method environment field the object will be put in.</td>
</tr>
<tr>
    <td>map-name</td><td>Y</td>
    <td>The name of the map in the method environment the field will come from.</td>
</tr>
<tr>
    <td>field-name</td><td>N</td>
    <td>The name (key) of the map field to get the object from.
    If empty will default to the env-name.</td>
</tr>
</table>
<p>The field-to-env tag copies a field from a map to a field in the method environment.</p>

<p><b><u>string-to-field</u></b></p>
<table cellpadding='2' cellspacing='0' border='1'>
<tr>
    <td><b>Attribute&nbsp;Name</b></td>
    <td><b>Required?</b></td>
    <td><b>Description</b></td>
</tr>
<tr>
    <td>string</td><td>Y</td>
    <td>The string value to be put in the field.</td>
</tr>
<tr>
    <td>map-name</td><td>N</td>
    <td>The name of the map in the method environment. If not specified the 
    field-name will be used to get the field from the method environment.</td>
</tr>
<tr>
    <td>field-name</td><td>Y</td>
    <td>The name (key) of the map field to use.</td>
</tr>
</table>
<p>The string-to-field tag put the inlined string value in the specified field.</p>

<p><b><u>property-to-field</u></b></p>
<table cellpadding='2' cellspacing='0' border='1'>
<tr>
    <td><b>Attribute&nbsp;Name</b></td>
    <td><b>Required?</b></td>
    <td><b>Description</b></td>
</tr>
<tr>
    <td>resource</td><td>Y</td>
    <td>The resource location of the properties file.</td>
</tr>
<tr>
    <td>property</td><td>Y</td>
    <td>The property whose value will be put in the field.</td>
</tr>
<tr>
    <td>default</td><td>N</td>
    <td>The default value to use if the specified property is empty.</td>
</tr>
<tr>
    <td>map-name</td><td>N</td>
    <td>The name of the map in the method environment. If not specified the 
    field-name will be used to get the field from the method environment.</td>
</tr>
<tr>
    <td>field-name</td><td>Y</td>
    <td>The name (key) of the map field to use.</td>
</tr>
</table>
<p>The property-to-field tag put the inlined string value in the specified field.</p>

<!-- ======================================================================= -->
<!-- ======================================================================= -->
<hr>
<h4><a name='Entity'>Entity Engine Operations</a></h4>

<p><b><u>now-timestamp-to-env</u></b></p>
<table cellpadding='2' cellspacing='0' border='1'>
<tr>
    <td><b>Attribute&nbsp;Name</b></td>
    <td><b>Required?</b></td>
    <td><b>Description</b></td>
</tr>
<tr>
    <td>env-name</td><td>Y</td>
    <td>The name of the method environment field the timestamp will be put in.</td>
</tr>
</table>
<p>The now-timestamp-to-env tag creates a java.sql.Timestamp object with the current date
and time in it and puts it in a field in the method environment.</p>

<p><b><u>now-date-to-env</u></b></p>
<table cellpadding='2' cellspacing='0' border='1'>
<tr>
    <td><b>Attribute&nbsp;Name</b></td>
    <td><b>Required?</b></td>
    <td><b>Description</b></td>
</tr>
<tr>
    <td>env-name</td><td>Y</td>
    <td>The name of the method environment field the date will be put in.</td>
</tr>
</table>
<p>The now-date-to-env tag creates a java.sql.Date object with the current date
in it and puts it in a field in the method environment.</p>

<p><b><u>sequenced-id-to-env</u></b></p>
<table cellpadding='2' cellspacing='0' border='1'>
<tr>
    <td><b>Attribute&nbsp;Name</b></td>
    <td><b>Required?</b></td>
    <td><b>Description</b></td>
</tr>
<tr>
    <td>sequence-name</td><td>Y</td>
    <td>The name of the sequence to pass to the delegator. The same name must
    always be used for sequenced IDs that will be used for a certain entity 
    field otherwise non-unique keys may result.</td>
</tr>
<tr>
    <td>env-name</td><td>Y</td>
    <td>The name of the method environment field the sequenced ID will be put in.</td>
</tr>
</table>
<p>The sequenced-id-to-env tag gets a sequenced ID from the Entity Engine (through
the delegator) and puts it in the specified method environment field. The object
will be a java.lang.Long, but can of course be converted to a String.</p>

<p><b><u>set-current-user-login</u></b></p>
<table cellpadding='2' cellspacing='0' border='1'>
<tr>
    <td><b>Attribute&nbsp;Name</b></td>
    <td><b>Required?</b></td>
    <td><b>Description</b></td>
</tr>
<tr>
    <td>value-name</td><td>Y</td>
    <td>The name of the method environment field that contains the UserLogin GenericValue object.</td>
</tr>
</table>
<p>The set-current-user-login tag sets the UserLogin GenericValue object to be 
used for authentication for the rest of the method. This is mostly used for 
calling services, etc.</p>

<p><b><u>find-by-primary-key</u></b></p>
<table cellpadding='2' cellspacing='0' border='1'>
<tr>
    <td><b>Attribute&nbsp;Name</b></td>
    <td><b>Required?</b></td>
    <td><b>Description</b></td>
</tr>
<tr>
    <td>value-name</td><td>Y</td>
    <td>The name of the method environment field that contains the GenericValue object.</td>
</tr>
<tr>
    <td>entity-name</td><td>Y</td>
    <td>The name of the entity to find an instance of.</td>
</tr>
<tr>
    <td>map-name</td><td>Y</td>
    <td>The name of a map in the method environment that will be used for the
    entity fields.</td>
</tr>
<tr>
    <td>use-cache</td><td>N</td>
    <td>Specifies whether or not the delegator's cache should be searched before
    going to the database. This results in much faster retreival times, but can
    return stale data that is not the most current in the database. Must be 
    "true" or "false", defaults to "false".</td>
</tr>
</table>
<p>The find-by-primary-key tag uses the delegator to find an entity value by
its primary key. The resulting GenericValue object will be placed in the method
environment using the specified value-name.</p>

<p><b><u>find-by-and</u></b></p>
<table cellpadding='2' cellspacing='0' border='1'>
<tr>
    <td><b>Attribute&nbsp;Name</b></td>
    <td><b>Required?</b></td>
    <td><b>Description</b></td>
</tr>
<tr>
    <td>list-name</td><td>Y</td>
    <td>The name of the method environment field that contains the list of GenericValue objects.</td>
</tr>
<tr>
    <td>entity-name</td><td>Y</td>
    <td>The name of the entity to find instances of.</td>
</tr>
<tr>
    <td>map-name</td><td>Y</td>
    <td>The name of a map in the method environment that will be used for the
    entity fields.</td>
</tr>
<tr>
    <td>use-cache</td><td>N</td>
    <td>Specifies whether or not the delegator's cache should be searched before
    going to the database. This results in much faster retreival times, but can
    return stale data that is not the most current in the database. Must be 
    "true" or "false", defaults to "false".</td>
</tr>
</table>
<p>The find-by-and tag uses the delegator to find entity values by
anding the fields passed in the map. The resulting GenericValue objects will be 
placed in the method environment using the specified list-name.</p>

<p><b><u>make-value</u></b></p>
<table cellpadding='2' cellspacing='0' border='1'>
<tr>
    <td><b>Attribute&nbsp;Name</b></td>
    <td><b>Required?</b></td>
    <td><b>Description</b></td>
</tr>
<tr>
    <td>value-name</td><td>Y</td>
    <td>The name of the method environment field that contains the GenericValue object.</td>
</tr>
<tr>
    <td>entity-name</td><td>Y</td>
    <td>The name of the entity to construct an instance of.</td>
</tr>
<tr>
    <td>map-name</td><td>Y</td>
    <td>The name of a map in the method environment that will be used for the
    entity fields.</td>
</tr>
</table>
<p>The make-value tag uses the delegator to construct an entity value.
The resulting value will not necessarily exist in the database, but will simply
be assembled using the entity-name and fields map.
The resulting GenericValue object will be placed in the method
environment using the specified value-name.</p>

<p><b><u>make-value</u></b></p>
<table cellpadding='2' cellspacing='0' border='1'>
<tr>
    <td><b>Attribute&nbsp;Name</b></td>
    <td><b>Required?</b></td>
    <td><b>Description</b></td>
</tr>
<tr>
    <td>value-name</td><td>Y</td>
    <td>The name of the method environment field that contains the GenericValue object.</td>
</tr>
<tr>
    <td>new-value-name</td><td>Y</td>
    <td>The name of the method environment field that will contain the new GenericValue object.</td>
</tr>
</table>
<p>The clone-value tag make a copy of the value in the method environment field 
specified by value-name. The resulting GenericValue object will be placed in the method
environment using the specified new-value-name.</p>

<p><b><u>create-value</u></b></p>
<table cellpadding='2' cellspacing='0' border='1'>
<tr>
    <td><b>Attribute&nbsp;Name</b></td>
    <td><b>Required?</b></td>
    <td><b>Description</b></td>
</tr>
<tr>
    <td>value-name</td><td>Y</td>
    <td>The name of the method environment field that contains the GenericValue object.</td>
</tr>
</table>
<p>The create-value tag persists the specified GenericValue object by creating a
new instance of the entity in the datasource. An error will result if an 
instance of the entity exists in the datasource with the same primary key.</p>

<p><b><u>store-value</u></b></p>
<table cellpadding='2' cellspacing='0' border='1'>
<tr>
    <td><b>Attribute&nbsp;Name</b></td>
    <td><b>Required?</b></td>
    <td><b>Description</b></td>
</tr>
<tr>
    <td>value-name</td><td>Y</td>
    <td>The name of the method environment field that contains the GenericValue object.</td>
</tr>
</table>
<p>The store-value tag persists the specified GenericValue object by updating the
instance of the entity in the datasource. An error will result if an 
instance of the entity does not exist in the datasource with the same primary key.</p>

<p><b><u>remove-value</u></b></p>
<table cellpadding='2' cellspacing='0' border='1'>
<tr>
    <td><b>Attribute&nbsp;Name</b></td>
    <td><b>Required?</b></td>
    <td><b>Description</b></td>
</tr>
<tr>
    <td>value-name</td><td>Y</td>
    <td>The name of the method environment field that contains the GenericValue object.</td>
</tr>
</table>
<p>The remove-value tag removes the specified GenericValue object by removing the
instance of the entity in the datasource. An error will result if an 
instance of the entity does not exist in the datasource with the same primary key.</p>

<p><b><u>remove-by-and</u></b></p>
<table cellpadding='2' cellspacing='0' border='1'>
<tr>
    <td><b>Attribute&nbsp;Name</b></td>
    <td><b>Required?</b></td>
    <td><b>Description</b></td>
</tr>
<tr>
    <td>entity-name</td><td>Y</td>
    <td>The name of the entity to remove instances of.</td>
</tr>
<tr>
    <td>map-name</td><td>Y</td>
    <td>The name of a map in the method environment that will be used for the
    entity fields.</td>
</tr>
</table>
<p>The remove-by-and tag uses the delegator to remove entity values from the 
datasource and is constrained by anding the fields passed in the map. Make sure
the map contains something, or all values will be removed.</p>

<p><b><u>store-list</u></b></p>
<table cellpadding='2' cellspacing='0' border='1'>
<tr>
    <td><b>Attribute&nbsp;Name</b></td>
    <td><b>Required?</b></td>
    <td><b>Description</b></td>
</tr>
<tr>
    <td>list-name</td><td>Y</td>
    <td>The name of the method environment field that contains the list of GenericValue objects.</td>
</tr>
</table>
<p>The store-list tag uses the delegator to store all entity values in the list.
This is different than storing a single value in that values in the list will
be inserted if it does not exist or updated if it does exist.</p>

<p><b><u>remove-list</u></b></p>
<table cellpadding='2' cellspacing='0' border='1'>
<tr>
    <td><b>Attribute&nbsp;Name</b></td>
    <td><b>Required?</b></td>
    <td><b>Description</b></td>
</tr>
<tr>
    <td>list-name</td><td>Y</td>
    <td>The name of the method environment field that contains the list of GenericValue objects.</td>
</tr>
</table>
<p>The remove-list tag uses the delegator to remove all entity values in the list.
For each value in the list if it is a primary key just that entity instance will
be removed, but if it is not a full primary key all entity instances will be
removed from the datasource that match the constraint of the field map.</p>

<!-- ======================================================================= -->
<!-- ======================================================================= -->
<hr>
<h4><a name='Conditional'>Conditional (If) Operations</a></h4>

<p><b><u>if-validate-method</u></b></p>
<table cellpadding='2' cellspacing='0' border='1'>
<tr>
    <td><b>Attribute&nbsp;Name</b></td>
    <td><b>Required?</b></td>
    <td><b>Description</b></td>
</tr>
<tr>
    <td>map-name</td><td>N</td>
    <td>The name of the method environment field that contains the map that the 
    field to be validated will come from. If not specified the field-name will
    be treated as a method environment field name (an env-name).</td>
</tr>
<tr>
    <td>field-name</td><td>Y</td>
    <td>The name of the map field that will be validated.</td>
</tr>
<tr>
    <td>method</td><td>Y</td>
    <td>The name of the method that will be called to validate the field. It
    must be a static method that takes a single String parameter and return a boolean.</td>
</tr>
<tr>
    <td>class</td><td>N</td>
    <td>The name of the class that contains the validation method. If not 
    specified defaults to "org.ofbiz.core.util.UtilValidate".</td>
</tr>
</table>
<p>The operations contained by the if-validate-method tag will only be executed
if the validate method returns true. This tag can contain any of the simple-method
operations, including the conditional/if operations.</p>

<p><b><u>if-compare</u></b></p>
<table cellpadding='2' cellspacing='0' border='1'>
<tr>
    <td><b>Attribute&nbsp;Name</b></td>
    <td><b>Required?</b></td>
    <td><b>Description</b></td>
</tr>
<tr>
    <td>map-name</td><td>N</td>
    <td>The name of the method environment field that contains the map that the 
    field to be validated will come from. If not specified the field-name will
    be treated as a method environment field name (an env-name).</td>
</tr>
<tr>
    <td>field-name</td><td>Y</td>
    <td>The name of the map field that will be compared.</td>
</tr>
<tr>
    <td>operator</td><td>Y</td>
    <td>Specified the comparison operator must be one of the following:
    less, greater, less-equals, greater-equals, equals, not-equals, or contains.</td>
</tr>
<tr>
    <td>value</td><td>Y</td>
    <td>The value that the field will compared to. Must be a String, but can be
    converted to other types.</td>
</tr>
<tr>
    <td>type</td><td>N</td>
    <td>The data type to use for the comparison. Must be one of the following:
    String, Double, Float, Long, Integer, Date, Time, or Timestamp. If no type
    is specified the default will be String.</td>
</tr>
<tr>
    <td>format</td><td>N</td>
    <td>A format specifier to use when converting String objects to other data
    types, mainly Date, Time and Timestamp.</td>
</tr>
</table>
<p>The operations contained by the if-compare tag will only be executed
if the comparison returns true. This tag can contain any of the simple-method
operations, including the conditional/if operations.</p>

<p><b><u>if-compare-field</u></b></p>
<table cellpadding='2' cellspacing='0' border='1'>
<tr>
    <td><b>Attribute&nbsp;Name</b></td>
    <td><b>Required?</b></td>
    <td><b>Description</b></td>
</tr>
<tr>
    <td>map-name</td><td>N</td>
    <td>The name of the method environment field that contains the map that the 
    field to be validated will come from. If not specified the field-name will
    be treated as a method environment field name (an env-name).</td>
</tr>
<tr>
    <td>field-name</td><td>Y</td>
    <td>The name of the map field that will be compared.</td>
</tr>
<tr>
    <td>operator</td><td>Y</td>
    <td>Specified the comparison operator must be one of the following:
    less, greater, less-equals, greater-equals, equals, not-equals, or contains.</td>
</tr>
<tr>
    <td>to-map-name</td><td>N</td>
    <td>The name of the method environment field that contains the map that the 
    field to be compared will come from. If left empty will default to the map-name, 
    or the method environment if map-name is also unspecified.</td>
</tr>
<tr>
    <td>to-field-name</td><td>N</td>
    <td>The name of the to-map field that the main field will be compared to.
    If left empty will default to the field-name.</td>
</tr>
<tr>
    <td>type</td><td>N</td>
    <td>The data type to use for the comparison. Must be one of the following:
    String, Double, Float, Long, Integer, Date, Time, or Timestamp. If no type
    is specified the default will be String.</td>
</tr>
<tr>
    <td>format</td><td>N</td>
    <td>A format specifier to use when converting String objects to other data
    types, mainly Date, Time and Timestamp.</td>
</tr>
</table>
<p>The operations contained by the if-compare-field tag will only be executed
if the comparison returns true. This tag can contain any of the simple-method
operations, including the conditional/if operations.</p>

<p><b><u>if-regexp</u></b></p>
<table cellpadding='2' cellspacing='0' border='1'>
<tr>
    <td><b>Attribute&nbsp;Name</b></td>
    <td><b>Required?</b></td>
    <td><b>Description</b></td>
</tr>
<tr>
    <td>map-name</td><td>N</td>
    <td>The name of the method environment field that contains the map that the 
    field to be validated will come from. If not specified the field-name will
    be treated as a method environment field name (an env-name).</td>
</tr>
<tr>
    <td>field-name</td><td>Y</td>
    <td>The name of the map field that will be compared.</td>
</tr>
<tr>
    <td>expr</td><td>Y</td>
    <td>A regular expression that the map value must comply with.</td>
</tr>
</table>
<p>The operations contained by the if-regexp tag will only be executed
if the value complies with the regular expression. This tag can contain any of the simple-method
operations, including the conditional/if operations.</p>

<p><b><u>if-empty</u></b></p>
<table cellpadding='2' cellspacing='0' border='1'>
<tr>
    <td><b>Attribute&nbsp;Name</b></td>
    <td><b>Required?</b></td>
    <td><b>Description</b></td>
</tr>
<tr>
    <td>map-name</td><td>N</td>
    <td>The name of the method environment field that contains the map that the 
    field to be validated will come from. If not specified the field-name will
    be treated as a method environment field name (an env-name).</td>
</tr>
<tr>
    <td>field-name</td><td>Y</td>
    <td>The name of the map field that will be compared.</td>
</tr>
</table>
<p>The operations contained by the if-empty tag will only be executed
if the map field is empty. This tag can contain any of the simple-method
operations, including the conditional/if operations.</p>

<p><b><u>if-not-empty</u></b></p>
<table cellpadding='2' cellspacing='0' border='1'>
<tr>
    <td><b>Attribute&nbsp;Name</b></td>
    <td><b>Required?</b></td>
    <td><b>Description</b></td>
</tr>
<tr>
    <td>map-name</td><td>N</td>
    <td>The name of the method environment field that contains the map that the 
    field to be validated will come from. If not specified the field-name will
    be treated as a method environment field name (an env-name).</td>
</tr>
<tr>
    <td>field-name</td><td>Y</td>
    <td>The name of the map field that will be compared.</td>
</tr>
</table>
<p>The operations contained by the if-not-empty tag will only be executed
if the map field is not empty. This tag can contain any of the simple-method
operations, including the conditional/if operations.</p>

<!-- ======================================================================= -->
<!-- ======================================================================= -->
<hr>
<h4><a name='MethodExample'>Simple Methods Example</a></h4>
<pre>
&lt;!DOCTYPE simple-methods PUBLIC "-//OFBiz//DTD Simple Methods//EN" "http://www.ofbiz.org/dtds/simple-methods.dtd"&gt;

&lt;simple-methods&gt;
    &lt;simple-method event-name="create" short-description="Create Work Effort"&gt;
        &lt;call-map-processor xml-resource="org/ofbiz/commonapp/workeffort/workeffort/WorkEffortMapProcessors.xml" 
                processor-name="update" in-map-name="parameters" out-map-name="context"/&gt;
        &lt;check-errors/&gt;
        &lt;call-service service-name="createWorkEffort" in-map-name="context"&gt;
            &lt;default-message&gt;Work Effort successfully created.&lt;/default-message&gt;
            &lt;result-to-request result-name="workEffortId"/&gt;&lt;/service&gt;
    &lt;/simple-method&gt;
    &lt;simple-method event-name="update" short-description="Update Work Effort"&gt;
        &lt;call-map-processor xml-resource="org/ofbiz/commonapp/workeffort/workeffort/WorkEffortMapProcessors.xml" 
                processor-name="update" in-map-name="parameters" out-map-name="context"/&gt;
        &lt;check-errors/&gt;
        &lt;call-service service-name="updateWorkEffort" in-map-name="context"&gt;
            &lt;default-message&gt;Work Effort successfully updated.&lt;/default-message&gt;&lt;/service&gt;
    &lt;/simple-method&gt;
&lt;/simple-methods&gt;
</pre>

</body>

</html>
