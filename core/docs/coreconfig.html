<html>
<head>
<title>Open For Business Core Configuration Guide</title>
</head>

<body>

<h2 align="center">The Open For Business Project: Core Configuration Guide</h2>

<br>Written By: David E. Jones
<br>Email: <a href="mailto:jonesde@ofbiz.org">jonesde@ofbiz.org</a>
<br>Open For Business Site: <a href="http://www.ofbiz.org/">http://www.ofbiz.org</a>
<br>
<A href="http://sf.net/projects/ofbiz"> <IMG src="http://sourceforge.net/sflogo.php?group_id=27173" border="0" alt="SourceForge Logo"></A> 
<br>
Founders and Lead Architects: David E. Jones &amp; Andy Zeneski <br>
Last Updated: February 9, 2002<br>
$Id$ <br>
<hr>
<br>
<h3>Table of Contents</h3>

<ul>
  <li><a href="#Related_Documents">Related Documents</a>
  <li><a href="#Introduction">Introduction</a>
  <li><a href="#Properties">Properties File Extensions</a>
  <li><a href="#cache">cache.properties</a>
  <li><a href="#debug">debug.properties</a>
  <li><a href="#localdtds">localdtds.properties</a>
  <li><a href="#security">security.properties</a>
  <li><a href="#serverstats">serverstats.properties</a>
  <li><a href="#servicesengine">servicesengine.properties</a>
</ul>

<hr>

<h3><a name="Related_Documents">Related Documents:</a></h3>
<hr>
<ul>
  <li><a href="api/index.html">Core JavaDoc</a></li>
  <li><a href="entityconfig.html">Entity Engine Configuration Guide</a></li>
</ul>

<hr>
<h3><a name="Introduction">Introduction</a></h3>
<hr>

<p>This document describes the configuration of the Core of the Open For Business Framework. 
It goes through each of the OFBiz Core properties files to explains the available properties and their 
usage. The properties files used for the OFBiz applications have
examples of the different options and are located in <b><code>ofbiz/commonapp/etc/</code></b>.</p>

<p>These files are resources on the classpath so they must be located somewhere
on the classpath available to the Java application(s) for the proper operation
of the OFBiz Core Framework. Because they are resources on the classpath 
they can be overriden locally in webapps by putting
a changed copy of the desired file in the webapp/WEB-INF/classes directory.</p>

<p>The entityengine.properties file is not described in this document, it is described 
in the Entity Engine Configuration Guide as a separate document because of the 
large number of options in the file. See the Related Documents section for a link to
the Entity Engine Configuration Guide.</p>

<hr>
<h3><a name="Properties">Properties File Extensions</a></h3>
<hr>
<p>The OFBiz UtilProperties class uses the OFBiz FlexibleProperties to read
and parse properties files with a few extensions. The FlexibleProperties class
is an extension of the standard Java Properties class.</p>

<p>The extensions included allow the value of a property to be substituted into
the value of another property by simply using the ${property.name} syntax. Another
extension is that if a "env." precedes a property.name inside the ${ and } 
delimiters then the named property will be looked up in the system environment
instead of in the current properties file.</p>

<p>For example the ofbiz.home system
property is added using the -D parameter on the java command line and is used
in the entityengine.properties and other properties files with <b><code>${env.ofbiz.home}</code></b>.</p>

<hr>
<h3><a name="cache">cache.properties</a></h3>
<hr>
<p>The cache.properties file contains cache setting used by the UtilCache class.
Default cache parameters can be passed in when a cache is created but if cache
parameters exist in this file for the given cache name then they will be
loaded from the cache.properties file.</p>

<p>There are only two properties in this file for each named cache: 
<b><code>{cache-name}.maxSize</code></b> and <b><code>{cache-name}.expireTime</code></b>. The maxSize
property specifies the maximum number of entries in the cache, but does nothing
with respect to the size of each cache entry. The expireTime property specifies
how long in milliseconds each cache entry will be valid. If either value is 0 the
feature will be disabled, ie unlimited cache size or no expire time. If the values
are not specified and are not passed to the UtilCache constructor, the values in
the <b><code>default.maxSize</code></b> and <b><code>default.expireTime</code></b> properties will
be used.</p>

<hr>
<h3><a name="debug">debug.properties</a></h3>
<hr>
<p>The debug.properties file contains options to turn OFBiz debug threads on/off 
and also serves as the Log4J properties file (see jakarta.apache.org for 
documentation on Log4J).</p>

<p>In addition to the Log4J properties there are properties that turn OFBiz logging
levels on and off. These are formatted like <b><code>print.{level-name}</code></b> where level-name
is <b><code>verbose</code></b>, <b><code>timing</code></b>, <b><code>info</code></b>, <b><code>warning</code></b>, <b><code>error</code></b>, or <b><code>fatal</code></b>.</p>

<hr>
<h3><a name="localdtds">localdtds.properties</a></h3>
<hr>
<p>The localdtds.properties file contains DTD names and the name of the .dtd
file on the classpath that can be used for that name. This is used to accomplish
local loading of DTDs rather than always getting them over the internet when
an XML file is loaded and validated. This file is used by the UtilXml class.</p>

<p>The properties in this file do not follow the standard name=value style
properties because DTD names are not legal properties file names. So, they are
specified using two attribute: <b><code>name.{number}</code></b> and <b><code>value.{number}</code></b>. 
When looking for the value for a given DTD name the <b><code>name.1</code></b> property is
looked at first and then the number is incremented until the current number
is not found. So, if you have 8 name/value pairs then you highest number for 
both <b><code>name.{number}</code></b> and <b><code>value.{number}</code></b> will be 8, with every number
between 1 and 8 used. If, for example, the number 5 is skipped, then everything
beyond 4 will be ignored.</p>

<p>An example of these properties: <b><code>name.1=-//OFBiz//DTD Data Files//EN</code></code></b> for 
the name and <b><code>value.1=datafiles.dtd</code></code></b> for the value. The <b><code>datafiles.dtd</code></b> 
resource will be searched for on the classpath.</p>

<hr>
<h3><a name="security">security.properties</a></h3>
<hr>
<p>The security.properties file contains security related settings such as the
minimum length for passwords. Currently the only property in the file is
<b><code>password.length.min</code></b> which specifies the minimum number of characters in 
a UserLogin password.</p>

<hr>
<h3><a name="serverstats">serverstats.properties</a></h3>
<hr>
<p>The serverstats.properties file contains settings to control the gathering
and persistence of server hit statistics. Statistics are gathered in two ways: 
logging each resource hit and logging a bin of resource hits where the bin may 
contain many hits that happen in a certain time period.</p>

<p>The <b><code>stats.bin.length.millis</code></b> property is used to specify
the length of statistics bins and is a whole number milliseconds value.</p>

<p>To specify whether the <u>bins</u> for a certain resource should be persisted or not
use the <b><code>stats.persist.{resource-name}.bin</code></b> property where 
resource-name is <b><code>REQUEST</code></b> for Control Servlet requests, 
<b><code>EVENT</code></b> for Control Servlet Events, or <b><code>VIEW</code></b> 
for Control Servlet Views (JSPs mostly).</p>

<p>To specify whether <u>each hit</u> for a certain resource should be persisted or not
use the <b><code>stats.persist.{resource-name}.hit</code></b> property where 
resource-name is <b><code>REQUEST</code></b> for Control Servlet requests, 
<b><code>EVENT</code></b> for Control Servlet Events, or <b><code>VIEW</code></b> 
for Control Servlet Views (JSPs mostly).</p>

<hr>
<h3><a name="servicesengine">servicesengine.properties</a></h3>
<hr>
<p>The servicesengine.properties file contains some global settings for 
the Service Engine.</p>

<p>The Service Engine allows services to be attached to different contexts where
each context has its own class loader. In addition to these local contexts there
is a single global context that also has its own class loader and the service
definition files for the global context are specified using the 
<b><code>global.paths</code></b> property. The value of this property should be
a semicolon separated list of full path and filenames for the service
definition XML files.</p>

<p>The Service Engine also allows either a username/password combination or a 
UserLogin GenericValue object to be passed in for authentication. When a 
UserLogin GenericValue object is passed in the user is assumed to be authenticated,
but when a username/password is specified the user will be authenticated and a 
UserLogin GenericValue object will be created and place in the context for the
service to be called. To specify the name of the service which will be called
to authenticate users when a username/password is specified use the 
<b><code>auth.service</code></b> property where the value is simply the name
of the desired service.</p>

<p>One of the more important uses of this properties file is to specify the class
names for the engine wrappers for various type of services. The format of these
properties is <b><code>{engine-name}.engine={class-name}</code></b> where engine-name
is the value of the 'engine' attribute of the 'service' tag in a service definition 
XML file and class-name is the fully-qualified class name for a class that 
implements the <b><code>org.ofbiz.core.service.GenericEngine</code></b> interface.
Valid entity-names include: <b><code>java</code></b>, <b><code>workflow</code></b>,
<b><code>bsh</code></b>, and <b><code>soap</code></b>.</p>

</body>
</html>
