<h2 align="center">The Open For Business Project - Release Notes</h2>

<br>Written By: David E. Jones
<br>Email: <a href="mailto:jonesde@ofbiz.org">jonesde@ofbiz.org</a>
<br>Open For Business Site: <a href="http://www.ofbiz.org/">http://www.ofbiz.org</a>
<br>Last Updated: June 22, 2001
<h3>Table of Contents</h3>
<ul>
  <li><a href="#Release 2001.06.22">Release 2001.06.22</a>
  <li><a href="#Release 2001.06.01">Release 2001.06.01</a>
  <li><a href="#Release 2001.05.28">Release 2001.05.28</a>
  <li><a href="#Release 2001.05.24">Release 2001.05.24</a>
</ul>

<hr>
<h3><a name="Release 2001.06.22">Release 2001.06.22</a></h3>
<hr>
<p>It's been a while since the last release, but I assure you, this one will be
worth the wait! Actually the biggest reason for the delay was my two week
vacation to the United Kingdom, mostly Wales and Scotland. Enjoy this new stuff!</p>
<h4>Auto Generate JSP and Java Files for One Entity or All Entities in a XML
Data Descriptor File</h4>
<p>Instead of right clicking on each file and saving from the entitygen main
page, you can now specify a root directory and generate all Java or JSP files in
directories under the root directory which correspond to the package name for
each entity. The files are generated in a ready to use state (given no bugs in
the templates or data definitions). This is done with a JSP which uses an open
source library to retrieve the contents of a URL, and then saves those contents
to the corresponding file under the specified root directory and package
directory. The library used for this is from the open source project JoBo which
can be found at <a href="http://www.matuschek.net/software/jobo/index.html">http://www.matuschek.net/software/jobo/index.html</a>.
Thanks for making some cool stuff Daniel!</p>
<h4>Extensive Data Model Introduced</h4>
<p>This is a very exciting new part of the project. The file ofbiz/commonapp/entitydef/datamodel.xml
contains definitions for about 288 entities covering common areas of business
data. This effort stems from browsing a bookstore a finding two excellent books
by Len Silverston called The Data Model Resource Book Revised Edition - Volumes
1 &amp; 2, published by John Wiley &amp; Sons. This is a good starting point for
any enterprise system development effort. Changes will be made to this model
over time to expand and (hopefully) improve it. Industry specific models to be
used along with the main model will also be added to the project over time. Many
Thanks to Len Silverston. Anyone using these models will no doubt benefit from
having a copy of his books on hand. These models include models for: parties
(persons, companies, etc.) products &amp; catalogs, ordering, invoicing,
shipping, accounting, human resources, work effort &amp; flow, and content
management.</p>
<p>Using the new automated code generator, it is easy to build the EJBs, JSPs
and other code related to these entities. A few interesting stats: 292 entities,
877 JSPs, 1606 Java Files, 9 snippet files (one for each type of snippet, just to get
a size on them), totaling ~23 Mb, ~650,000 lines, ~2,100,000 words, ~23,800,000 characters. The XML definition
file alone is about 4500 lines long. And yes, it does take my poor little
500Mhz Athlon a while to generate all of this code (around 2.5 hours for all of it). I am
not including all of this generated code right now, and I don't plan to until
the definitions settle down more and some of this stuff is actually tested, if
ever. I may create a separate distribution for it too.</p>
<h4>Relation Support in ViewEntity.jsp</h4>
<p>All generated ViewEntity.jsp files now take advantage of the relation
definitions in the XML descriptor file. There are two types of relations: one
and many. For a one relation, a view of the related entity similar to the normal
view is created and a links as well. For a many relation, the corresponding
finder is called and all results are listed in the page. This is a neat thing to
see. You can now create an order entity, an order line item entity, and link
them up to create a fully functional order entry system, or catalog browsing, or
whatever you might want to do with relational entities. Note that the relations
for the data model mentioned above are not yet finished. I can't wait untill
they are!</p>
<h4>A Few Other Small Changes</h4>
<p>More data types are now supported in the generated JSP files for field entry
and display, including primary key fields. Also, the ValueUpdate methods in the
EntityHelper and EntityBean files are changes so that they only update a field
when it is not null. This is an easy way to specify whether or not each field
should be updated. To set a field to null, simply use the field specific setter.</p>
<hr>
<h3><a name="Release 2001.06.01">Release 2001.06.01</a></h3>
<hr>
<h4>New Versions of JBoss and Tomcat</h4>
<p>This release includes updates for the new versions of JBoss and Tomcat. JBoss
version 2.2.2 and Tomcat version 3.2.2 are now being used.</p>
<h4>Input Validation</h4>
<p>All EditEntity.jsp files from the Entity Code Generator (including the
current entity admin pages) now support server-side input validation. The
validation routines can be found in commonapp/src/org/ofbiz/common/UtilValidate.java.
Many of these validation routines are based on the Netscape JavaScript
validation package (FormChek.js). They have all been converted to Java and
modified to work in the server-side validation context. Some additional
validation routines have also been added. The current library of validators
includes everything from not being empty to algorithmic verification of credit
card numbers to a validator for email addresses.<p>The Entity Code Generator
automatically uses the validators specified in the XML entity descriptor file.
This file for commonapp can be found in /commonapp/entitydef/commonapp.xml. Any
number of validators can be specified for each field of an entity.<p>In the JSP
when the user has an error, all of the data on the page is maintained and a full
list of all current errors is displayed in a red list at the top.<h4>Field Type
Shorthand in XML Entity Descriptor</h4>
<p>Field types can be defined in each XML entity descriptor file. Each field
type definition specifies a field-type name, and a java-type, a sql-type, and
any number of validate elements. Once a field-type is defined it can be used by
any field definition of an entity definition in the descriptor file. The
field-type is used in place of the sql-type, the java-type, and may specify some
validators. If a sql-type or java-type is used in the cmp-field definition, they
will override the field-type defaults. If validators are specified in the cmp-field
definition they are added to the validators from the field-type.</p>

<p>A first attempt at a list of common field types has been added to the
beginning of /commonapp/entitydef/commonapp.xml. Some version of these field
types will be used in every entity definition file in the project. This makes
the XML descriptor code more concise and provides for more consistency in data
type definitions.</p>

<h4>Data Layout for Entity Relation</h4>

<p>The data layout of the XML Entity Descriptor file for specifying entity
relations has been defined. the /commonapp/entitydef/commonapp.xml has a number
of examples of how this feature might be used. It supports nested relations and
relations where one or many instances of the related entity may be returned
depending on how the relation is defined.</p>

<p>Entity relation definitions will be used in two main places: the JSP
ViewEntity.jsp file to show information related to the current entity and
provide for easy access to viewing and editing related entities; and in the
Entity.java file to provide convenient methods of looking up related entities.
NOTE: These have NOT been implemented yet. The relation data model is in place
in the current release of ofbiz, but it is not used in any of the templates.</p>

<hr>
<h3><a name="Release 2001.05.28">Release 2001.05.28</a></h3>
<hr>
<h4>No Cookie Session Management Support</h4>
<p>A call to reponse.encodeURL has been added to all <font SIZE="2" COLOR="#0000c0">&lt;a
href&gt;</font>s and all <font SIZE="2" COLOR="#0000c0">&lt;form action&gt;</font>s to support session management
with cookies turned off. All existing JSPs in the project support this, and all JSPs generated by entitygen support this.

<h4>Cache Management</h4>
<p>Three JSPs have been added along with a number of web event handlers and
extensions to the UtilCache class.&nbsp;</p>

<p>First of all, a number of bugs have been fixed in the UtilCache class making
the caches actually work now.&nbsp;</p>

<p>The expire feature has been enhanced so that whenever get() or containsKey()
are called hasExpired() is checked and on expiration the element is removed from
the cache. The get() method will then return null, not being able to find the
element, and the containsKey() method will return false, also not being able to
find the element. This becomes simply a cache hit and the routine which uses the
cache will load the value the normal way.</p>

<p>All caches have a name that they pass to the constructor and then
initialization parameters are loaded from the conf/cache.properties file. If no
name is passed, a default name is used with a number appended to it to make it
unique. A Hashtable now stores a collection of all of the caches so that they
can be maintained easily through a generic maintenance utility.</p>

<p>The JSPs that have been added are common/FindUtilCache.jsp, common/EditUtilCache.jsp,
and common/FindUtilCacheElements.jsp. All cache parameters can now be viewed in
real time including cache size, hitCount and missCount, and maxSize and
expireTime can not only be viewed by changed through the JSP interface. The
pages are permission protected using the security system. Individual cache lines
can now also be viewed, and removed, through the JSP interface.</p>

<h4>Security Speed Enhancements</h4>
<p>The Security class now has two caches (using UtilCache) to speed up the
hasPermission() and hasEntityPermission() methods. The first cache stores a
collection of security groups for each person. If a person belongs to no
security groups, an empty collection is put into the cache so that those look
ups will be fast too. The second cache corresponds to the
SecurityGroupPermission entity and caches Boolean values keyed on a
SecurityGroupPermissionPK. The Boolean value is true if the corresponding
SecurityGroupPermission entity exists in the database, or false if it does not.</p>

<h4>EntityPK Class Enhancement</h4>
<p>All EntityPK, or primary key, classes now override the toString() method to make display of primary key information more simple and consistent.</p>

<hr>
<h3><a name="Release 2001.05.24">Release 2001.05.24</a></h3>
<hr>
<h4>Initial Release</h4>
<p>This initial release includes the first version of the Entity Code Generator (entitygen) module 
and the basic pieces of the Common Application Components (commonapp) module.</p>
<p>The entitygen module represents a first round attempt using JSPs as templates to generate Java code (including Entity EJBs), 
SQL table creation code, XML deployment descriptors, and JSP user interfaces to manage entities defined in XML descriptor files
which resemble the ejb-jar.xml deployment descriptor.
<p>The commonapp module will eventually contain all of the core entities that any enterprise would likely need to run their business.
At the moment it is only the frameword to support the code generated by entitygen. This includes a security framework, a caching framework,
output formatting utilities, the web event handler (removes non-display logic from JSPs), and a basic user interface layout.