<h2 align="center">The Open For Business Project - Release Notes</h2>

<br>Written By: David E. Jones
<br>Email: <a href="mailto:jonesde@ofbiz.org">jonesde@ofbiz.org</a>
<br>Open For Business Site: <a href="http://www.ofbiz.org/">http://www.ofbiz.org</a>
<br>Last Updated: May 28, 2001
<h3>Table of Contents</h3>
<ul>
  <li><a href="#Release 2001.06.01">Release 2001.06.01</a>
  <li><a href="#Release 2001.05.28">Release 2001.05.28</a>
  <li><a href="#Release 2001.05.24">Release 2001.05.24</a>
</ul>

<hr>
<h3><a name="Release 2001.06.01">Release 2001.06.01</a></h3>
<hr>
<h4>New Versions of JBoss and Tomcat</h4>
<p>This release includes updates for the new versions of JBoss and Tomcat. JBoss
version 2.2.2 and Tomcat version 3.2.2 are now being used.</p>
<h4>Input Validation</h4>
<p>All EditEntity.jsp files from the Entity Code Generator (including the
current entity admin pages) now support server-side input validation. The
validation routines can be found in commonapp/src/org/ofbiz/common/UtilValidate.java.
Many of these validation routines are based on the Netscape JavaScript
validation package (FormChek.js). They have all been converted to Java and
modified to work in the server-side validation context. Some additional
validation routines have also been added. The current library of validators
includes everything from not being empty to algorithmic verification of credit
card numbers to a validator for email addresses.<p>The Entity Code Generator
automatically uses the validators specified in the XML entity descriptor file.
This file for commonapp can be found in /commonapp/entitydef/commonapp.xml. Any
number of validators can be specified for each field of an entity.<p>In the JSP
when the user has an error, all of the data on the page is maintained and a full
list of all current errors is displayed in a red list at the top.<h4>Field Type
Shorthand in XML Entity Descriptor</h4>
<p>Field types can be defined in each XML entity descriptor file. Each field
type definition specifies a field-type name, and a java-type, a sql-type, and
any number of validate elements. Once a field-type is defined it can be used by
any field definition of an entity definition in the descriptor file. The
field-type is used in place of the sql-type, the java-type, and may specify some
validators. If a sql-type or java-type is used in the cmp-field definition, they
will override the field-type defaults. If validators are specified in the cmp-field
definition they are added to the validators from the field-type.</p>

<p>A first attempt at a list of common field types has been added to the
beginning of /commonapp/entitydef/commonapp.xml. Some version of these field
types will be used in every entity definition file in the project. This makes
the XML descriptor code more concise and provides for more consistency in data
type definitions.</p>

<h4>Data Layout for Entity Relation</h4>

<p>The data layout of the XML Entity Descriptor file for specifying entity
relations has been defined. the /commonapp/entitydef/commonapp.xml has a number
of examples of how this feature might be used. It supports nested relations and
relations where one or many instances of the related entity may be returned
depending on how the relation is defined.</p>

<p>Entity relation definitions will be used in two main places: the JSP
ViewEntity.jsp file to show information related to the current entity and
provide for easy access to viewing and editing related entities; and in the
Entity.java file to provide convenient methods of looking up related entities.
NOTE: These have NOT been implemented yet. The relation data model is in place
in the current release of ofbiz, but it is not used in any of the templates.</p>

<hr>
<h3><a name="Release 2001.05.28">Release 2001.05.28</a></h3>
<hr>
<h4>No Cookie Session Management Support</h4>
<p>A call to reponse.encodeURL has been added to all <font SIZE="2" COLOR="#0000c0">&lt;a
href&gt;</font>s and all <font SIZE="2" COLOR="#0000c0">&lt;form action&gt;</font>s to support session management
with cookies turned off. All existing JSPs in the project support this, and all JSPs generated by entitygen support this.

<h4>Cache Management</h4>
<p>Three JSPs have been added along with a number of web event handlers and
extensions to the UtilCache class.&nbsp;</p>

<p>First of all, a number of bugs have been fixed in the UtilCache class making
the caches actually work now.&nbsp;</p>

<p>The expire feature has been enhanced so that whenever get() or containsKey()
are called hasExpired() is checked and on expiration the element is removed from
the cache. The get() method will then return null, not being able to find the
element, and the containsKey() method will return false, also not being able to
find the element. This becomes simply a cache hit and the routine which uses the
cache will load the value the normal way.</p>

<p>All caches have a name that they pass to the constructor and then
initialization parameters are loaded from the conf/cache.properties file. If no
name is passed, a default name is used with a number appended to it to make it
unique. A Hashtable now stores a collection of all of the caches so that they
can be maintained easily through a generic maintenance utility.</p>

<p>The JSPs that have been added are common/FindUtilCache.jsp, common/EditUtilCache.jsp,
and common/FindUtilCacheElements.jsp. All cache parameters can now be viewed in
real time including cache size, hitCount and missCount, and maxSize and
expireTime can not only be viewed by changed through the JSP interface. The
pages are permission protected using the security system. Individual cache lines
can now also be viewed, and removed, through the JSP interface.</p>

<h4>Security Speed Enhancements</h4>
<p>The Security class now has two caches (using UtilCache) to speed up the
hasPermission() and hasEntityPermission() methods. The first cache stores a
collection of security groups for each person. If a person belongs to no
security groups, an empty collection is put into the cache so that those look
ups will be fast too. The second cache corresponds to the
SecurityGroupPermission entity and caches Boolean values keyed on a
SecurityGroupPermissionPK. The Boolean value is true if the corresponding
SecurityGroupPermission entity exists in the database, or false if it does not.</p>

<h4>EntityPK Class Enhancement</h4>
<p>All EntityPK, or primary key, classes now override the toString() method to make display of primary key information more simple and consistent.</p>

<hr>
<h3><a name="Release 2001.05.24">Release 2001.05.24</a></h3>
<hr>
<h4>Initial Release</h4>
<p>This initial release includes the first version of the Entity Code Generator (entitygen) module 
and the basic pieces of the Common Application Components (commonapp) module.</p>
<p>The entitygen module represents a first round attempt using JSPs as templates to generate Java code (including Entity EJBs), 
SQL table creation code, XML deployment descriptors, and JSP user interfaces to manage entities defined in XML descriptor files
which resemble the ejb-jar.xml deployment descriptor.
<p>The commonapp module will eventually contain all of the core entities that any enterprise would likely need to run their business.
At the moment it is only the frameword to support the code generated by entitygen. This includes a security framework, a caching framework,
output formatting utilities, the web event handler (removes non-display logic from JSPs), and a basic user interface layout.