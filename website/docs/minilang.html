<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
  <title>The Open For Business Project: Mini-Language Guide</title>
</head>
<body>
<table width="100%">
  <tbody>
    <tr>
      <td align="left" valign="center" width="50%"> <a
 href="http://www.ofbiz.org"><img
 src="http://www.ofbiz.org/images/ofbiz_logo.jpg"
 alt="The Open For Business Project" border="0"></a> </td>
      <td align="right" valign="center" width="50%"> <a
 href="http://sf.net/projects/ofbiz"><img
 src="http://sourceforge.net/sflogo.php?group_id=27173"
 alt="SourceForge Logo" border="0" height="31" width="88"></a> <a
 href="http://www.ofbiz.org"><img
 src="http://www.ofbiz.org/images/ofbiz_powered.gif" border="0"
 width="88"></a> </td>
    </tr>
  </tbody>
</table>
<hr class="sepbar">
<h2 align="center">The Open For Business Project: Mini-Language Guide</h2>
<div class="contenttext">Written By: David E. Jones, <a
 href="mailto:jonesde@ofbiz.org">jonesde@ofbiz.org</a></div>
<div class="contenttext">Last Updated: August 4, 2004<br>
</div>
<!-- $Id: minilang.html,v 1.5 2004/08/05 06:59:43 jonesde Exp $ -->
<hr class="sepbar">
<h3>Table of Contents</h3>
<ul>
  <li><a href="#Introduction">Introduction</a> </li>
  <li><a href="#Simple_Map_Processor">The Simple Map Processor
Mini-Language</a>
    <ul>
      <li><a href="#MapOverview">Simple Map Processor Overview</a> </li>
      <li><a href="#MakeInString">Make In String Operations</a> </li>
      <li><a href="#Process">Process Field Operations</a> </li>
      <li><a href="#MapExample">Simple Map Processors Example</a> </li>
    </ul>
  </li>
  <li><a href="#Simple_Method">The Simple Method Mini-Language</a>
    <ul>
      <li><a href="#MethodOverview">Simple Method Overview</a> </li>
      <li><a href="#SpecialSyntax">Special Context Access Syntax</a> </li>
      <li><a href="#Call">Call Operations</a> </li>
      <li><a href="#JavaCall">Java Call Operations</a> </li>
      <li><a href="#ControlError">Control and Error Handling Operations</a>
      </li>
      <li><a href="#Event">Event Specific Operations</a> </li>
      <li><a href="#Service">Service Specific Operations</a> </li>
      <li><a href="#Environment">Method Environment Operations</a> </li>
      <li><a href="#EntityMisc">Entity Engine Misc. Operations</a> </li>
      <li><a href="#EntityFind">Entity Engine Find Operations</a> </li>
      <li><a href="#EntityValue">Entity Engine Value Operations</a> </li>
      <li><a href="#EntityList">Entity Engine List Operations</a> </li>
      <li><a href="#EntityTx">Entity Engine Transaction Operations</a> </li>
      <li><a href="#Conditional">Conditional (If) Operations</a> </li>
      <li><a href="#Other">Other Operations</a> </li>
      <li><a href="#MethodExample">Simple Methods Example</a> </li>
    </ul>
  </li>
</ul>
<br>
<hr class="sepbar">
<h3><a name="Introduction">Introduction</a></h3>
<hr class="sepbar">
<p class="contenttext">The Mini-Language concept in Open For Business
is similar to the Gang of Four Interpreter
pattern, or the Mark Grand Little Language pattern. This is also the
central theme
of the Building Parsers with Java book by Steven John Metsker which the
OFBiz Rule Engine
is based on. The idea is to create simple languages that simplify
complex or
frequently performed tasks.</p>
<p class="contenttext">In business software there are things that are
done
hundreds or thousands of times in a single application that a
Mini-Language
can simplify to the point of cutting implementation and maintenance
times not
by just 50%, but often as much as 70-90%. Yes, certain tasks will take
only 10% of
the effort and knowledge to perform. This makes it easier people not
familiar
with the software to manipulate existing or build new functionality.</p>
<p class="contenttext">Mini-Languages tend to have instructions that
are more like method calls in a general purpose language. They are
meant to solve a specific problem in a specific
context, and are generally worthless or need to be modified for other
contexts
or problems.</p>
<p class="contenttext">Often this idea is implemented using a free form
(BNF) or english-like syntax.
In Open For Business the Mini-Languages are expressed as XML files to
simplify the
learning and manipulation of the syntax, in addition to making the
Mini-Languages
easier to write and extend.</p>
<p class="contenttext">The DTD for the simple-map-processor and
simple-method XML files is in the distribution in <b>ofbiz/core/docs/xmldefs/ofbiz/simple-methods.dtd</b>
or
on the website at <a
 href="http://www.ofbiz.org/dtds/simple-methods.dtd">www.ofbiz.org/dtds/simple-methods.dtd</a>.
These are combined into a single DTD to make it easy to use inlined
simple-map-processors inside a simple-method.</p>
<p class="contenttext">To specify the DOCTYPE for a
simple-map-processors XML file use the following:</p>
<pre>&lt;!DOCTYPE simple-map-processors PUBLIC "-//OFBiz//DTD Simple Methods//EN" "http://www.ofbiz.org/dtds/simple-methods.dtd"&gt;<br></pre>
<p class="contenttext">To specify the DOCTYPE for a simple-methods XML
file use the following:</p>
<pre>&lt;!DOCTYPE simple-methods PUBLIC "-//OFBiz//DTD Simple Methods//EN" "http://www.ofbiz.org/dtds/simple-methods.dtd"&gt;<br></pre>
<p class="contenttext">The only difference between the two DOCTYPE
definitions is the root node to use
from the DTD.</p>
<hr class="sepbar">
<h3><a name="Simple_Map_Processor">The Simple Map Processor
Mini-Language</a></h3>
<ul>
  <li><a href="#MapOverview">Simple Map Processor Overview</a> </li>
  <li><a href="#MakeInString">Make In String Operations</a> </li>
  <li><a href="#Process">Process Field Operations</a> </li>
  <li><a href="#MapExample">Simple Map Processors Example</a> </li>
</ul>
<hr class="sepbar">
<h3><a name="MapOverview">Simple Map Processor Overview</a></h3>
<p class="contenttext">The Simple Map Processor Mini-Language performes
two primary tasks: validation
and conversion. It does this in a context of moving values from one Map
to another. The
input map will commonly contain Strings, but can contain other object
types like Integer, Long,
Float, Double, java.sql.Date, Time, and Timestamp.</p>
<hr class="sepbar">
<h3><a name="MakeInString">Make In String Operations</a></h3>
<p class="contenttext"><b><u>make-in-string</u></b></p>
<p class="contenttext">In addition to dealing with the fields already
in the incoming Map you can build Strings and add them to the in-Map
before the processing begins with the make-in-string tag. You can have
zero or
many make-in-string tags, and they must all come before the process
tags. Inside each
make-in-string is a list of snippets to concatenate together to make
the final String. Each snippet can be another field in the in-Map
(in-field element), a value from a properties file (property element),
or a constant (constant element).</p>
<hr class="sepbar">
<h3><a name="Process">Process Field Operations</a></h3>
<p class="contenttext"><b><u>process</u></b></p>
<p class="contenttext">The process tag is used to contain the
operations to be done on the specified field in the in-Map. It has one
required attribute, the field to operate on. The
operations that it contains are: validate-method, compare,
compare-field, regexp, not-empty, copy, and convert.</p>
<p class="contenttext">All process operations tags except copy must
contain one of two tags: fail-message or fail-property. If the
operation fails a message is added to
the message list that is either the specified fail-message, or the
String from
the properties file value that is specified in fail-property.</p>
<p class="contenttext">Messages are collected in List as the Simple Map
Processor runs. If the List
is not empty when it completes then something failed in the map
processor. This
is done so that all failures will be reported immediately rather than
having to fix one failure before another can be discovered.</p>
<p class="contenttext">All process operations automatically convert the
field value and other values
from their current type to the type specified for the operation, where
applicable.
The ObjectType.simpleTypeConvert method is used to do the conversion.
It supports
the following types: String, Double, Float, Long, Integer, Date, Time,
and Timestamp. If the type is not specified String is the default.</p>
<p class="contenttext"><b><u>process:validate-method</u></b></p>
<p class="contenttext">The validate-method tag is used to call any
static method that accepts
a String and returns a boolean. If the field coming in is not a String
it will be converted to a String before calling the method. The two
attributes
for this tag are class and method which should contain the fully
qualified class name and the method name, respectively. If the class
name is not specified it will default to
org.ofbiz.base.util.UtilValidate.</p>
<p class="contenttext"><b><u>process:compare</u></b></p>
<p class="contenttext">The compare tag is used to compare the field
value to the value specified
in the value attribute. An operator must be specified to indicate
the comparison desired. Operators available include less, greater,
less-equals, greater-equals, equals, not-equals, and contains.</p>
<p class="contenttext"><b><u>process:compare-field</u></b></p>
<p class="contenttext">The compare-field tag is just like the compare
tag except that instead
of specifying a value you specify the name of another field in the
in-Map to compare the current field to.</p>
<p class="contenttext"><b><u>process:regexp</u></b></p>
<p class="contenttext">The regexp tag validate the current field
against the regular expression specified in the expr attribute of the
tag. Standard Perl style regular
expressions are used with the ORO library from Jakarta.</p>
<p class="contenttext"><b><u>process:not-empty</u></b></p>
<p class="contenttext">The not-empty tag verifies that the current
field is not empty. If the
field is a String it must not be null and must have a length greater
than
zero, otherwise it must simply not be null. The not-empty tag has no
attributes.</p>
<p class="contenttext"><b><u>process:copy</u></b></p>
<p class="contenttext">The copy operation simply copies the current
field value to the out-Map from
the in-Map. There are three optional attributes. If a different field
name is
desired in the out-Map it can be specified in the to-field attribute.
The replace
attribute can be used to specify if an existing field in the out-Map
should be replaced or not. The replace attribute defaults to true. The
set-if-null attribute specifies whether or not the value should be put
in the out-Map if
it is null. The default for set-if-null is false.</p>
<p class="contenttext"><b><u>process:convert</u></b></p>
<p class="contenttext">The convert tag does the same thing as copy
except that the type can be
converted to the type specified in the type attribute. The format
attribute
can be used to specify the format for date/time fields. These two tags
are
in addition to all of the the attributes in the copy tag.</p>
<hr class="sepbar">
<h3><a name="MapExample">Simple Map Processors Example</a></h3>
<pre>&lt;!DOCTYPE simple-map-processors PUBLIC "-//OFBiz//DTD Simple Methods//EN" "http://www.ofbiz.org/dtds/simple-methods.dtd"&gt;<br><br>&lt;simple-map-processors&gt;<br> &lt;simple-map-processor name="update"&gt;<br> &lt;make-in-string field="estimatedStartDate"&gt;<br> &lt;in-field field="estimatedStartYear"&gt;&lt;constant&gt;-&lt;/constant&gt;<br> &lt;in-field field="estimatedStartMonth"&gt;&lt;constant&gt;-&lt;/constant&gt;<br> &lt;in-field field="estimatedStartDay"&gt;&lt;constant&gt;T&lt;/constant&gt;<br> &lt;in-field field="estimatedStartHour"&gt;&lt;constant&gt;:&lt;/constant&gt;<br> &lt;in-field field="estimatedStartMinute"&gt;&lt;constant&gt;:&lt;/constant&gt;<br> &lt;in-field field="estimatedStartSecond"&gt;<br> &lt;/make-in-string&gt;<br> &lt;process field="workEffortId"&gt;&lt;copy replace="false"/&gt;&lt;/process&gt;<br> &lt;process field="scopeEnumId"&gt;&lt;copy/&gt;&lt;/process&gt;<br> &lt;process field="currentStatusId"&gt;&lt;copy/&gt;&lt;not-empty&gt;&lt;fail-message message="Status is missing."/&gt;&lt;/not-empty&gt;&lt;/process&gt;<br> &lt;process field="priority"&gt;&lt;convert type="Long"&gt;&lt;fail-message message="Priority is not a valid whole number."/&gt;&lt;/convert&gt;&lt;/process&gt;<br> &lt;process field="estimatedStartDate"&gt;<br> &lt;compare-field operator="less" field="estimatedCompletionDate" type="Timestamp" format="yyyy-MM-dd'T'HH:mm:ss"&gt;<br> &lt;fail-message message="Estimated Start date/time must be BEFORE End date/time."/&gt;&lt;/compare-field&gt;<br> &lt;convert type="Timestamp" format="yyyy-MM-dd'T'HH:mm:ss"&gt;<br> &lt;fail-message message="Estimated Start Date is not a valid Date-Time."/&gt;&lt;/convert&gt;&lt;/process&gt;<br> &lt;process field="estimatedCompletionDate"&gt;<br> &lt;convert type="Timestamp"&gt;&lt;fail-message message="Estimated Completion Date is not a valid Date-Time."/&gt;&lt;/convert&gt;&lt;/process&gt;<br> &lt;process field="estimatedMilliSeconds"&gt;<br> &lt;convert type="Double"&gt;&lt;fail-message message="Estimated Milli-seconds is not a valid number."/&gt;&lt;/convert&gt;&lt;/process&gt;<br> &lt;/simple-map-processor&gt;<br> &lt;simple-map-processor name="delete"&gt;<br> &lt;process field="workEffortId"&gt;&lt;copy/&gt;&lt;not-empty&gt;&lt;fail-message message="Work Effort ID is missing."/&gt;&lt;/not-empty&gt;&lt;/process&gt;<br> &lt;/simple-map-processor&gt;<br>&lt;/simple-map-processors&gt;<br></pre>
<hr class="sepbar">
<h3><a name="Simple_Method">The Simple Method Mini-Language</a></h3>
<ul>
  <li><a href="#MethodOverview">Simple Method Overview</a> </li>
  <li><a href="#SpecialSyntax">Special Context Access Syntax</a> </li>
  <li><a href="#Call">Call Operations</a> </li>
  <li><a href="#JavaCall">Java Call Operations</a> </li>
  <li><a href="#ControlError">Control and Error Handling Operations</a>
  </li>
  <li><a href="#Event">Event Specific Operations</a> </li>
  <li><a href="#Service">Service Specific Operations</a> </li>
  <li><a href="#Environment">Method Environment Operations</a> </li>
  <li><a href="#EntityMisc">Entity Engine Misc. Operations</a> </li>
  <li><a href="#EntityFind">Entity Engine Find Operations</a> </li>
  <li><a href="#EntityValue">Entity Engine Value Operations</a> </li>
  <li><a href="#EntityList">Entity Engine List Operations</a> </li>
  <li><a href="#EntityTx">Entity Engine Transaction Operations</a> </li>
  <li><a href="#Conditional">Conditional (If) Operations</a> </li>
  <li><a href="#Other">Other Operations</a> </li>
  <li><a href="#MethodExample">Simple Methods Example</a> </li>
</ul>
<hr class="sepbar">
<h3><a name="MethodOverview">Simple Method Overview</a></h3>
<p class="contenttext">The Simple Method Mini-Language is a simple way
to implement an event
that is invoked by the Control Servlet or a service that is invoked by
the Service Engine.
A Simple Method can be invoked through the static methods on the
SimpleMethod
class, or as an event through an entry in the controller configuration
XML file
like the following:</p>
<pre> &lt;event type="simple" path="org/ofbiz/commonapp/workeffort/workeffort/WorkEffortSimpleEvents.xml" invoke="update"/&gt;<br></pre>
<p class="contenttext">or as a service through an entry in a
services.xml file like the following:
</p>
<pre> &lt;service name="createPartyRole" engine="simple"<br> location="org/ofbiz/commonapp/party/party/PartyRoleServices.xml" invoke="createPartyRole" auth="true"&gt;<br> &lt;description&gt;Create a Party Role (add a Role to a Party)&lt;/description&gt;<br> &lt;attribute name="partyId" type="String" mode="IN" optional="true"/&gt;<br> &lt;attribute name="roleTypeId" type="String" mode="IN" optional="false"/&gt;<br> &lt;/service&gt;<br></pre>
<p class="contenttext">The path or location for a Simple Method is the
classpath and filename of the XML file.</p>
<p class="contenttext">In this Mini-Language you can invoke Simple Map
Processors, Services and bsh scripts,
perform entity related operations, and create messages to return to the
caller.
Specific operations can be enclosed in if blocks to execute
conditionally and
values or fields can be copied around in the maps, lists and method
environment.</p>
<p class="contenttext">There are a number of tags which can be used to
get and set attributes to/from
a request or session object when called as an event or to set
attributes in the
result when called as a service. These operations are only applied when
applicable. In other words if you include a <b>env-to-request</b>
operation it will only be
invoked when the simple-method is called as an event and a <b>env-to-result</b>
operation will only be invoked when the simple-method is called as a
service.
Everything else is the same when called as an event or a service which
makes it
easy to write flexible logic that can be mounted/applied in various
ways.</p>
<p class="contenttext">There are a number of objects that exist in the
method environment when a
simple-method starts or that are used as it executes to keep track of
certain information. Some will exist when called as an event or a
service, these
are marked in the following list. Each name can be overridden using an
attribute
on the <b>simple-method</b> tag. The defaults are listed below (you
can also find them in the DTD).</p>
<p class="contenttext">Here is a complete list of the attributes of the
simple-method tag:</p>
<table border="1" cellpadding="2" cellspacing="0">
  <tbody>
    <tr>
      <td><b>Attribute&nbsp;Name</b></td>
      <td><b>Reqd?</b></td>
      <td><b>Default&nbsp;Value</b></td>
      <td><b>Description</b></td>
    </tr>
    <tr>
      <td>method-name</td>
      <td>Y</td>
      <td>N/A</td>
      <td>A name (preferably a legal Java identifier) for this method.
This name must be unique for the XML file it is in as it will be used
to reference this method externally.</td>
    </tr>
    <tr>
      <td>short-description</td>
      <td>Y</td>
      <td>N/A</td>
      <td>A short description of the method for certain system error
messages.</td>
    </tr>
    <tr>
      <td>login-required</td>
      <td>N</td>
      <td>"true"</td>
      <td>Is a logged in user (UserLogin object, or login.username and
login.password Strings) required to run this method? "true" or "false".</td>
    </tr>
    <tr>
      <td>use-transaction</td>
      <td>N</td>
      <td>"true"</td>
      <td>Create a transaction if none exists for this thread? "true"
or "false".</td>
    </tr>
    <tr>
      <td>default-error-code</td>
      <td>N</td>
      <td>"error"</td>
      <td>The default error return code.</td>
    </tr>
    <tr>
      <td>default-success-code</td>
      <td>N</td>
      <td>"success"</td>
      <td>The default success return code.</td>
    </tr>
    <tr>
      <td>parameter-map-name</td>
      <td>N</td>
      <td>"parameters"</td>
      <td>As event: copy of request parameters<br>
As service: incoming context</td>
    </tr>
    <tr>
      <td>event-request-object-name</td>
      <td>N</td>
      <td>"request"</td>
      <td>(as event only)</td>
    </tr>
    <tr>
      <td>event-response-code-name</td>
      <td>N</td>
      <td>"_response_code_"</td>
      <td>(as event only)</td>
    </tr>
    <tr>
      <td>event-error-message-name</td>
      <td>N</td>
      <td>"_error_message_"</td>
      <td>(as event only)</td>
    </tr>
    <tr>
      <td>event-event-message-name</td>
      <td>N</td>
      <td>"_event_message_"</td>
      <td>(as event only)</td>
    </tr>
    <tr>
      <td>service-response-message-name</td>
      <td>N</td>
      <td>"responseMessage"</td>
      <td>(as service only)</td>
    </tr>
    <tr>
      <td>service-error-message-name</td>
      <td>N</td>
      <td>"errorMessage"</td>
      <td>(as service only)</td>
    </tr>
    <tr>
      <td>service-error-message-list-name</td>
      <td>N</td>
      <td>"errorMessageList"</td>
      <td>(as service only)</td>
    </tr>
    <tr>
      <td>service-success-message-name</td>
      <td>N</td>
      <td>"successMessage"</td>
      <td>(as service only)</td>
    </tr>
    <tr>
      <td>service-success-message-list-name</td>
      <td>N</td>
      <td>"successMessageList"</td>
      <td>(as service only)</td>
    </tr>
    <tr>
      <td>delegator-name</td>
      <td>N</td>
      <td>"delegator"</td>
      <td>A GenericDelegator object to use in the method</td>
    </tr>
    <tr>
      <td>security-name</td>
      <td>N</td>
      <td>"security"</td>
      <td>A Security object to use in the method</td>
    </tr>
    <tr>
      <td>dispatcher-name</td>
      <td>N</td>
      <td>"dispatcher"</td>
      <td>A LocalDispatcher object to use in the method</td>
    </tr>
  </tbody>
</table>
<hr class="sepbar">
<h3><a name="SpecialSyntax">Special Context Access Syntax</a></h3>
<p class="contenttext">In strings and field names a special syntax is
supported
to flexibly access Map member, List elements and to insert environment
values into
string constants.</p>
<p class="contenttext">The ${} (dollar-sign-curly-brace) syntax can be
used to insert an
environment variable value in pretty much any string constant in a
simple-method file. Not
only can it be used to reference top-level envrionment variables, the
syntax elements described below can be used to access values in
sub-structures.</p>
<p class="contenttext">You can use the "." (dot) syntax to access Map
members. For example if you specify the attribute <code>field-name="product.productName"</code>
it will reference the <code>productName</code> member of the <code>product</code>
Map.
This would be the same as specifying <code>map-name="product"
field-name="productName"</code>.
Note that this is, of course, more flexible than a field-name/map-name
combination because
the Map structure can be multiple levels deep. For example if you have
use the attribute
<code>field-name="products.widget.productName"</code> it will reference
the <code>productName</code> in
the <code>widget</code> Map which is in the <code>products</code> Map.</p>
<p class="contenttext">The "[]" (square-brace) syntax can be used to
access list elements.
For example you can specify the attribute <code>field-name="products[0].productName"</code>
and it will reference the <code>productName</code> of the first
(position zero) element in the <code>products</code> List. To make
this more useful you can pull a list index from the environment using
something like <code>field-name="products[${currentIndex}].productName"</code>.</p>
<p class="contenttext">There are two extensions to the [] syntax that
can be used when
refering to an environment location that is the target of an operation.
If you do not include
a number between the square braces the value will be put at the end of
the list. If you put a
"+" (plus sign) in front of the number between the square braces (ie:
[+2]) it will insert
the value before that position in the list instead of replacing the
value at that location.
For example, specifying [+0] would insert the value at the beginning of
the list.</p>
<p class="contenttext">In fact, you can use the ${} syntax to
substitute any string or other value at any location in a field-name or
other string constant. So, you could even reference
a Map member named in some other environment variable. For example you
could use <code>field-name="products[${currentIndex}].${currentMember}"</code>
to achieve this effect.</p>
<p class="contenttext">Okay, enough of the general stuff, here is a
catalog and description of the available operations.</p>
<!-- ======================================================================= -->
<!-- ======================================================================= -->
<hr class="sepbar">
<h3><a name="Call">Call Operations</a></h3>
<p class="contenttext"><b><u>call-map-processor</u></b></p>
<p class="contenttext">The call-map-processor tag invokes a simple map
processor from an existing map, creating a new map or adding to an
existing one if the named out-map already
exists. Resulting messages are added to the named list, and a new list
is
created if a list with the given name does not yet exist. Note that all
lists and maps exist in the same context and must have unique names.</p>
<p class="contenttext">An inline simple-map-processor can be used by
putting a <b>simple-map-processor</b>
tag under the <b>call-map-processor</b> tag. If both an external and
an inline map-processor are specified, the external one will be called
first, allowing the inline one to override its behavior</p>
<table border="1" cellpadding="2" cellspacing="0">
  <tbody>
    <tr>
      <td><b>Attribute&nbsp;Name</b></td>
      <td><b>Required?</b></td>
      <td><b>Description</b></td>
    </tr>
    <tr>
      <td>xml-resource</td>
      <td>N</td>
      <td>The full path and filename on the classpath of the XML file
which contains an external map processor to execute. This is only
required if an external map processor is desired.</td>
    </tr>
    <tr>
      <td>processor-name</td>
      <td>N</td>
      <td>The name of the external map processor to execute in the
specified xml-resource. This is only required if an external map
processor is desired.</td>
    </tr>
    <tr>
      <td>in-map-name</td>
      <td>Y</td>
      <td>The name of a map in the method environment to use as the
input map.</td>
    </tr>
    <tr>
      <td>out-map-name</td>
      <td>Y</td>
      <td>The name of a map in the method environment to use as the
output map. Will be created if it does not exist already. If already
exists will be added to in place.</td>
    </tr>
    <tr>
      <td>error-list-name</td>
      <td>N</td>
      <td>The name of a list in the method environment that the error
messages will be added to. Will be created if it does not exist.
Defaults to "error_list".</td>
    </tr>
  </tbody>
</table>
<br>
<table border="1" cellpadding="2" cellspacing="0">
  <tbody>
    <tr>
      <td><b>Sub-Element&nbsp;Name</b></td>
      <td><b>How&nbsp;Many</b></td>
      <td><b>Description</b></td>
    </tr>
    <tr>
      <td>simple-map-processor</td>
      <td>0 or 1</td>
      <td>Uses the same definition as the simple-map-processor in the
context of a simple-map-processors XML file. Allows for an inlined
simple-map-processor.</td>
    </tr>
  </tbody>
</table>
<p class="contenttext"><b><u>call-service</u></b></p>
<p class="contenttext">The call-service tag invokes a service through
the Service Engine. If the
specified error code is returned from the service, the event is aborted
and the transaction in the current thread is rolled back. Otherwise,
the
remaining operations are invoked.</p>
<p class="contenttext">The result-to-request and result-to-session
elements will be IGNORED when called in a service context. So, they are
ONLY used when called in an event context.</p>
<table border="1" cellpadding="2" cellspacing="0">
  <tbody>
    <tr>
      <td><b>Attribute&nbsp;Name</b></td>
      <td><b>Required?</b></td>
      <td><b>Description</b></td>
    </tr>
    <tr>
      <td>service-name</td>
      <td>Y</td>
      <td><br>
      </td>
    </tr>
    <tr>
      <td>in-map-name</td>
      <td>Y</td>
      <td><br>
      </td>
    </tr>
    <tr>
      <td>include-user-login</td>
      <td>N</td>
      <td>Defaults to "true".</td>
    </tr>
    <tr>
      <td>error-code</td>
      <td>N</td>
      <td>Defaults to "error".</td>
    </tr>
    <tr>
      <td>success-code</td>
      <td>N</td>
      <td>Defaults to "success".</td>
    </tr>
  </tbody>
</table>
<br>
<table border="1" cellpadding="2" cellspacing="0">
  <tbody>
    <tr>
      <td><b>Sub-Element&nbsp;Name</b></td>
      <td><b>How&nbsp;Many</b></td>
      <td><b>Description</b></td>
    </tr>
    <tr>
      <td>error-prefix</td>
      <td>0 or 1</td>
      <td><br>
      </td>
    </tr>
    <tr>
      <td>error-suffix</td>
      <td>0 or 1</td>
      <td><br>
      </td>
    </tr>
    <tr>
      <td>success-prefix</td>
      <td>0 or 1</td>
      <td><br>
      </td>
    </tr>
    <tr>
      <td>success-suffix</td>
      <td>0 or 1</td>
      <td><br>
      </td>
    </tr>
    <tr>
      <td>message-prefix</td>
      <td>0 or 1</td>
      <td><br>
      </td>
    </tr>
    <tr>
      <td>message-suffix</td>
      <td>0 or 1</td>
      <td><br>
      </td>
    </tr>
    <tr>
      <td>default-message</td>
      <td>0 or 1</td>
      <td><br>
      </td>
    </tr>
    <tr>
      <td>results-to-map</td>
      <td>0 to many</td>
      <td><br>
      </td>
    </tr>
    <tr>
      <td>result-to-field</td>
      <td>0 to many</td>
      <td><br>
      </td>
    </tr>
    <tr>
      <td>result-to-request</td>
      <td>0 to many</td>
      <td><br>
      </td>
    </tr>
    <tr>
      <td>result-to-session</td>
      <td>0 to many</td>
      <td><br>
      </td>
    </tr>
    <tr>
      <td>result-to-result</td>
      <td>0 to many</td>
      <td><br>
      </td>
    </tr>
  </tbody>
</table>
<p class="contenttext"><b><u>call-service-asynch</u></b></p>
<p class="contenttext">Calls a service asynchronously and ignores the
result, so no return messages are used; that doesn't mean no errors
will result, but they would just be
system errors like database failures, etc which all have system error
messages.</p>
<table border="1" cellpadding="2" cellspacing="0">
  <tbody>
    <tr>
      <td><b>Attribute&nbsp;Name</b></td>
      <td><b>Required?</b></td>
      <td><b>Description</b></td>
    </tr>
    <tr>
      <td>service-name</td>
      <td>Y</td>
      <td><br>
      </td>
    </tr>
    <tr>
      <td>in-map-name</td>
      <td>Y</td>
      <td><br>
      </td>
    </tr>
    <tr>
      <td>include-user-login</td>
      <td>N</td>
      <td>Defaults to "true".</td>
    </tr>
  </tbody>
</table>
<p class="contenttext"><b><u>call-bsh</u></b></p>
<p class="contenttext">Runs an external bsh script from the classpath
if resource is specified and then runs the inlined bsh script if any is
specified.</p>
<p class="contenttext">The bsh context is the current simple-method
environment including maps, lists
and special objects whose names are defined in the simple-method
attributes.</p>
<p class="contenttext">The current env cannot be modified, but if a Map
is returned by the bsh block
the entries in the map will be put into the current env.</p>
<p class="contenttext">Error messages go on the error list and are
handled with the check-errors tag.</p>
<table border="1" cellpadding="2" cellspacing="0">
  <tbody>
    <tr>
      <td><b>Attribute&nbsp;Name</b></td>
      <td><b>Required?</b></td>
      <td><b>Description</b></td>
    </tr>
    <tr>
      <td>resource</td>
      <td>N</td>
      <td><br>
      </td>
    </tr>
    <tr>
      <td>error-list-name</td>
      <td>N</td>
      <td>Defaults to "error_list".</td>
    </tr>
  </tbody>
</table>
<p class="contenttext"><b><u>call-simple-method</u></b></p>
<p class="contenttext">The call-simple-method tag calls another
simple-method in the same context as
the current one. In other words the called simple-method will have the
same environment as the calling simple-method, including all
environment fields, and
either the event or service objects that the calling simple-method was
called with.</p>
<table border="1" cellpadding="2" cellspacing="0">
  <tbody>
    <tr>
      <td><b>Attribute&nbsp;Name</b></td>
      <td><b>Required?</b></td>
      <td><b>Description</b></td>
    </tr>
    <tr>
      <td>xml-resource</td>
      <td>N</td>
      <td>The full path and filename on the classpath of the XML file
which contains an external simple-method to execute. This is only
required if a simple-method in a different file is desired.</td>
    </tr>
    <tr>
      <td>method-name</td>
      <td>Y</td>
      <td>The name of the simple-method to execute in the specified
xml-resource, or in the current XML file if no xml-resource is
specified.</td>
    </tr>
  </tbody>
</table>
<!-- ======================================================================= -->
<!-- ======================================================================= -->
<hr class="sepbar">
<h3><a name="JavaCall">Java Call Operations</a></h3>
<p class="contenttext"><b><u>create-object</u></b></p>
<p class="contenttext">Creates an object of the given class and if the
field-name is specified saves it in that field.</p>
<p class="contenttext">The string and field sub-elements are passed to
the constructor method as arguments in the order they are specified. If
the sub-elements do not match the constructor method arguments an error
will be returned.</p>
<table border="1" cellpadding="2" cellspacing="0">
  <tbody>
    <tr>
      <td><b>Attribute&nbsp;Name</b></td>
      <td><b>Required?</b></td>
      <td><b>Description</b></td>
    </tr>
    <tr>
      <td>class-name</td>
      <td>Y</td>
      <td>The name of the class to construct an object of.</td>
    </tr>
    <tr>
      <td>field-name</td>
      <td>N</td>
      <td>The name of a field to put the new object in. If not
specified the object will be created but ignored after that.</td>
    </tr>
    <tr>
      <td>map-name</td>
      <td>N</td>
      <td>The name of the map the field will go in. If not specified
the field will be put in the environment.</td>
    </tr>
  </tbody>
</table>
<br>
<table border="1" cellpadding="2" cellspacing="0">
  <tbody>
    <tr>
      <td><b>Sub-Element&nbsp;Name</b></td>
      <td><b>How&nbsp;Many</b></td>
      <td><b>Description</b></td>
    </tr>
    <tr>
      <td>string</td>
      <td>0 to many</td>
      <td>Used to specify an inline String argument to the constructor
method.</td>
    </tr>
    <tr>
      <td>field</td>
      <td>0 to many</td>
      <td>Used to specify a field to be passed as an argument to the
constructor method. The field can be in a map in the environment or if
no map-name is specified then the field will come directly from the
environment.</td>
    </tr>
  </tbody>
</table>
<p class="contenttext"><b><u>call-object-method</u></b></p>
<p class="contenttext">Calls a method on an existing object that exists
in a field in the environment or in a map in the environment.</p>
<p class="contenttext">The string and field sub-elements are passed to
the method as arguments in the order they are specified. If the
sub-elements do not match the method arguments an error will be
returned.</p>
<p class="contenttext">The return value will be put in the named field
if an value is returned and if a field and optionally a map name are
specified.</p>
<table border="1" cellpadding="2" cellspacing="0">
  <tbody>
    <tr>
      <td><b>Attribute&nbsp;Name</b></td>
      <td><b>Required?</b></td>
      <td><b>Description</b></td>
    </tr>
    <tr>
      <td>obj-field-name</td>
      <td>Y</td>
      <td>The name of the field the object is in that has the method to
be called.</td>
    </tr>
    <tr>
      <td>obj-map-name</td>
      <td>N</td>
      <td>The name of the map the field of the object is in that has
the method to be called. If this is not specified the environment will
be used to find the field in.</td>
    </tr>
    <tr>
      <td>method-name</td>
      <td>Y</td>
      <td>The name of the method to call on the given object.</td>
    </tr>
    <tr>
      <td>ret-field-name</td>
      <td>N</td>
      <td>The name of the field to put the result in. If not specified
any return value will be ignored.</td>
    </tr>
    <tr>
      <td>ret-map-name</td>
      <td>N</td>
      <td>The name of the map the field of the return value is in. If
not specified but the field name is then the environment will be used
to find the field in.</td>
    </tr>
  </tbody>
</table>
<br>
<table border="1" cellpadding="2" cellspacing="0">
  <tbody>
    <tr>
      <td><b>Sub-Element&nbsp;Name</b></td>
      <td><b>How&nbsp;Many</b></td>
      <td><b>Description</b></td>
    </tr>
    <tr>
      <td>string</td>
      <td>0 to many</td>
      <td>Used to specify an inline String argument to the method call.</td>
    </tr>
    <tr>
      <td>field</td>
      <td>0 to many</td>
      <td>Used to specify a field to be passed as an argument to the
method call. The field can be in a map in the environment or if no
map-name is specified then the field will come directly from the
environment.</td>
    </tr>
  </tbody>
</table>
<p class="contenttext"><b><u>call-class-method</u></b></p>
<p class="contenttext">Calls a static method on a class.</p>
<p class="contenttext">The string and field sub-elements are passed to
the method as arguments in the order they are specified. If the
sub-elements do not match the method arguments an error will be
returned.</p>
<p class="contenttext">The return value will be put in the named field
if an value is returned and if a field and optionally a map name are
specified.</p>
<table border="1" cellpadding="2" cellspacing="0">
  <tbody>
    <tr>
      <td><b>Attribute&nbsp;Name</b></td>
      <td><b>Required?</b></td>
      <td><b>Description</b></td>
    </tr>
    <tr>
      <td>class-name</td>
      <td>Y</td>
      <td>The name of the class to call the static method on.</td>
    </tr>
    <tr>
      <td>method-name</td>
      <td>Y</td>
      <td>The name of the static method to call on the given class.</td>
    </tr>
    <tr>
      <td>ret-field-name</td>
      <td>N</td>
      <td>The name of the field to put the result in. If not specified
any return value will be ignored.</td>
    </tr>
    <tr>
      <td>ret-map-name</td>
      <td>N</td>
      <td>The name of the map the field of the return value is in. If
not specified but the field name is then the environment will be used
to find the field in.</td>
    </tr>
  </tbody>
</table>
<br>
<table border="1" cellpadding="2" cellspacing="0">
  <tbody>
    <tr>
      <td><b>Sub-Element&nbsp;Name</b></td>
      <td><b>How&nbsp;Many</b></td>
      <td><b>Description</b></td>
    </tr>
    <tr>
      <td>string</td>
      <td>0 to many</td>
      <td>Used to specify an inline String argument to the method call.</td>
    </tr>
    <tr>
      <td>field</td>
      <td>0 to many</td>
      <td>Used to specify a field to be passed as an argument to the
method call. The field can be in a map in the environment or if no
map-name is specified then the field will come directly from the
environment.</td>
    </tr>
  </tbody>
</table>
<!-- ======================================================================= -->
<!-- ======================================================================= -->
<hr class="sepbar">
<h3><a name="ControlError">Control and Error Handling Operations</a></h3>
<p class="contenttext"><b><u>check-errors</u></b></p>
<p class="contenttext">The message lists from invoking are not checked
until the check-errors tag
is used. The named list is checked and if it contains any messages they
are put in the servlet request object and the specified error code is
returned to
the control servlet.</p>
<table border="1" cellpadding="2" cellspacing="0">
  <tbody>
    <tr>
      <td><b>Attribute&nbsp;Name</b></td>
      <td><b>Required?</b></td>
      <td><b>Description</b></td>
    </tr>
    <tr>
      <td>error-code</td>
      <td>N</td>
      <td>Defaults to "error".</td>
    </tr>
    <tr>
      <td>error-list-name</td>
      <td>N</td>
      <td>The name of the list to in the method environment to check
for error messages. Defaults to "error_list".</td>
    </tr>
  </tbody>
</table>
<br>
<table border="1" cellpadding="2" cellspacing="0">
  <tbody>
    <tr>
      <td><b>Sub-Element&nbsp;Name</b></td>
      <td><b>How&nbsp;Many</b></td>
      <td><b>Description</b></td>
    </tr>
    <tr>
      <td>error-prefix</td>
      <td>0 or 1</td>
      <td><br>
      </td>
    </tr>
    <tr>
      <td>error-suffix</td>
      <td>0 or 1</td>
      <td><br>
      </td>
    </tr>
    <tr>
      <td>message-prefix</td>
      <td>0 or 1</td>
      <td><br>
      </td>
    </tr>
    <tr>
      <td>message-suffix</td>
      <td>0 or 1</td>
      <td><br>
      </td>
    </tr>
  </tbody>
</table>
<p class="contenttext"><b><u>add-error</u></b></p>
<p class="contenttext">Adds an error message with to the given error
list from either an inline message or a message from a properties file.</p>
<table border="1" cellpadding="2" cellspacing="0">
  <tbody>
    <tr>
      <td><b>Attribute&nbsp;Name</b></td>
      <td><b>Required?</b></td>
      <td><b>Description</b></td>
    </tr>
    <tr>
      <td>error-list-name</td>
      <td>N</td>
      <td>The name of the list to in the method environment to check
for error messages. Defaults to "error_list".</td>
    </tr>
  </tbody>
</table>
<br>
<table border="1" cellpadding="2" cellspacing="0">
  <tbody>
    <tr>
      <td><b>Sub-Element&nbsp;Name</b></td>
      <td><b>How&nbsp;Many</b></td>
      <td><b>Description</b></td>
    </tr>
    <tr>
      <td>fail-message</td>
      <td>0 or 1</td>
      <td>Used to specify an inline message. Has one attribute called
'message'.</td>
    </tr>
    <tr>
      <td>fail-property</td>
      <td>0 or 1</td>
      <td>Used to get the message from a properties file. Has two
attributes: resource and property.</td>
    </tr>
  </tbody>
</table>
<p class="contenttext"><b><u>return</u></b></p>
<p class="contenttext">Returns immediately from the simple-method with
the given response code string.</p>
<table border="1" cellpadding="2" cellspacing="0">
  <tbody>
    <tr>
      <td><b>Attribute&nbsp;Name</b></td>
      <td><b>Required?</b></td>
      <td><b>Description</b></td>
    </tr>
    <tr>
      <td>response-code</td>
      <td>N</td>
      <td>The string to return as a response code. Defaults to
"success".</td>
    </tr>
  </tbody>
</table>
<!-- ======================================================================= -->
<!-- ======================================================================= -->
<hr class="sepbar">
<h3><a name="Event">Event Specific Operations</a></h3>
<p class="contenttext"><b><u>field-to-request</u></b></p>
<p class="contenttext">The field-to-request tag copies a field from a
map to the specified servlet request
attribute.</p>
<p class="contenttext">The tag is only used when the simple-method is
called as an event, it is ignored otherwise.</p>
<table border="1" cellpadding="2" cellspacing="0">
  <tbody>
    <tr>
      <td><b>Attribute&nbsp;Name</b></td>
      <td><b>Required?</b></td>
      <td><b>Description</b></td>
    </tr>
    <tr>
      <td>map-name</td>
      <td>N</td>
      <td>The name of the map in the method environment. If not
specified the field-name will be used to get the field from the method
environment.</td>
    </tr>
    <tr>
      <td>field-name</td>
      <td>Y</td>
      <td>The name (key) of the map field to use.</td>
    </tr>
    <tr>
      <td>request-name</td>
      <td>N</td>
      <td>The name of the request attribute to use. Defaults to the
field-name.</td>
    </tr>
  </tbody>
</table>
<p class="contenttext"><b><u>field-to-session</u></b></p>
<p class="contenttext">The field-to-session tag copies a field from a
map to the specified servlet session attribute.</p>
<p class="contenttext">The tag is only used when the simple-method is
called as an event, it is ignored otherwise.</p>
<table border="1" cellpadding="2" cellspacing="0">
  <tbody>
    <tr>
      <td><b>Attribute&nbsp;Name</b></td>
      <td><b>Required?</b></td>
      <td><b>Description</b></td>
    </tr>
    <tr>
      <td>map-name</td>
      <td>N</td>
      <td>The name of the map in the method environment. If not
specified the field-name will be used to get the field from the method
environment.</td>
    </tr>
    <tr>
      <td>field-name</td>
      <td>Y</td>
      <td>The name (key) of the map field to use.</td>
    </tr>
    <tr>
      <td>session-name</td>
      <td>N</td>
      <td>The name of the session attribute to use. Defaults to the
field-name.</td>
    </tr>
  </tbody>
</table>
<p class="contenttext"><b><u>request-to-field</u></b></p>
<p class="contenttext">The request-to-field tag copies an attribute
from the servlet request to a field of a map in the method environment.</p>
<p class="contenttext">The tag is only used when the simple-method is
called as an event, it is ignored otherwise (except the default value,
if specified).</p>
<table border="1" cellpadding="2" cellspacing="0">
  <tbody>
    <tr>
      <td><b>Attribute&nbsp;Name</b></td>
      <td><b>Required?</b></td>
      <td><b>Description</b></td>
    </tr>
    <tr>
      <td>map-name</td>
      <td>N</td>
      <td>The name of the map in the method environment. If not
specified the field-name will be used to set the field in the method
environment.</td>
    </tr>
    <tr>
      <td>field-name</td>
      <td>Y</td>
      <td>The name (key) of the map field to use.</td>
    </tr>
    <tr>
      <td>default</td>
      <td>N</td>
      <td>A default value to use if the request attribute is null or is
a String and is empty. This will also be used when NOT running as an
event.</td>
    </tr>
    <tr>
      <td>request-name</td>
      <td>N</td>
      <td>The name of the request attribute to use. Defaults to the
field-name.</td>
    </tr>
  </tbody>
</table>
<p class="contenttext"><b><u>request-parameters-to-list</u></b></p>
<p class="contenttext">The request-parameters-to-list tag appends a
request parameter values from the servlet request to the specified list.</p>
<p class="contenttext">The tag is only used when the simple-method is
called as an event, it is ignored otherwise.</p>
<table border="1" cellpadding="2" cellspacing="0">
  <tbody>
    <tr>
      <td><b>Attribute&nbsp;Name</b></td>
      <td><b>Required?</b></td>
      <td><b>Description</b></td>
    </tr>
    <tr>
      <td>request-name</td>
      <td>Y</td>
      <td>The name of the request parameter values to use.</td>
    </tr>
    <tr>
      <td>list-name</td>
      <td>N</td>
      <td>The name of the list in the method environment that the
request parameter values will be appended to. (default: request-name)</td>
    </tr>
  </tbody>
</table>
<p class="contenttext"><b><u>session-to-field</u></b></p>
<p class="contenttext">The session-to-field tag copies an attribute
from the servlet session to a field of a map in the method environment.</p>
<p class="contenttext">The tag is only used when the simple-method is
called as an event, it is ignored otherwise (except the default value,
if specified).</p>
<table border="1" cellpadding="2" cellspacing="0">
  <tbody>
    <tr>
      <td><b>Attribute&nbsp;Name</b></td>
      <td><b>Required?</b></td>
      <td><b>Description</b></td>
    </tr>
    <tr>
      <td>map-name</td>
      <td>N</td>
      <td>The name of the map in the method environment. If not
specified the field-name will be used to set the field in the method
environment.</td>
    </tr>
    <tr>
      <td>field-name</td>
      <td>Y</td>
      <td>The name (key) of the map field to use.</td>
    </tr>
    <tr>
      <td>default</td>
      <td>N</td>
      <td>A default value to use if the session attribute is null or is
a String and is empty. This will also be used when NOT running as an
event.</td>
    </tr>
    <tr>
      <td>session-name</td>
      <td>N</td>
      <td>The name of the session attribute to use. Defaults to the
field-name.</td>
    </tr>
  </tbody>
</table>
<p class="contenttext"><b><u>webapp-property-to-field</u></b></p>
<p class="contenttext">The webapp-property-to-field tag copies a
property value from a properties file in a ServletContext resource to a
field.</p>
<p class="contenttext">The tag is only used when the simple-method is
called as an event, it is ignored otherwise (except the default value,
if specified).</p>
<table border="1" cellpadding="2" cellspacing="0">
  <tbody>
    <tr>
      <td><b>Attribute&nbsp;Name</b></td>
      <td><b>Required?</b></td>
      <td><b>Description</b></td>
    </tr>
    <tr>
      <td>resource</td>
      <td>Y</td>
      <td>The resource location of the properties file inside the
webapp, and relative to the root of the webapp (can be inside a war
file). An example of this is "/WEB-INF/myprops.properties".</td>
    </tr>
    <tr>
      <td>property</td>
      <td>Y</td>
      <td>The property whose value will be put in the field.</td>
    </tr>
    <tr>
      <td>default</td>
      <td>N</td>
      <td>A default value to use if the property value is null or
empty. This will also be used when NOT running as an event.</td>
    </tr>
    <tr>
      <td>map-name</td>
      <td>N</td>
      <td>The name of the map in the method environment. If not
specified the field-name will be used to set the field in the method
environment.</td>
    </tr>
    <tr>
      <td>field-name</td>
      <td>Y</td>
      <td>The name (key) of the map field to use.</td>
    </tr>
  </tbody>
</table>
<!-- ======================================================================= -->
<!-- ======================================================================= -->
<hr class="sepbar">
<h3><a name="Service">Service Specific Operations</a></h3>
<p class="contenttext"><b><u>field-to-result</u></b></p>
<p class="contenttext">The field-to-result tag copies a field from a
map to the specified service result field.</p>
<p class="contenttext">The tag is only used when the simple-method is
called as a service, it is ignored otherwise.</p>
<table border="1" cellpadding="2" cellspacing="0">
  <tbody>
    <tr>
      <td><b>Attribute&nbsp;Name</b></td>
      <td><b>Required?</b></td>
      <td><b>Description</b></td>
    </tr>
    <tr>
      <td>map-name</td>
      <td>N</td>
      <td>The name of the map in the method environment. If not
specified the field-name will be used to get the field from the method
environment.</td>
    </tr>
    <tr>
      <td>field-name</td>
      <td>Y</td>
      <td>The name (key) of the map field to use.</td>
    </tr>
    <tr>
      <td>result-name</td>
      <td>N</td>
      <td>The name of the request attribute to use. Defaults to the
field-name.</td>
    </tr>
  </tbody>
</table>
<!-- ======================================================================= -->
<!-- ======================================================================= -->
<hr class="sepbar">
<h3><a name="Environment">Method Environment Operations</a></h3>
<p class="contenttext"><b><u>map-to-map</u></b></p>
<p class="contenttext">The map-to-map tag copies all fields from one
map to another map.</p>
<table border="1" cellpadding="2" cellspacing="0">
  <tbody>
    <tr>
      <td><b>Attribute&nbsp;Name</b></td>
      <td><b>Required?</b></td>
      <td><b>Description</b></td>
    </tr>
    <tr>
      <td>map-name</td>
      <td>Y</td>
      <td>The name of the map in the method environment the fields will
come from.</td>
    </tr>
    <tr>
      <td>to-map-name</td>
      <td>N</td>
      <td>The name of the map in the method environment the fields will
go to. If empty the fields will be copied to the environment.</td>
    </tr>
  </tbody>
</table>
<p class="contenttext"><b><u>field-to-field</u></b></p>
<p class="contenttext">The field-to-field tag copies a field from a map
to a field in another map.</p>
<table border="1" cellpadding="2" cellspacing="0">
  <tbody>
    <tr>
      <td><b>Attribute&nbsp;Name</b></td>
      <td><b>Required?</b></td>
      <td><b>Description</b></td>
    </tr>
    <tr>
      <td>map-name</td>
      <td>N</td>
      <td>The name of the map in the method environment the field will
come from. If this is null or empty it will default to the method
environment itself.</td>
    </tr>
    <tr>
      <td>field-name</td>
      <td>Y</td>
      <td>The name (key) of the map field to copy.</td>
    </tr>
    <tr>
      <td>to-map-name</td>
      <td>N</td>
      <td>The name of the map in the method environment the field will
go to. If empty will default to the map-name. Note that if no map-name
was specified this will default to the method environment. So, you can
copy from the environment to the environment or from the environment to
a map, but to copy from a map to the environment you must use the
field-to-env operation defined below.</td>
    </tr>
    <tr>
      <td>to-field-name</td>
      <td>N</td>
      <td>The name (key) of the map field to put the original field in.
If empty will default to the field-name.</td>
    </tr>
  </tbody>
</table>
<p class="contenttext"><b><u>field-to-list</u></b></p>
<p class="contenttext">The field-to-list tag appends a field to the
specified list.</p>
<table border="1" cellpadding="2" cellspacing="0">
  <tbody>
    <tr>
      <td><b>Attribute&nbsp;Name</b></td>
      <td><b>Required?</b></td>
      <td><b>Description</b></td>
    </tr>
    <tr>
      <td>map-name</td>
      <td>N</td>
      <td>The name of the map in the method environment. If not
specified the field-name will be used to get the field from the method
environment.</td>
    </tr>
    <tr>
      <td>field-name</td>
      <td>Y</td>
      <td>The name (key) of the map field to use.</td>
    </tr>
    <tr>
      <td>list-name</td>
      <td>Y</td>
      <td>The name of the list in the method environment that the
object will be appended to.</td>
    </tr>
  </tbody>
</table>
<p class="contenttext"><b><u>env-to-field</u></b></p>
<p class="contenttext">The env-to-field tag copies a field from the
method environment to a field in a map.</p>
<table border="1" cellpadding="2" cellspacing="0">
  <tbody>
    <tr>
      <td><b>Attribute&nbsp;Name</b></td>
      <td><b>Required?</b></td>
      <td><b>Description</b></td>
    </tr>
    <tr>
      <td>env-name</td>
      <td>Y</td>
      <td>The name of the method environment field the object will come
from.</td>
    </tr>
    <tr>
      <td>map-name</td>
      <td>N</td>
      <td>The name of the map in the method environment the field will
go to. If empty or not specified this will default to the method
environment itself.</td>
    </tr>
    <tr>
      <td>field-name</td>
      <td>N</td>
      <td>The name (key) of the map field to put the original field in.
If empty will default to the env-name.</td>
    </tr>
  </tbody>
</table>
<p class="contenttext"><b><u>field-to-env</u></b></p>
<p class="contenttext">The field-to-env tag copies a field from a map
to a field in the method environment.</p>
<table border="1" cellpadding="2" cellspacing="0">
  <tbody>
    <tr>
      <td><b>Attribute&nbsp;Name</b></td>
      <td><b>Required?</b></td>
      <td><b>Description</b></td>
    </tr>
    <tr>
      <td>field-name</td>
      <td>Y</td>
      <td>The name (key) of the map field to get the object from.</td>
    </tr>
    <tr>
      <td>env-name</td>
      <td>N</td>
      <td>The name of the method environment field the object will be
put in. If empty will default to the field-name.</td>
    </tr>
    <tr>
      <td>map-name</td>
      <td>N</td>
      <td>The name of the map in the method environment the field will
come from. If empty or not specified this will default to the method
environment itself.</td>
    </tr>
  </tbody>
</table>
<p class="contenttext"><b><u>string-to-field</u></b></p>
<p class="contenttext">The string-to-field tag puts the inlined string
value in the specified field.</p>
<table border="1" cellpadding="2" cellspacing="0">
  <tbody>
    <tr>
      <td><b>Attribute&nbsp;Name</b></td>
      <td><b>Required?</b></td>
      <td><b>Description</b></td>
    </tr>
    <tr>
      <td>string</td>
      <td>Y</td>
      <td>The string value to be put in the field.</td>
    </tr>
    <tr>
      <td>map-name</td>
      <td>N</td>
      <td>The name of the map in the method environment. If not
specified the field-name will be used to get the field from the method
environment.</td>
    </tr>
    <tr>
      <td>field-name</td>
      <td>Y</td>
      <td>The name (key) of the map field to use.</td>
    </tr>
    <tr>
      <td>arg-list-name</td>
      <td>N</td>
      <td>The name (key) of a list to use for argument values for any
place holders in the string. Formatting is done with the Java
MessageFormat class. Place holders, for example, are denoted as
follows: {0}, {1}, etc and can appear anywhere in the string.</td>
    </tr>
  </tbody>
</table>
<p class="contenttext"><b><u>string-to-list</u></b></p>
<p class="contenttext">The string-to-list tag appends the inlined
string value in the specified List.</p>
<table border="1" cellpadding="2" cellspacing="0">
  <tbody>
    <tr>
      <td><b>Attribute&nbsp;Name</b></td>
      <td><b>Required?</b></td>
      <td><b>Description</b></td>
    </tr>
    <tr>
      <td>string</td>
      <td>Y</td>
      <td>The string value to append to the list.</td>
    </tr>
    <tr>
      <td>list-name</td>
      <td>Y</td>
      <td>The name of the list in the method environment.</td>
    </tr>
    <tr>
      <td>arg-list-name</td>
      <td>N</td>
      <td>The name (key) of a list to use for argument values for any
place holders in the string. Formatting is done with the Java
MessageFormat class. Place holders, for example, are denoted as
follows: {0}, {1}, etc and can appear anywhere in the string.</td>
    </tr>
  </tbody>
</table>
<p class="contenttext"><b><u>to-string</u></b></p>
<p class="contenttext">The to-string tag converts the Object in the
specified field to a String, putting the string in the same field.</p>
<table border="1" cellpadding="2" cellspacing="0">
  <tbody>
    <tr>
      <td><b>Attribute&nbsp;Name</b></td>
      <td><b>Required?</b></td>
      <td><b>Description</b></td>
    </tr>
    <tr>
      <td>map-name</td>
      <td>N</td>
      <td>The name of the map in the method environment. If not
specified the field-name will be used to get the field from the method
environment.</td>
    </tr>
    <tr>
      <td>field-name</td>
      <td>Y</td>
      <td>The name (key) of the map field to use.</td>
    </tr>
  </tbody>
</table>
<p class="contenttext"><b><u>clear-field</u></b></p>
<p class="contenttext">The clear-field tag clears/removes the specified
field.</p>
<table border="1" cellpadding="2" cellspacing="0">
  <tbody>
    <tr>
      <td><b>Attribute&nbsp;Name</b></td>
      <td><b>Required?</b></td>
      <td><b>Description</b></td>
    </tr>
    <tr>
      <td>map-name</td>
      <td>N</td>
      <td>The name of the map in the method environment. If not
specified the field-name will be used to get the field from the method
environment.</td>
    </tr>
    <tr>
      <td>field-name</td>
      <td>Y</td>
      <td>The name (key) of the map field to use.</td>
    </tr>
  </tbody>
</table>
<p class="contenttext"><b><u>iterate</u></b></p>
<p class="contenttext">The operations contained by the iterate tag will
be executed
for each of the entries in the list, and will make the current entry
available
in the method environment by the entry-name specified. This tag can
contain any of the simple-method
operations, including the conditional/if operations.</p>
<table border="1" cellpadding="2" cellspacing="0">
  <tbody>
    <tr>
      <td><b>Attribute&nbsp;Name</b></td>
      <td><b>Required?</b></td>
      <td><b>Description</b></td>
    </tr>
    <tr>
      <td>entry-name</td>
      <td>Y</td>
      <td>The name of the method environment field that will contain
each entry as we iterate through the list.</td>
    </tr>
    <tr>
      <td>list-name</td>
      <td>Y</td>
      <td>The name of the method environment field that contains the
list to iterate over.</td>
    </tr>
  </tbody>
</table>
<br>
<table border="1" cellpadding="2" cellspacing="0">
  <tbody>
    <tr>
      <td><b>Sub-Element&nbsp;Name</b></td>
      <td><b>How&nbsp;Many</b></td>
      <td><b>Description</b></td>
    </tr>
    <tr>
      <td>Any Operation</td>
      <td>0 to many</td>
      <td>Any simple-method operation can be nested under the iterate
tag.</td>
    </tr>
  </tbody>
</table>
<p class="contenttext"><b><u>first-from-list</u></b></p>
<p class="contenttext">The first-from-list tag will get the first entry
from the given list and put it in the environment field with the given
entry-name.</p>
<table border="1" cellpadding="2" cellspacing="0">
  <tbody>
    <tr>
      <td><b>Attribute&nbsp;Name</b></td>
      <td><b>Required?</b></td>
      <td><b>Description</b></td>
    </tr>
    <tr>
      <td>entry-name</td>
      <td>Y</td>
      <td>The name of the method environment field that will contain
the first entry in the list.</td>
    </tr>
    <tr>
      <td>list-name</td>
      <td>Y</td>
      <td>The name of the method environment field that contains the
list to get the first entry from.</td>
    </tr>
  </tbody>
</table>
<!-- ======================================================================= -->
<!-- ======================================================================= -->
<hr class="sepbar">
<h3><a name="EntityMisc">Entity Engine Misc. Operations</a></h3>
<p class="contenttext"><b><u>now-timestamp-to-env</u></b></p>
<p class="contenttext">The now-timestamp-to-env tag creates a
java.sql.Timestamp object with the current date
and time in it and puts it in a field in the method environment.</p>
<table border="1" cellpadding="2" cellspacing="0">
  <tbody>
    <tr>
      <td><b>Attribute&nbsp;Name</b></td>
      <td><b>Required?</b></td>
      <td><b>Description</b></td>
    </tr>
    <tr>
      <td>env-name</td>
      <td>Y</td>
      <td>The name of the method environment field the timestamp will
be put in.</td>
    </tr>
  </tbody>
</table>
<p class="contenttext"><b><u>now-date-to-env</u></b></p>
<p class="contenttext">The now-date-to-env tag creates a java.sql.Date
object with the current date
in it and puts it in a field in the method environment.</p>
<table border="1" cellpadding="2" cellspacing="0">
  <tbody>
    <tr>
      <td><b>Attribute&nbsp;Name</b></td>
      <td><b>Required?</b></td>
      <td><b>Description</b></td>
    </tr>
    <tr>
      <td>env-name</td>
      <td>Y</td>
      <td>The name of the method environment field the date will be put
in.</td>
    </tr>
  </tbody>
</table>
<p class="contenttext"><b><u>sequenced-id-to-env</u></b></p>
<p class="contenttext">The sequenced-id-to-env tag gets a sequenced ID
from the Entity Engine (through
the delegator) and puts it in the specified method environment field.
The object
will be a java.lang.Long, but can of course be converted to a String.</p>
<table border="1" cellpadding="2" cellspacing="0">
  <tbody>
    <tr>
      <td><b>Attribute&nbsp;Name</b></td>
      <td><b>Required?</b></td>
      <td><b>Description</b></td>
    </tr>
    <tr>
      <td>sequence-name</td>
      <td>Y</td>
      <td>The name of the sequence to pass to the delegator. The same
name must always be used for sequenced IDs that will be used for a
certain entity field otherwise non-unique keys may result.</td>
    </tr>
    <tr>
      <td>env-name</td>
      <td>Y</td>
      <td>The name of the method environment field the sequenced ID
will be put in.</td>
    </tr>
  </tbody>
</table>
<p class="contenttext"><b><u>set-current-user-login</u></b></p>
<p class="contenttext">The set-current-user-login tag sets the
UserLogin GenericValue object to be used for authentication for the
rest of the method. This is mostly used for calling services, etc.</p>
<table border="1" cellpadding="2" cellspacing="0">
  <tbody>
    <tr>
      <td><b>Attribute&nbsp;Name</b></td>
      <td><b>Required?</b></td>
      <td><b>Description</b></td>
    </tr>
    <tr>
      <td>value-name</td>
      <td>Y</td>
      <td>The name of the method environment field that contains the
UserLogin GenericValue object.</td>
    </tr>
  </tbody>
</table>
<!-- ======================================================================= -->
<!-- ======================================================================= -->
<hr class="sepbar">
<h3><a name="EntityFind">Entity Engine Find Operations</a></h3>
<p class="contenttext"><b><u>find-by-primary-key</u></b></p>
<p class="contenttext">The find-by-primary-key tag uses the delegator
to find an entity value by
its primary key. The resulting GenericValue object will be placed in
the method
environment using the specified value-name.</p>
<table border="1" cellpadding="2" cellspacing="0">
  <tbody>
    <tr>
      <td><b>Attribute&nbsp;Name</b></td>
      <td><b>Required?</b></td>
      <td><b>Description</b></td>
    </tr>
    <tr>
      <td>value-name</td>
      <td>Y</td>
      <td>The name of the method environment field that contains the
GenericValue object.</td>
    </tr>
    <tr>
      <td>entity-name</td>
      <td>Y</td>
      <td>The name of the entity to find an instance of.</td>
    </tr>
    <tr>
      <td>map-name</td>
      <td>Y</td>
      <td>The name of a map in the method environment that will be used
for the entity fields.</td>
    </tr>
    <tr>
      <td>delegator-name</td>
      <td>N</td>
      <td>By default this operation is done using the delegator that is
part of the simple-method calling context. This allows you to override
the default delegator by naming an alternate delegator.</td>
    </tr>
    <tr>
      <td>use-cache</td>
      <td>N</td>
      <td>Specifies whether or not the delegator's cache should be
searched before going to the database. This results in much faster
retrieval times, but can return stale data that is not the most current
in the database. Must be "true" or "false", defaults to "false".</td>
    </tr>
  </tbody>
</table>
<p class="contenttext"><b><u>find-by-and</u></b></p>
<p class="contenttext">The find-by-and tag uses the delegator to find
entity values by
anding the fields passed in the map. The resulting GenericValue objects
will be placed in the method environment using the specified list-name.</p>
<table border="1" cellpadding="2" cellspacing="0">
  <tbody>
    <tr>
      <td><b>Attribute&nbsp;Name</b></td>
      <td><b>Required?</b></td>
      <td><b>Description</b></td>
    </tr>
    <tr>
      <td>list-name</td>
      <td>Y</td>
      <td>The name of the method environment field that contains the
list of GenericValue objects.</td>
    </tr>
    <tr>
      <td>entity-name</td>
      <td>Y</td>
      <td>The name of the entity to find instances of.</td>
    </tr>
    <tr>
      <td>map-name</td>
      <td>Y</td>
      <td>The name of a map in the method environment that will be used
for the entity fields.</td>
    </tr>
    <tr>
      <td>order-by-list-name</td>
      <td>Y</td>
      <td>The name of a list in the method environment that contains a
list of strings specifying fields to order the results by.</td>
    </tr>
    <tr>
      <td>delegator-name</td>
      <td>N</td>
      <td>By default this operation is done using the delegator that is
part of the simple-method calling context. This allows you to override
the default delegator by naming an alternate delegator.</td>
    </tr>
    <tr>
      <td>use-cache</td>
      <td>N</td>
      <td>Specifies whether or not the delegator's cache should be
searched before going to the database. This results in much faster
retrieval times, but can return stale data that is not the most current
in the database. Must be "true" or "false", defaults to "false".</td>
    </tr>
    <tr>
      <td>use-iterator</td>
      <td>N</td>
      <td>Specifies whether or not to use the EntityListIterator when
doing the query. This is much more efficient for large data sets
because the results are read incrementaly instead of all at once. Note
that when using this the use-cache setting will be ignored. Also note
that an EntityListIterator must be closed when you are finished, but
this is done automatically by the <code>iterate</code> operation. Must
be "true" or "false", defaults to "false".</td>
    </tr>
  </tbody>
</table>
<p class="contenttext"><b><u>filter-list-by-and</u></b></p>
<p class="contenttext">The filter-list-by-and tag filters the given
list by the fields in the specified map.</p>
<table border="1" cellpadding="2" cellspacing="0">
  <tbody>
    <tr>
      <td><b>Attribute&nbsp;Name</b></td>
      <td><b>Required?</b></td>
      <td><b>Description</b></td>
    </tr>
    <tr>
      <td>list-name</td>
      <td>Y</td>
      <td>The name of the method environment field that contains the
list of GenericValue objects.</td>
    </tr>
    <tr>
      <td>to-list-name</td>
      <td>N</td>
      <td>The name of the method environment field the filtered list
will be put into. Defaults to the value of the list-name attribute (ie
goes to the same place it came from, replacing the old list).</td>
    </tr>
    <tr>
      <td>map-name</td>
      <td>N</td>
      <td>The name of a map in the method environment that will be used
for the entity fields. If no map is used this will just make a copy of
the list.</td>
    </tr>
  </tbody>
</table>
<p class="contenttext"><b><u>filter-list-by-date</u></b></p>
<p class="contenttext">The filter-list-by-date tag filters the given
list by the valid date using the from and thru dates in each value
object.</p>
<table border="1" cellpadding="2" cellspacing="0">
  <tbody>
    <tr>
      <td><b>Attribute&nbsp;Name</b></td>
      <td><b>Required?</b></td>
      <td><b>Description</b></td>
    </tr>
    <tr>
      <td>list-name</td>
      <td>Y</td>
      <td>The name of the method environment field that contains the
list of GenericValue objects.</td>
    </tr>
    <tr>
      <td>to-list-name</td>
      <td>N</td>
      <td>The name of the method environment field the filtered list
will be put into. Defaults to the value of the list-name attribute (ie
goes to the same place it came from, replacing the old list).</td>
    </tr>
    <tr>
      <td>valid-date-name</td>
      <td>N</td>
      <td>The name of a field in the method environment date to filter
by. Defaults to now.</td>
    </tr>
    <tr>
      <td>from-field-name</td>
      <td>N</td>
      <td>The name of the GenericValue field to use as the beginning
effective date. Defaults to <b>fromDate</b>.</td>
    </tr>
    <tr>
      <td>thru-field-name</td>
      <td>N</td>
      <td>The name of the GenericValue field to use as the ending
effective date. Defaults to <b>thruDate</b>.</td>
    </tr>
    <tr>
      <td>all-same</td>
      <td>N</td>
      <td>Specifies whether or not all GenericValue objects in the list
are of the same entity. Defaults to <b>true</b>.</td>
    </tr>
  </tbody>
</table>
<!-- ======================================================================= -->
<!-- ======================================================================= -->
<hr class="sepbar">
<h3><a name="EntityValue">Entity Engine Value Operations</a></h3>
<p class="contenttext"><b><u>make-value</u></b></p>
<p class="contenttext">The make-value tag uses the delegator to
construct an entity value.
The resulting value will not necessarily exist in the database, but
will simply
be assembled using the entity-name and fields map.
The resulting GenericValue object will be placed in the method
environment using the specified value-name.</p>
<table border="1" cellpadding="2" cellspacing="0">
  <tbody>
    <tr>
      <td><b>Attribute&nbsp;Name</b></td>
      <td><b>Required?</b></td>
      <td><b>Description</b></td>
    </tr>
    <tr>
      <td>value-name</td>
      <td>Y</td>
      <td>The name of the method environment field that contains the
GenericValue object.</td>
    </tr>
    <tr>
      <td>entity-name</td>
      <td>Y</td>
      <td>The name of the entity to construct an instance of.</td>
    </tr>
    <tr>
      <td>map-name</td>
      <td>N</td>
      <td>The name of a map in the method environment that will be used
for the entity fields.</td>
    </tr>
  </tbody>
</table>
<p class="contenttext"><b><u>clone-value</u></b></p>
<p class="contenttext">The clone-value tag make a copy of the value in
the method environment field specified by value-name. The resulting
GenericValue object will be placed in the method
environment using the specified new-value-name.</p>
<table border="1" cellpadding="2" cellspacing="0">
  <tbody>
    <tr>
      <td><b>Attribute&nbsp;Name</b></td>
      <td><b>Required?</b></td>
      <td><b>Description</b></td>
    </tr>
    <tr>
      <td>value-name</td>
      <td>Y</td>
      <td>The name of the method environment field that contains the
GenericValue object.</td>
    </tr>
    <tr>
      <td>new-value-name</td>
      <td>Y</td>
      <td>The name of the method environment field that will contain
the new GenericValue object.</td>
    </tr>
  </tbody>
</table>
<p class="contenttext"><b><u>create-value</u></b></p>
<p class="contenttext">The create-value tag persists the specified
GenericValue object by creating a
new instance of the entity in the datasource. An error will result if
an instance of the entity exists in the datasource with the same
primary key.</p>
<table border="1" cellpadding="2" cellspacing="0">
  <tbody>
    <tr>
      <td><b>Attribute&nbsp;Name</b></td>
      <td><b>Required?</b></td>
      <td><b>Description</b></td>
    </tr>
    <tr>
      <td>value-name</td>
      <td>Y</td>
      <td>The name of the method environment field that contains the
GenericValue object.</td>
    </tr>
  </tbody>
</table>
<p class="contenttext"><b><u>store-value</u></b></p>
<p class="contenttext">The store-value tag persists the specified
GenericValue object by updating the
instance of the entity in the datasource. An error will result if an
instance of the entity does not exist in the datasource with the same
primary key.</p>
<table border="1" cellpadding="2" cellspacing="0">
  <tbody>
    <tr>
      <td><b>Attribute&nbsp;Name</b></td>
      <td><b>Required?</b></td>
      <td><b>Description</b></td>
    </tr>
    <tr>
      <td>value-name</td>
      <td>Y</td>
      <td>The name of the method environment field that contains the
GenericValue object.</td>
    </tr>
  </tbody>
</table>
<p class="contenttext"><b><u>remove-value</u></b></p>
<p class="contenttext">The remove-value tag removes the specified
GenericValue object by removing the
instance of the entity in the datasource. An error will result if an
instance of the entity does not exist in the datasource with the same
primary key.</p>
<table border="1" cellpadding="2" cellspacing="0">
  <tbody>
    <tr>
      <td><b>Attribute&nbsp;Name</b></td>
      <td><b>Required?</b></td>
      <td><b>Description</b></td>
    </tr>
    <tr>
      <td>value-name</td>
      <td>Y</td>
      <td>The name of the method environment field that contains the
GenericValue object.</td>
    </tr>
  </tbody>
</table>
<p class="contenttext"><b><u>remove-by-and</u></b></p>
<p class="contenttext">The remove-by-and tag uses the delegator to
remove entity values from the datasource and is constrained by anding
the fields passed in the map. Make sure
the map contains something, or all values will be removed.</p>
<table border="1" cellpadding="2" cellspacing="0">
  <tbody>
    <tr>
      <td><b>Attribute&nbsp;Name</b></td>
      <td><b>Required?</b></td>
      <td><b>Description</b></td>
    </tr>
    <tr>
      <td>entity-name</td>
      <td>Y</td>
      <td>The name of the entity to remove instances of.</td>
    </tr>
    <tr>
      <td>map-name</td>
      <td>Y</td>
      <td>The name of a map in the method environment that will be used
for the entity fields.</td>
    </tr>
  </tbody>
</table>
<p class="contenttext"><b><u>clear-cache-line</u></b></p>
<p class="contenttext">Uses the delegator to clear elements from the
cache; intelligently looks at
the map passed to see if it is a byPrimaryKey, and byAnd, or an all.</p>
<table border="1" cellpadding="2" cellspacing="0">
  <tbody>
    <tr>
      <td><b>Attribute&nbsp;Name</b></td>
      <td><b>Required?</b></td>
      <td><b>Description</b></td>
    </tr>
    <tr>
      <td>entity-name</td>
      <td>Y</td>
      <td>The name of the entity to clear cache lines of.</td>
    </tr>
    <tr>
      <td>map-name</td>
      <td>Y</td>
      <td>The name of a map in the method environment that will be used
for the entity fields. If the fields in the map form the full primary
key the entry will be removed from the byPrimaryKey cache. If the map
exists but the fields do not include a full primary key the entry will
be removed from the byAnd cache. If no map-name is specified the entry
will be removed from the all cache.</td>
    </tr>
  </tbody>
</table>
<p class="contenttext"><b><u>clear-entity-caches</u></b></p>
<p class="contenttext">This is a very simple tag that should be used
sparingly because of the performance impact. It clears all lines from
all Entity Engine caches. It has no attributes or sub-elements.</p>
<p class="contenttext"><b><u>set-pk-fields</u></b></p>
<p class="contenttext">Looks for each PK field in the named map and if
it exists there it will copy it into the named value object.</p>
<table border="1" cellpadding="2" cellspacing="0">
  <tbody>
    <tr>
      <td><b>Attribute&nbsp;Name</b></td>
      <td><b>Required?</b></td>
      <td><b>Description</b></td>
    </tr>
    <tr>
      <td>value-name</td>
      <td>Y</td>
      <td>The name of the method environment field that contains the
GenericValue object.</td>
    </tr>
    <tr>
      <td>map-name</td>
      <td>Y</td>
      <td>The name of a map in the method environment that will be used
for the entity fields.</td>
    </tr>
    <tr>
      <td>set-if-null</td>
      <td>N</td>
      <td>Specifies whether or not to set fields that are null or
empty. Defaults to true.</td>
    </tr>
  </tbody>
</table>
<p class="contenttext"><b><u>set-nonpk-fields</u></b></p>
<p class="contenttext">Looks for each non-PK field in the named map and
if it exists there it will copy it into the named value object.</p>
<table border="1" cellpadding="2" cellspacing="0">
  <tbody>
    <tr>
      <td><b>Attribute&nbsp;Name</b></td>
      <td><b>Required?</b></td>
      <td><b>Description</b></td>
    </tr>
    <tr>
      <td>value-name</td>
      <td>Y</td>
      <td>The name of the method environment field that contains the
GenericValue object.</td>
    </tr>
    <tr>
      <td>map-name</td>
      <td>Y</td>
      <td>The name of a map in the method environment that will be used
for the entity fields.</td>
    </tr>
    <tr>
      <td>set-if-null</td>
      <td>N</td>
      <td>Specifies whether or not to set fields that are null or
empty. Defaults to true.</td>
    </tr>
  </tbody>
</table>
<!-- ======================================================================= -->
<!-- ======================================================================= -->
<hr class="sepbar">
<h3><a name="EntityList">Entity Engine List Operations</a></h3>
<p class="contenttext"><b><u>store-list</u></b></p>
<p class="contenttext">The store-list tag uses the delegator to store
all entity values in the list.
This is different than storing a single value in that values in the
list will
be inserted if it does not exist or updated if it does exist.</p>
<table border="1" cellpadding="2" cellspacing="0">
  <tbody>
    <tr>
      <td><b>Attribute&nbsp;Name</b></td>
      <td><b>Required?</b></td>
      <td><b>Description</b></td>
    </tr>
    <tr>
      <td>list-name</td>
      <td>Y</td>
      <td>The name of the method environment field that contains the
list of GenericValue objects.</td>
    </tr>
  </tbody>
</table>
<p class="contenttext"><b><u>remove-list</u></b></p>
<p class="contenttext">The remove-list tag uses the delegator to remove
all entity values in the list.
For each value in the list if it is a primary key just that entity
instance will
be removed, but if it is not a full primary key all entity instances
will be
removed from the datasource that match the constraint of the field map.</p>
<table border="1" cellpadding="2" cellspacing="0">
  <tbody>
    <tr>
      <td><b>Attribute&nbsp;Name</b></td>
      <td><b>Required?</b></td>
      <td><b>Description</b></td>
    </tr>
    <tr>
      <td>list-name</td>
      <td>Y</td>
      <td>The name of the method environment field that contains the
list of GenericValue objects.</td>
    </tr>
  </tbody>
</table>
<!-- ======================================================================= -->
<!-- ======================================================================= -->
<hr class="sepbar">
<h3><a name="EntityTx">Entity Engine Transaction Operations</a></h3>
<p class="contenttext"><b><u>transaction-begin</u></b></p>
<p class="contenttext">The transaction-begin tag will begin a
transaction if one is not already in place. If a transaction is begun
the environment field named as the began-transaction-name will be set
to true, otherwise it will be set to false.</p>
<p class="contenttext">Note that unless the simple-method is flagged to
not use a transaction all simple-methods will be inside a transaction.
The same is true for service calls through the Service Engine.</p>
<table border="1" cellpadding="2" cellspacing="0">
  <tbody>
    <tr>
      <td><b>Attribute&nbsp;Name</b></td>
      <td><b>Required?</b></td>
      <td><b>Description</b></td>
    </tr>
    <tr>
      <td>began-transaction-name</td>
      <td>N</td>
      <td>The name of the method environment field that contains a
Boolean specifying whether or not a transaction was begun in the
current transaction demarcation. Defaults to "beganTransaction".</td>
    </tr>
  </tbody>
</table>
<p class="contenttext"><b><u>transaction-commit</u></b></p>
<p class="contenttext">The transaction-commit tag will commit a
transaction if a transaction was begun in the current demarcation
context as represented by the environment field named as the
began-transaction-name. If the Boolean in that field is false no commit
will be done.</p>
<table border="1" cellpadding="2" cellspacing="0">
  <tbody>
    <tr>
      <td><b>Attribute&nbsp;Name</b></td>
      <td><b>Required?</b></td>
      <td><b>Description</b></td>
    </tr>
    <tr>
      <td>began-transaction-name</td>
      <td>N</td>
      <td>The name of the method environment field that contains a
Boolean specifying whether or not a transaction was begun in the
current transaction demarcation. Defaults to "beganTransaction".</td>
    </tr>
  </tbody>
</table>
<p class="contenttext"><b><u>transaction-rollback</u></b></p>
<p class="contenttext">The transaction-rollback tag will rollback a
transaction if a transaction was begun in the current demarcation
context as represented by the environment field named as the
began-transaction-name. If the Boolean in that field is false a set
rollback only will operation will be done instead of rollback which
will force the transaction to rollback regardless of which method or
object is responsible for beginning and ending the transaction.</p>
<table border="1" cellpadding="2" cellspacing="0">
  <tbody>
    <tr>
      <td><b>Attribute&nbsp;Name</b></td>
      <td><b>Required?</b></td>
      <td><b>Description</b></td>
    </tr>
    <tr>
      <td>began-transaction-name</td>
      <td>N</td>
      <td>The name of the method environment field that contains a
Boolean specifying whether or not a transaction was begun in the
current transaction demarcation. Defaults to "beganTransaction".</td>
    </tr>
  </tbody>
</table>
<!-- ======================================================================= -->
<!-- ======================================================================= -->
<hr class="sepbar">
<h3><a name="Conditional">Conditional (If) Operations</a></h3>
<p class="contenttext"><b><u>if</u></b></p>
<p class="contenttext">The <code>if</code> operation offers a flexible
way of specifying combinations
of conditions, alternate conditions, and operations to run on true
evaluation of the conditions or to
run otherwise.</p>
<p class="contenttext">The other if operations are meant for a
specific, simple condition when used outside of the condition
sub-element of this operation. The attributes of the other if
operations are the same when used
inside this operation. In this case they are empty tags and do not have
any sub-elements because the operations
to run are under the <code>then</code> or <code>else</code> tags.</p>
<table border="1" cellpadding="2" cellspacing="0">
  <tbody>
    <tr>
      <td><b>Sub-Element&nbsp;Name</b></td>
      <td><b>How&nbsp;Many</b></td>
      <td><b>Description</b></td>
    </tr>
    <tr>
      <td>condition</td>
      <td>1</td>
      <td>A simple element with no attributes that contains the
condition that will be evaluated to determine which sub-operations to
execute. To combine the other if operations documented below the <code>and</code>,
      <code>or</code>, <code>xor</code>, and <code>not</code>
elements
can be used. The and, or, and xor elements can contain as many general
if operations and modifier/combination elements (ie and, or, xor, and
not).</td>
    </tr>
    <tr>
      <td>then</td>
      <td>1</td>
      <td>The then element is used to contain operations that will run
if the condition evaluate to true. A then tag must be included, but can
be empty.</td>
    </tr>
    <tr>
      <td>else-if</td>
      <td>0 to many</td>
      <td>The else-if element can be used to specify alternate
conditional execution blocks. Each else-if element must contain two
sub-elements: <code>condition</code> and <code>then</code>. These
operations are used the same as the condition and then elements
describes above. If the condition of the parent if element is evaluated
to false, each condition of the else-if sub-elements will be evaluated,
and the operations under the then element corresponding first condition
that evaluates to true will be run.</td>
    </tr>
    <tr>
      <td>else</td>
      <td>0 or 1</td>
      <td>The else element can be used to contain operations that will
run if the condition evaluates to false, and if no <code>else-if</code>
sub-conditions evaluate to true. It can contain any simple-method
operation. The else tag must be placed as the last tag under the if tag.</td>
    </tr>
  </tbody>
</table>
<p class="contenttext"><b><u>if-validate-method</u></b></p>
<p class="contenttext">The operations contained by the
if-validate-method tag will only be executed
if the validate method returns true. This tag can contain any of the
simple-method
operations, including the conditional/if operations.</p>
<table border="1" cellpadding="2" cellspacing="0">
  <tbody>
    <tr>
      <td><b>Attribute&nbsp;Name</b></td>
      <td><b>Required?</b></td>
      <td><b>Description</b></td>
    </tr>
    <tr>
      <td>map-name</td>
      <td>N</td>
      <td>The name of the method environment field that contains the
map that the field to be validated will come from. If not specified the
field-name will be treated as a method environment field name (an
env-name).</td>
    </tr>
    <tr>
      <td>field-name</td>
      <td>Y</td>
      <td>The name of the map field that will be validated.</td>
    </tr>
    <tr>
      <td>method</td>
      <td>Y</td>
      <td>The name of the method that will be called to validate the
field. It must be a static method that takes a single String parameter
and return a boolean.</td>
    </tr>
    <tr>
      <td>class</td>
      <td>N</td>
      <td>The name of the class that contains the validation method. If
not specified defaults to "org.ofbiz.base.util.UtilValidate".</td>
    </tr>
  </tbody>
</table>
<br>
<table border="1" cellpadding="2" cellspacing="0">
  <tbody>
    <tr>
      <td><b>Sub-Element&nbsp;Name</b></td>
      <td><b>How&nbsp;Many</b></td>
      <td><b>Description</b></td>
    </tr>
    <tr>
      <td>Any Operation</td>
      <td>0 to many</td>
      <td>Any simple-method operation can be nested under an if-* tag.</td>
    </tr>
    <tr>
      <td>else</td>
      <td>0 or 1</td>
      <td>The else tag can be used to contain operations that will run
if the condition fails, or in other words if the operations under the
if tag do not run. It can contain any simple-method operation. The else
tag must be placed as the last tag under the if-* tag.</td>
    </tr>
  </tbody>
</table>
<p class="contenttext"><b><u>if-compare</u></b></p>
<p class="contenttext">The operations contained by the if-compare tag
will only be executed
if the comparison returns true. This tag can contain any of the
simple-method
operations, including the conditional/if operations.</p>
<table border="1" cellpadding="2" cellspacing="0">
  <tbody>
    <tr>
      <td><b>Attribute&nbsp;Name</b></td>
      <td><b>Required?</b></td>
      <td><b>Description</b></td>
    </tr>
    <tr>
      <td>map-name</td>
      <td>N</td>
      <td>The name of the method environment field that contains the
map that the field to be validated will come from. If not specified the
field-name will be treated as a method environment field name (an
env-name).</td>
    </tr>
    <tr>
      <td>field-name</td>
      <td>Y</td>
      <td>The name of the map field that will be compared.</td>
    </tr>
    <tr>
      <td>operator</td>
      <td>Y</td>
      <td>Specified the comparison operator must be one of the
following: less, greater, less-equals, greater-equals, equals,
not-equals, or contains.</td>
    </tr>
    <tr>
      <td>value</td>
      <td>Y</td>
      <td>The value that the field will compared to. Must be a String,
but can be converted to other types.</td>
    </tr>
    <tr>
      <td>type</td>
      <td>N</td>
      <td>The data type to use for the comparison. Must be one of the
following: String, Double, Float, Long, Integer, Date, Time, or
Timestamp. If no type is specified the default will be String.</td>
    </tr>
    <tr>
      <td>format</td>
      <td>N</td>
      <td>A format specifier to use when converting String objects to
other data types, mainly Date, Time and Timestamp.</td>
    </tr>
  </tbody>
</table>
<br>
<table border="1" cellpadding="2" cellspacing="0">
  <tbody>
    <tr>
      <td><b>Sub-Element&nbsp;Name</b></td>
      <td><b>How&nbsp;Many</b></td>
      <td><b>Description</b></td>
    </tr>
    <tr>
      <td>Any Operation</td>
      <td>0 to many</td>
      <td>Any simple-method operation can be nested under an if-* tag.</td>
    </tr>
    <tr>
      <td>else</td>
      <td>0 or 1</td>
      <td>The else tag can be used to contain operations that will run
if the condition fails, or in other words if the operations under the
if tag do not run. It can contain any simple-method operation. The else
tag must be placed as the last tag under the if-* tag.</td>
    </tr>
  </tbody>
</table>
<p class="contenttext"><b><u>if-compare-field</u></b></p>
<p class="contenttext">The operations contained by the if-compare-field
tag will only be executed
if the comparison returns true. This tag can contain any of the
simple-method
operations, including the conditional/if operations.</p>
<table border="1" cellpadding="2" cellspacing="0">
  <tbody>
    <tr>
      <td><b>Attribute&nbsp;Name</b></td>
      <td><b>Required?</b></td>
      <td><b>Description</b></td>
    </tr>
    <tr>
      <td>map-name</td>
      <td>N</td>
      <td>The name of the method environment field that contains the
map that the field to be validated will come from. If not specified the
field-name will be treated as a method environment field name (an
env-name).</td>
    </tr>
    <tr>
      <td>field-name</td>
      <td>Y</td>
      <td>The name of the map field that will be compared.</td>
    </tr>
    <tr>
      <td>operator</td>
      <td>Y</td>
      <td>Specified the comparison operator must be one of the
following: less, greater, less-equals, greater-equals, equals,
not-equals, or contains.</td>
    </tr>
    <tr>
      <td>to-map-name</td>
      <td>N</td>
      <td>The name of the method environment field that contains the
map that the field to be compared will come from. If left empty will
default to the method environment. It does not default to the map-name
because that would make it impossible to compare a map field to an
environment field.</td>
    </tr>
    <tr>
      <td>to-field-name</td>
      <td>N</td>
      <td>The name of the to-map field that the main field will be
compared to. If left empty will default to the field-name.</td>
    </tr>
    <tr>
      <td>type</td>
      <td>N</td>
      <td>The data type to use for the comparison. Must be one of the
following: String, Double, Float, Long, Integer, Date, Time, or
Timestamp. If no type is specified the default will be String.</td>
    </tr>
    <tr>
      <td>format</td>
      <td>N</td>
      <td>A format specifier to use when converting String objects to
other data types, mainly Date, Time and Timestamp.</td>
    </tr>
  </tbody>
</table>
<br>
<table border="1" cellpadding="2" cellspacing="0">
  <tbody>
    <tr>
      <td><b>Sub-Element&nbsp;Name</b></td>
      <td><b>How&nbsp;Many</b></td>
      <td><b>Description</b></td>
    </tr>
    <tr>
      <td>Any Operation</td>
      <td>0 to many</td>
      <td>Any simple-method operation can be nested under an if-* tag.</td>
    </tr>
    <tr>
      <td>else</td>
      <td>0 or 1</td>
      <td>The else tag can be used to contain operations that will run
if the condition fails, or in other words if the operations under the
if tag do not run. It can contain any simple-method operation. The else
tag must be placed as the last tag under the if-* tag.</td>
    </tr>
  </tbody>
</table>
<p class="contenttext"><b><u>if-regexp</u></b></p>
<p class="contenttext">The operations contained by the if-regexp tag
will only be executed
if the value complies with the regular expression. This tag can contain
any of the simple-method
operations, including the conditional/if operations.</p>
<table border="1" cellpadding="2" cellspacing="0">
  <tbody>
    <tr>
      <td><b>Attribute&nbsp;Name</b></td>
      <td><b>Required?</b></td>
      <td><b>Description</b></td>
    </tr>
    <tr>
      <td>map-name</td>
      <td>N</td>
      <td>The name of the method environment field that contains the
map that the field to be validated will come from. If not specified the
field-name will be treated as a method environment field name (an
env-name).</td>
    </tr>
    <tr>
      <td>field-name</td>
      <td>Y</td>
      <td>The name of the map field that will be compared.</td>
    </tr>
    <tr>
      <td>expr</td>
      <td>Y</td>
      <td>A regular expression that the map value must comply with.</td>
    </tr>
  </tbody>
</table>
<br>
<table border="1" cellpadding="2" cellspacing="0">
  <tbody>
    <tr>
      <td><b>Sub-Element&nbsp;Name</b></td>
      <td><b>How&nbsp;Many</b></td>
      <td><b>Description</b></td>
    </tr>
    <tr>
      <td>Any Operation</td>
      <td>0 to many</td>
      <td>Any simple-method operation can be nested under an if-* tag.</td>
    </tr>
    <tr>
      <td>else</td>
      <td>0 or 1</td>
      <td>The else tag can be used to contain operations that will run
if the condition fails, or in other words if the operations under the
if tag do not run. It can contain any simple-method operation. The else
tag must be placed as the last tag under the if-* tag.</td>
    </tr>
  </tbody>
</table>
<p class="contenttext"><b><u>if-empty</u></b></p>
<p class="contenttext">The operations contained by the if-empty tag
will only be executed
if the map field is empty. This tag can contain any of the
simple-method
operations, including the conditional/if operations.</p>
<table border="1" cellpadding="2" cellspacing="0">
  <tbody>
    <tr>
      <td><b>Attribute&nbsp;Name</b></td>
      <td><b>Required?</b></td>
      <td><b>Description</b></td>
    </tr>
    <tr>
      <td>map-name</td>
      <td>N</td>
      <td>The name of the method environment field that contains the
map that the field to be validated will come from. If not specified the
field-name will be treated as a method environment field name (an
env-name).</td>
    </tr>
    <tr>
      <td>field-name</td>
      <td>Y</td>
      <td>The name of the map field that will be compared.</td>
    </tr>
  </tbody>
</table>
<br>
<table border="1" cellpadding="2" cellspacing="0">
  <tbody>
    <tr>
      <td><b>Sub-Element&nbsp;Name</b></td>
      <td><b>How&nbsp;Many</b></td>
      <td><b>Description</b></td>
    </tr>
    <tr>
      <td>Any Operation</td>
      <td>0 to many</td>
      <td>Any simple-method operation can be nested under an if-* tag.</td>
    </tr>
    <tr>
      <td>else</td>
      <td>0 or 1</td>
      <td>The else tag can be used to contain operations that will run
if the condition fails, or in other words if the operations under the
if tag do not run. It can contain any simple-method operation. The else
tag must be placed as the last tag under the if-* tag.</td>
    </tr>
  </tbody>
</table>
<p class="contenttext"><b><u>if-not-empty</u></b></p>
<p class="contenttext">The operations contained by the if-not-empty tag
will only be executed
if the map field is not empty. This tag can contain any of the
simple-method
operations, including the conditional/if operations.</p>
<table border="1" cellpadding="2" cellspacing="0">
  <tbody>
    <tr>
      <td><b>Attribute&nbsp;Name</b></td>
      <td><b>Required?</b></td>
      <td><b>Description</b></td>
    </tr>
    <tr>
      <td>map-name</td>
      <td>N</td>
      <td>The name of the method environment field that contains the
map that the field to be validated will come from. If not specified the
field-name will be treated as a method environment field name (an
env-name).</td>
    </tr>
    <tr>
      <td>field-name</td>
      <td>Y</td>
      <td>The name of the map field that will be compared.</td>
    </tr>
  </tbody>
</table>
<br>
<table border="1" cellpadding="2" cellspacing="0">
  <tbody>
    <tr>
      <td><b>Sub-Element&nbsp;Name</b></td>
      <td><b>How&nbsp;Many</b></td>
      <td><b>Description</b></td>
    </tr>
    <tr>
      <td>Any Operation</td>
      <td>0 to many</td>
      <td>Any simple-method operation can be nested under an if-* tag.</td>
    </tr>
    <tr>
      <td>else</td>
      <td>0 or 1</td>
      <td>The else tag can be used to contain operations that will run
if the condition fails, or in other words if the operations under the
if tag do not run. It can contain any simple-method operation. The else
tag must be placed as the last tag under the if-* tag.</td>
    </tr>
  </tbody>
</table>
<p class="contenttext"><b><u>if-has-permission</u></b></p>
<p class="contenttext">The operations contained by the
if-has-permission tag will only be executed
if the user has the specified permission, and optionally the action.
This tag can contain any of the simple-method
operations, including the conditional/if operations.</p>
<table border="1" cellpadding="2" cellspacing="0">
  <tbody>
    <tr>
      <td><b>Attribute&nbsp;Name</b></td>
      <td><b>Required?</b></td>
      <td><b>Description</b></td>
    </tr>
    <tr>
      <td>permission</td>
      <td>Y</td>
      <td>The name of the permission in the database. The user must
belong to a security group that has this permission.</td>
    </tr>
    <tr>
      <td>action</td>
      <td>N</td>
      <td>If an action is specified the user can have one of two
permissions: the permission + "_ADMIN" or permission + action. Examples
of actions include "_CREATE", "_VIEW", etc.</td>
    </tr>
  </tbody>
</table>
<br>
<table border="1" cellpadding="2" cellspacing="0">
  <tbody>
    <tr>
      <td><b>Sub-Element&nbsp;Name</b></td>
      <td><b>How&nbsp;Many</b></td>
      <td><b>Description</b></td>
    </tr>
    <tr>
      <td>Any Operation</td>
      <td>0 to many</td>
      <td>Any simple-method operation can be nested under an if-* tag.</td>
    </tr>
    <tr>
      <td>else</td>
      <td>0 or 1</td>
      <td>The else tag can be used to contain operations that will run
if the condition fails, or in other words if the operations under the
if tag do not run. It can contain any simple-method operation. The else
tag must be placed as the last tag under the if-* tag.</td>
    </tr>
  </tbody>
</table>
<p class="contenttext"><b><u>check-permission</u></b></p>
<p class="contenttext">The check-permission tag checks to see if the
current user has the specified
permission. The the user does not have the specified permission or
there is no
user associated with the context then the failure message from
fail-message or
file-property will be added to the specified error list.</p>
<table border="1" cellpadding="2" cellspacing="0">
  <tbody>
    <tr>
      <td><b>Attribute&nbsp;Name</b></td>
      <td><b>Required?</b></td>
      <td><b>Description</b></td>
    </tr>
    <tr>
      <td>permission</td>
      <td>Y</td>
      <td>The name of the permission in the database. The user must
belong to a security group that has this permission.</td>
    </tr>
    <tr>
      <td>action</td>
      <td>N</td>
      <td>If an action is specified the user can have one of two
permissions: the permission + "_ADMIN" or permission + action. Examples
of actions include "_CREATE", "_VIEW", etc.</td>
    </tr>
    <tr>
      <td>error-list-name</td>
      <td>N</td>
      <td>The name of a list in the method environment that the error
messages will be added to. Will be created if does not exist. Defaults
to "error_list".</td>
    </tr>
  </tbody>
</table>
<br>
<table border="1" cellpadding="2" cellspacing="0">
  <tbody>
    <tr>
      <td><b>Sub-Element&nbsp;Name</b></td>
      <td><b>How&nbsp;Many</b></td>
      <td><b>Description</b></td>
    </tr>
    <tr>
      <td>alt-permission</td>
      <td>0 to many</td>
      <td>Allows you to specify alternate permissions, any of which
will satisfy this check permission. If the current userLogin does not
have any of these permissions the error will be added to the list. Has
two attributes: <code>permission</code> and <code>action</code> that
behave just as the corresponding attributes described above for the
check-permission element.</td>
    </tr>
    <tr>
      <td>fail-message</td>
      <td>one</td>
      <td>An inline failure message.</td>
    </tr>
    <tr>
      <td>fail-property</td>
      <td>one</td>
      <td>A failure message from a properties file.</td>
    </tr>
  </tbody>
</table>
<p class="contenttext"><b><u>check-id</u></b></p>
<p class="contenttext">The check-id tag checks to see if the ID value
in the given field is a valid ID string. Valid IDs can be any sequence
of characters or digits but must not containt the following characters:
space [ ], doublequote ["], single quote ['], ampersand [&amp;],
question mark [?], less-than sign [&lt;], greater-than sign [&gt;].</p>
<table border="1" cellpadding="2" cellspacing="0">
  <tbody>
    <tr>
      <td><b>Attribute&nbsp;Name</b></td>
      <td><b>Required?</b></td>
      <td><b>Description</b></td>
    </tr>
    <tr>
      <td>field-name</td>
      <td>Y</td>
      <td>The name of the field that contains the ID value to check.</td>
    </tr>
    <tr>
      <td>map-name</td>
      <td>N</td>
      <td>The name of the Map that contains the field. If not specified
the environment will be used to find the field.</td>
    </tr>
    <tr>
      <td>error-list-name</td>
      <td>N</td>
      <td>The name of a list in the method environment that the error
messages will be added to. Will be created if does not exist. Defaults
to "error_list".</td>
    </tr>
  </tbody>
</table>
<br>
<table border="1" cellpadding="2" cellspacing="0">
  <tbody>
    <tr>
      <td><b>Sub-Element&nbsp;Name</b></td>
      <td><b>How&nbsp;Many</b></td>
      <td><b>Description</b></td>
    </tr>
    <tr>
      <td>fail-message</td>
      <td>one</td>
      <td>An inline failure message.</td>
    </tr>
    <tr>
      <td>fail-property</td>
      <td>one</td>
      <td>A failure message from a properties file.</td>
    </tr>
  </tbody>
</table>
<!-- ======================================================================= -->
<!-- ======================================================================= -->
<hr class="sepbar">
<h3><a name="Other">Other Operations</a></h3>
<p class="contenttext"><b><u>property-to-field</u></b></p>
<p class="contenttext">The property-to-field tag puts the inlined
string value in the specified field.</p>
<table border="1" cellpadding="2" cellspacing="0">
  <tbody>
    <tr>
      <td><b>Attribute&nbsp;Name</b></td>
      <td><b>Required?</b></td>
      <td><b>Description</b></td>
    </tr>
    <tr>
      <td>resource</td>
      <td>Y</td>
      <td>The resource location of the properties file.</td>
    </tr>
    <tr>
      <td>property</td>
      <td>Y</td>
      <td>The property whose value will be put in the field.</td>
    </tr>
    <tr>
      <td>default</td>
      <td>N</td>
      <td>The default value to use if the specified property is empty.</td>
    </tr>
    <tr>
      <td>map-name</td>
      <td>N</td>
      <td>The name of the map in the method environment. If not
specified the field-name will be used to get the field from the method
environment.</td>
    </tr>
    <tr>
      <td>field-name</td>
      <td>Y</td>
      <td>The name (key) of the map field to use.</td>
    </tr>
  </tbody>
</table>
<p class="contenttext"><b><u>log</u></b></p>
<p class="contenttext">The log tag logs a message used the OFBiz Debug
class, which uses Log4J to log to the console, a file, or some other
location.
The message is a concatenation of the message attribute and then all of
the field and string sub-element values in the order they are specified.</p>
<table border="1" cellpadding="2" cellspacing="0">
  <tbody>
    <tr>
      <td><b>Attribute&nbsp;Name</b></td>
      <td><b>Required?</b></td>
      <td><b>Description</b></td>
    </tr>
    <tr>
      <td>level</td>
      <td>Y</td>
      <td>The logging/debug level to use. Must be one of the following:
verbose | timing | info | important | warning | error | fatal | always.
These are the standard OFBiz logging levels.</td>
    </tr>
    <tr>
      <td>message</td>
      <td>N</td>
      <td>A shortcut for simple messages. If used along with field
and/or string sub-elements the inline string in the message will come
first.</td>
    </tr>
  </tbody>
</table>
<br>
<table border="1" cellpadding="2" cellspacing="0">
  <tbody>
    <tr>
      <td><b>Sub-Element&nbsp;Name</b></td>
      <td><b>How&nbsp;Many</b></td>
      <td><b>Description</b></td>
    </tr>
    <tr>
      <td>field</td>
      <td>0 to many</td>
      <td>Inserts the value of the field into the message where
specified.</td>
    </tr>
    <tr>
      <td>string</td>
      <td>0 to many</td>
      <td>Inserts the value of the inline string into the message where
specified.</td>
    </tr>
  </tbody>
</table>
<p class="contenttext"><b><u>calculate</u></b></p>
<p class="contenttext">The calculate tag performs the specified
calculation and puts the result in
an object in the field of the specified map (see the calculate element
attribute
descriptions above). The type of the object can be specified with the
<b>type</b> attribute, but defaults to Double.</p>
<p class="contenttext">The calculate tag can contain <b>calcop</b> and
<b>number</b> tags, and the
<b>calcop</b> tag can also contain these two tags to enable nested
calculations.</p>
<p class="contenttext">Each calcop tag has three attributes: operator,
map-name and field-name. Only
the operator is required. The operator specifies the operation to
perform on the
given field and nested calcops and numbers. It must be one of the
following: get | add | subtract | multiply | divide | negative.</p>
<p class="contenttext">Regardless of the operator the action is very
similar. It translates to a
formula like the following: <b><code>(V1 [operator] V2 [operator] V3)</code></b>.
In other
words a final result is calculated by applying the operator to the
values in the
order they are specified. If a field-name (and optionally map-name) is
specifies
on the calcop tag that field will be used as the first value, otherwise
the
first nested <b>calcop</b> or <b>number</b> will be the first value.</p>
<p class="contenttext">The get operator is just an alias for add. It
adds all of the values under
it. Likewise the negative operator is almost an alias for subtract,
with the
exception that the first value is negated instead of left positive. For
convenience the calculate tag itself acts like an add, in other words
the
calcops and numbers under it are all added together.</p>
<p class="contenttext">
<table border="1" cellpadding="2" cellspacing="0">
  <tbody>
    <tr>
      <td><b>Attribute&nbsp;Name</b></td>
      <td><b>Required?</b></td>
      <td><b>Description</b></td>
    </tr>
    <tr>
      <td>map-name</td>
      <td>N</td>
      <td>The name of the map in the method environment. If not
specified the field-name will be used to get the field from the method
environment.</td>
    </tr>
    <tr>
      <td>field-name</td>
      <td>Y</td>
      <td>The name (key) of the map field to use.</td>
    </tr>
    <tr>
      <td>type</td>
      <td>N</td>
      <td>The object type to put into this field. Can be: Double |
Float | Long | Integer. The default is Double.</td>
    </tr>
  </tbody>
</table>
<br>
<table border="1" cellpadding="2" cellspacing="0">
  <tbody>
    <tr>
      <td><b>Sub-Element&nbsp;Name</b></td>
      <td><b>How&nbsp;Many</b></td>
      <td><b>Description</b></td>
    </tr>
    <tr>
      <td>calcop</td>
      <td>0 to many</td>
      <td>This tag is used to apply an operator in the calculation. It
can have calcop and number tags nested under it, making it also act
like a parenthesis. It has three attributes: operator, map-name, and
field-name. These are described below.</td>
    </tr>
    <tr>
      <td>number</td>
      <td>0 to many</td>
      <td>This is used to put a numeric constant (a number) into the
calculation. It has one attribute: value. This must be a properly
formatted number or an error will result.</td>
    </tr>
  </tbody>
</table>
</p>
<p class="contenttext">Here is an example of an XML snippet that
performs the calculation
<b><code>a=b+(((c+x+2)*-d)/e)</code></b>, or in Reverse Polish Notation
(a little
bit closer to the resulting XML, and the notation used in the Rule
Engine)
<b><code>a=+(b,/(*(+(c,x,2),-d),e))</code></b>. Here is the XML:</p>
<pre> &lt;calculate field-name="a"&gt;<br> &lt;calcop operator="get" field-name="b"/&gt;<br> &lt;calcop operator="divide"&gt;<br> &lt;calcop operator="multiply"&gt;<br> &lt;calcop operator="add" field-name="c"&gt;<br> &lt;calcop operator="get" field-name="x"/&gt;<br> &lt;number value="2"/&gt;<br> &lt;/calcop&gt;<br> &lt;calcop operator="negative" field-name="d"/&gt;<br> &lt;/calcop&gt;<br> &lt;calcop operator="get" field-name="e"/&gt;<br> &lt;/calcop&gt;<br> &lt;/calculate&gt;<br></pre>
<!-- ======================================================================= -->
<!-- ======================================================================= -->
<hr class="sepbar">
<h3><a name="MethodExample">Simple Methods Example</a></h3>
<pre>&lt;!DOCTYPE simple-methods PUBLIC "-//OFBiz//DTD Simple Methods//EN" "http://www.ofbiz.org/dtds/simple-methods.dtd"&gt;<br><br>&lt;simple-methods&gt;<br> &lt;simple-method method-name="createProduct" short-description="Create an Product"&gt;<br> &lt;check-permission permission="CATALOG" action="_CREATE"&gt;&lt;fail-message message="Security Error: to run createProduct you must have the CATALOG_CREATE or CATALOG_ADMIN permission"/&gt;&lt;/check-permission&gt;<br> &lt;check-id field-name="productId" map-name="parameters"/&gt;<br> &lt;check-errors/&gt;<br><br> &lt;make-value value-name="newEntity" entity-name="Product"/&gt;<br> &lt;set-nonpk-fields map-name="parameters" value-name="newEntity"/&gt;<br> &lt;set-pk-fields map-name="parameters" value-name="newEntity"/&gt;<br> <br> &lt;now-timestamp-to-env env-name="nowTimestamp"/&gt;<br> &lt;env-to-field env-name="nowTimestamp" field-name="lastModifiedDate" map-name="newEntity"/&gt;<br> &lt;env-to-field env-name="nowTimestamp" field-name="createdDate" map-name="newEntity"/&gt;<br> &lt;field-to-field field-name="userLoginId" map-name="userLogin" to-field-name="lastModifiedByUserLogin" to-map-name="newEntity"/&gt;<br> &lt;field-to-field field-name="userLoginId" map-name="userLogin" to-field-name="createdByUserLogin" to-map-name="newEntity"/&gt;<br> <br> &lt;create-value value-name="newEntity"/&gt;<br><br> &lt;!-- induce keywords if autoCreateKeywords is emtpy or Y--&gt;<br> &lt;if-empty field-name="autoCreateKeywords" map-name="newEntity"&gt;<br> &lt;call-bsh&gt;&lt;![CDATA[org.ofbiz.commonapp.product.product.KeywordSearch.induceKeywords(newEntity);]]&gt;&lt;/call-bsh&gt;<br> &lt;else&gt;<br> &lt;if-compare field-name="autoCreateKeywords" map-name="newEntity" operator="equals" value="Y"&gt;<br> &lt;call-bsh&gt;&lt;![CDATA[org.ofbiz.commonapp.product.product.KeywordSearch.induceKeywords(newEntity);]]&gt;&lt;/call-bsh&gt;<br> &lt;/if-compare&gt;<br> &lt;/else&gt;<br> &lt;/if-empty&gt;<br> &lt;/simple-method&gt;<br> &lt;simple-method event-name="create" short-description="Create Work Effort"&gt;<br> &lt;call-map-processor xml-resource="org/ofbiz/commonapp/workeffort/workeffort/WorkEffortMapProcessors.xml" <br> processor-name="update" in-map-name="parameters" out-map-name="context"/&gt;<br> &lt;check-errors/&gt;<br> &lt;call-service service-name="createWorkEffort" in-map-name="context"&gt;<br> &lt;default-message&gt;Work Effort successfully created.&lt;/default-message&gt;<br> &lt;result-to-request result-name="workEffortId"/&gt;&lt;/service&gt;<br> &lt;/simple-method&gt;<br> &lt;simple-method event-name="update" short-description="Update Work Effort"&gt;<br> &lt;call-map-processor xml-resource="org/ofbiz/commonapp/workeffort/workeffort/WorkEffortMapProcessors.xml" <br> processor-name="update" in-map-name="parameters" out-map-name="context"/&gt;<br> &lt;check-errors/&gt;<br> &lt;call-service service-name="updateWorkEffort" in-map-name="context"&gt;<br> &lt;default-message&gt;Work Effort successfully updated.&lt;/default-message&gt;&lt;/service&gt;<br> &lt;/simple-method&gt;<br>&lt;/simple-methods&gt;<br></pre>
</body>
</html>
